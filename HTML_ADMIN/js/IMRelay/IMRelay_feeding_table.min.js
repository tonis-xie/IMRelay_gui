var g_LDA={};$(function(){function f(n){var t=document.createElement("button");return t.className="btn btn-default",t.type="button",t.id="toogle_edit_button"+n,t.innerText=n+": Edit",'<td style="width:65px;">'+t.outerHTML+"<\/td>"}function e(n,t,i){var u=n.attributeWriter(t),r="<td";return(n.hidden||n.textAlign)&&(r+=' style="',n.textAlign&&(r+="text-align: "+n.textAlign+";"),r+='"'),i&&(r+=' class="user_editable"'),r+">"+u+"<\/td>"}function o(n){return $.inArray(n,["nr_of_fish","avg_fish_kg","feeder_speed_kg_pr_min","feeding_percent","growth_factor"])!==-1?!0:!1}function s(n,t,i,r){var e="",s=new Date(t.start_date),c=s.getFullYear().toString()+"-"+("0"+(s.getMonth()+1).toString()).slice(-2)+"-"+("0"+s.getDate().toString()).slice(-2),u,h;for(t.start_date=c,t.biomass=t.nr_of_fish*t.avg_fish_kg/1e3,t.required_feed_pr_day=t.biomass*t.feeding_percent/100,t.time_feeder_active=t.required_feed_pr_day/t.feeder_speed_kg_pr_min,t.feeder_toggle_speed=t.time_feeder_active/t.time_feeding_intervals,$("#jknob"+(n+1)).val(t.feeder_toggle_speed*100).trigger("change"),t.feeder_toggle_speed>1?(relay_indicator_control(n+1,t.state==="active",!0),$("#jknob"+(n+1)).trigger("configure",{fgColor:"red"})):(relay_indicator_control(n+1,t.state==="active",!1),$("#jknob"+(n+1)).trigger("configure",{fgColor:"#1f8dff"})),e+=f(t.id),u=1,h=i.length;u<h;u++)e+=r(i[u],t,o(i[u].id));return"<tr>"+e+"<\/tr>"}function h(t){$("#toogle_edit_button"+t).click(function(){var u=$("table#feeding_table tr:nth-child("+t+") td.user_editable"),r=u.is(".editable"),i;this.innerHTML=r?t+": Edit":t+": Save";u.prop("contenteditable",!r).toggleClass("editable");r&&(i=n.records.getFromTable()[t-1],g_LDA.feeding_table.update([{id:t,nr_of_fish:i.nr_of_fish,avg_fish_kg:i.avg_fish_kg,feeder_speed_kg_pr_min:i.feeder_speed_kg_pr_min,feeding_percent:i.feeding_percent,growth_factor:i.growth_factor}]))})}function r(n){var t,i,u,f;if(!n){t=g_LDA.feeding_table.get();for(i in t)t[i].state==="active"&&(t[i].avg_fish_kg=+t[i].avg_fish_kg+ +(t[i].avg_fish_kg*t[i].feeding_percent/100*t[i].growth_factor));g_LDA.feeding_table.update([{id:1,avg_fish_kg:t[0].avg_fish_kg},{id:2,avg_fish_kg:t[1].avg_fish_kg},{id:3,avg_fish_kg:t[2].avg_fish_kg},{id:4,avg_fish_kg:t[3].avg_fish_kg},{id:5,avg_fish_kg:t[4].avg_fish_kg},{id:6,avg_fish_kg:t[5].avg_fish_kg},{id:7,avg_fish_kg:t[6].avg_fish_kg},{id:8,avg_fish_kg:t[7].avg_fish_kg},{id:9,avg_fish_kg:t[8].avg_fish_kg},{id:10,avg_fish_kg:t[9].avg_fish_kg},{id:11,avg_fish_kg:t[10].avg_fish_kg},{id:12,avg_fish_kg:t[11].avg_fish_kg},{id:13,avg_fish_kg:t[12].avg_fish_kg},{id:14,avg_fish_kg:t[13].avg_fish_kg},{id:15,avg_fish_kg:t[14].avg_fish_kg},{id:16,avg_fish_kg:t[15].avg_fish_kg}])}u=new Date;f=(new Date).setHours(24,0,0,0);window.setTimeout(r,f-u)}var i,u,t,n;if(g_LDA.feeding_table=new vis.DataSet,i=localStorage["feeder.table"],i!=null)u=JSON.parse(i),g_LDA.feeding_table.update(u);else for(t=1;t<=16;t++)g_LDA.feeding_table.add({id:t,start_date:"0",nr_of_fish:"0",avg_fish_kg:"0",feeder_speed_kg_pr_min:"0",feeding_percent:"0",growth_factor:"0",time_feeding_intervals:"0"});g_LDA.feeding_table.on("*",function(){var t=g_LDA.feeding_table.get();localStorage["feeder.table"]=JSON.stringify(t);n.settings.dataset.originalRecords=t;n.process()});$("#feeding_table").dynatable({features:{paginate:!1,sorting:!1,recordCount:!1,search:!1},dataset:{records:g_LDA.feeding_table.get()},writers:{_rowWriter:s,_cellWriter:e}}).bind("dynatable:afterProcess",function(){for(var n=1;n<=16;n++)h(n)});n=$("#feeding_table").data("dynatable");n.sorts.clear();n.sorts.add("id",1);n.process();r(!0)});
/*
//# sourceMappingURL=IMRelay_feeding_table.min.js.map
*/