$(function(){function o(n){var t=document.createElement("button");return t.className="btn btn-default",t.type="button",t.id="toogle_edit_button"+n,t.innerText=n+": Edit",t}function s(n){var t=o(n).outerHTML;return'<td style="width:65px;">'+t+"<\/td>"}function h(n,t,i){var u=n.attributeWriter(t),r="<td";return n.textAlign="center",(n.hidden||n.textAlign)&&(r+=' style="',n.hidden&&(r+="display: none;"),n.textAlign&&(r+="text-align: "+n.textAlign+";"),r+='"'),i&&(r+=' class="user_editable"'),r+">"+u+"<\/td>"}function c(n){return n==="nr_of_fish"?!0:n==="avg_fish_kg"?!0:n==="feeder_speed_kg_pr_min"?!0:n==="feeding_percent"?!0:!1}function l(n,t,i,r){var f="",e=new Date(t.start_date),h=e.getFullYear().toString()+"-"+("0"+(e.getMonth()+1).toString()).slice(-2)+"-"+("0"+e.getDate().toString()).slice(-2),u,o;for(t.start_date=h,t.biomass=t.nr_of_fish*t.avg_fish_kg,t.required_feed_pr_day=t.biomass*t.feeding_percent,t.time_feeder_active=t.required_feed_pr_day/t.feeder_speed_kg_pr_min,t.feeder_toggle_speed=t.time_feeder_active/t.time_feeding_intervals,f+=s(t.id),u=1,o=i.length;u<o;u++)f+=r(i[u],t,c(i[u].id));return"<tr>"+f+"<\/tr>"}function a(n){$("#toogle_edit_button"+n).click(function(){var t=$("table#feeding_table tr:nth-child("+n+") td.user_editable"),i=!t.is(".editable");this.innerHTML=i?n+": Save":n+": Edit";t.prop("contenteditable",i).toggleClass("editable")})}function e(n){n||console.log("daily event has fired");var i=new Date,t=new Date;t.setSeconds(t.getSeconds()+10);window.setTimeout(e,t-i)}for(var u,f,t,i,n=new vis.DataSet,r=1;r<=16;r++)n.add({id:r,state:"inactive",start_date:(new Date).setHours(0,0,0,0),nr_of_fish:"0",avg_fish_kg:"1",biomass:"1",feeder_speed_kg_pr_min:"1",feeding_percent:"1",required_feed_pr_day:"1",feed_progress_today:"1",time_feeding_intervals:"1",time_feeder_active:"1",feeder_toggle_speed:"1"});u=new vis.DataView(n,{fields:["id","state","start_date","nr_of_fish","avg_fish_kg","feeder_speed_kg_pr_min","feeding_percent"]});u.on("*",function(){var n=u.get();localStorage["feeder.table"]=JSON.stringify(n)});f=n.get();n.on("*",function(){f=n.get()});for(n.update([{id:1,state:"active"},{id:2,state:"active"}]),$("#feeding_table").dynatable({features:{paginate:!1,sorting:!1,recordCount:!1,search:!1},dataset:{records:f},writers:{_rowWriter:l,_cellWriter:h}}),t=$("#feeding_table").data("dynatable"),t.sorts.clear(),t.sorts.add("id",1),t.process(),i=1;i<=16;i++)a(i);e(!0)});
/*
//# sourceMappingURL=IMRelay_feeding_table.min.js.map
*/