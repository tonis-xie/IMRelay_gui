$(function(){function o(n){var t=document.createElement("button");return t.className="btn btn-default",t.type="button",t.id="toogle_edit_button"+n,t.innerText=n+": Edit",'<td style="width:65px;">'+t.outerHTML+"<\/td>"}function s(n,t,i){var u=n.attributeWriter(t),r="<td";return n.textAlign="center",(n.hidden||n.textAlign)&&(r+=' style="',n.hidden&&(r+="display: none;"),n.textAlign&&(r+="text-align: "+n.textAlign+";"),r+='"'),i&&(r+=' class="user_editable"'),r+">"+u+"<\/td>"}function h(n){return editable_columns=["nr_of_fish","avg_fish_kg","feeder_speed_kg_pr_min","feeding_percent"],$.inArray(n,editable_columns)!=-1?!0:!1}function c(n,t,i,r){var f="",e=new Date(t.start_date),c=e.getFullYear().toString()+"-"+("0"+(e.getMonth()+1).toString()).slice(-2)+"-"+("0"+e.getDate().toString()).slice(-2),u,s;for(t.start_date=c,t.biomass=t.nr_of_fish*t.avg_fish_kg,t.required_feed_pr_day=t.biomass*t.feeding_percent,t.time_feeder_active=t.required_feed_pr_day/t.feeder_speed_kg_pr_min,t.feeder_toggle_speed=t.time_feeder_active/t.time_feeding_intervals,f+=o(t.id),u=1,s=i.length;u<s;u++)f+=r(i[u],t,h(i[u].id));return"<tr>"+f+"<\/tr>"}function l(n){$("#toogle_edit_button"+n).click(function(){var t=$("table#feeding_table tr:nth-child("+n+") td.user_editable"),i=!t.is(".editable");this.innerHTML=i?n+": Save":n+": Edit";t.prop("contenteditable",i).toggleClass("editable")})}function e(n){n||console.log("daily event has fired");var i=new Date,t=new Date;t.setSeconds(t.getSeconds()+10);window.setTimeout(e,t-i)}for(var u,f,t,i,n=new vis.DataSet,r=1;r<=16;r++)n.add({id:r,state:"inactive",start_date:(new Date).setHours(0,0,0,0),nr_of_fish:"0",avg_fish_kg:"1",biomass:"1",feeder_speed_kg_pr_min:"1",feeding_percent:"1",required_feed_pr_day:"1",feed_progress_today:"1",time_feeding_intervals:"1",time_feeder_active:"1",feeder_toggle_speed:"1"});u=new vis.DataView(n,{fields:["id","state","start_date","nr_of_fish","avg_fish_kg","feeder_speed_kg_pr_min","feeding_percent"]});u.on("*",function(){var n=u.get();localStorage["feeder.table"]=JSON.stringify(n)});f=n.get();n.on("*",function(){f=n.get()});for(n.update([{id:1,state:"active"},{id:2,state:"active"}]),$("#feeding_table").dynatable({features:{paginate:!1,sorting:!1,recordCount:!1,search:!1},dataset:{records:f},writers:{_rowWriter:c,_cellWriter:s}}),t=$("#feeding_table").data("dynatable"),t.sorts.clear(),t.sorts.add("id",1),t.process(),i=1;i<=16;i++)l(i);e(!0)});
/*
//# sourceMappingURL=IMRelay_feeding_table.min.js.map
*/