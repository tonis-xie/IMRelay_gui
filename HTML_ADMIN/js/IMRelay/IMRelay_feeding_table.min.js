$(function(){function e(n){var t=document.createElement("button");return t.className="btn btn-default",t.type="button",t.id="toogle_edit_button"+n,t.innerText=n+": Edit",'<td style="width:65px;">'+t.outerHTML+"<\/td>"}function o(n,t,i){var u=n.attributeWriter(t),r="<td";return n.textAlign="center",(n.hidden||n.textAlign)&&(r+=' style="',n.textAlign&&(r+="text-align: "+n.textAlign+";"),r+='"'),i&&(r+=' class="user_editable"'),r+">"+u+"<\/td>"}function s(n){return $.inArray(n,["nr_of_fish","avg_fish_kg","feeder_speed_kg_pr_min","feeding_percent"])!==-1?!0:!1}function h(n,t,i,r){var f="",o=new Date(t.start_date),c=o.getFullYear().toString()+"-"+("0"+(o.getMonth()+1).toString()).slice(-2)+"-"+("0"+o.getDate().toString()).slice(-2),u,h;for(t.start_date=c,t.biomass=t.nr_of_fish*t.avg_fish_kg,t.required_feed_pr_day=t.biomass*t.feeding_percent,t.time_feeder_active=t.required_feed_pr_day/t.feeder_speed_kg_pr_min,t.feeder_toggle_speed=t.time_feeder_active/t.time_feeding_intervals,f+=e(t.id),u=1,h=i.length;u<h;u++)f+=r(i[u],t,s(i[u].id));return"<tr>"+f+"<\/tr>"}function c(i){$("#toogle_edit_button"+i).click(function(){var f=$("table#feeding_table tr:nth-child("+i+") td.user_editable"),u=f.is(".editable"),r;this.innerHTML=u?i+": Edit":i+": Save";f.prop("contenteditable",!u).toggleClass("editable");u&&(r=n.records.getFromTable()[i-1],t.update([{id:i,nr_of_fish:r.nr_of_fish,avg_fish_kg:r.avg_fish_kg,feeder_speed_kg_pr_min:r.feeder_speed_kg_pr_min,feeding_percent:r.feeding_percent}]))})}function f(n){n||console.log("daily event has fired");var i=new Date,t=new Date;t.setSeconds(t.getSeconds()+10);window.setTimeout(f,t-i)}var t=new vis.DataSet,r=localStorage["feeder.table"],u,i,n;if(r!=null)u=JSON.parse(r),t.update(u);else for(i=1;i<=16;i++)t.add({id:i,state:"inactive",start_date:(new Date).setHours(0,0,0,0),nr_of_fish:"0",avg_fish_kg:"1",feeder_speed_kg_pr_min:"1",feeding_percent:"1"});t.on("*",function(){var i=t.get();localStorage["feeder.table"]=JSON.stringify(i);n.settings.dataset.originalRecords=i;n.process()});$("#feeding_table").dynatable({features:{paginate:!1,sorting:!1,recordCount:!1,search:!1},dataset:{records:t.get()},writers:{_rowWriter:h,_cellWriter:o}}).bind("dynatable:afterProcess",function(){for(var n=1;n<=16;n++)c(n)});n=$("#feeding_table").data("dynatable");n.sorts.clear();n.sorts.add("id",1);n.process();f(!0)});
/*
//# sourceMappingURL=IMRelay_feeding_table.min.js.map
*/