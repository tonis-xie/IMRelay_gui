$(document).ready(function(){"use strict";function b(n){var t=document.createElement("button");return t.className="btn btn-default vis_btn_disabled",t.type="button",t.id="vis_group_button_"+n,t.innerText=n+": Disabled",t}function k(t){var r=[{id:1,time_feeding_intervals:0},{id:2,time_feeding_intervals:0},{id:3,time_feeding_intervals:0},{id:4,time_feeding_intervals:0},{id:5,time_feeding_intervals:0},{id:6,time_feeding_intervals:0},{id:7,time_feeding_intervals:0},{id:8,time_feeding_intervals:0},{id:9,time_feeding_intervals:0},{id:10,time_feeding_intervals:0},{id:11,time_feeding_intervals:0},{id:12,time_feeding_intervals:0},{id:13,time_feeding_intervals:0},{id:14,time_feeding_intervals:0},{id:15,time_feeding_intervals:0},{id:16,time_feeding_intervals:0}];for(var i in t)t[i].start=new Date(t[i].start).setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t[i].end=new Date(t[i].end).setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),r[t[i].group-1].time_feeding_intervals+=(t[i].end-t[i].start)/1e3;g_LDA.feeding_table.update(r)}function l(t,i){d(t)?i(null):t.start<n?i(null):t.end>r?i(null):t.start>=t.end?i(null):(t.content=moment(t.start).format("HH:mm:ss")+" - "+moment(t.end).format("HH:mm:ss"),i(t))}function d(n){for(var t in g_LDA.items._data)if(g_LDA.items._data[t].group==n.group&&g_LDA.items._data[t].id!=n.id&&(n.start>=g_LDA.items._data[t].start&&n.start<=g_LDA.items._data[t].end||n.end>=g_LDA.items._data[t].start&&n.end<=g_LDA.items._data[t].end||n.start<=g_LDA.items._data[t].start&&n.end>=g_LDA.items._data[t].end))return 1;return 0}function y(n){$("#vis_group_button_"+n).removeClass("btn-default vis_btn_disabled").addClass("btn-success vis_btn_enabled");$("#vis_group_button_"+n).html(n+": Enabled")}function p(n){$("#vis_group_button_"+n).removeClass("btn-success vis_btn_enabled").addClass("btn-default vis_btn_disabled");$("#vis_group_button_"+n).html(n+": Disabled")}function g(n){$("#vis_group_button_"+n).click(function(){$("#vis_group_button_"+n).hasClass("vis_btn_disabled")?(g_LDA.groups.update({id:n,className:"vis_group_enabled"}),g_LDA.feeding_table.update({id:n,start_date:(new Date).setHours(0,0,0,0)}),y(n)):(g_LDA.groups.update({id:n,className:"vis_group_disabled"}),p(n))})}function nt(n,t,i,r){var f,u,e;for(t.relay_number=t.group,t.start_time=moment(t.start).format("HH:mm:ss"),t.end_time=moment(t.end).format("HH:mm:ss"),f="",u=0,e=i.length;u<e;u++)f+=r(i[u],t);return"<tr>"+f+"<\/tr>"}var t,n,r,f,e,c,a,v,u,o,s,i,h;for(g_LDA.groups=new vis.DataSet,t=1;t<=16;t++)g_LDA.groups.add({id:t,className:"vis_group_disabled",content:b(t),value:t});g_LDA.groups.on("*",function(){var n=g_LDA.groups.get({fields:["id","className"]}),t,i;localStorage["timeline.groups"]=JSON.stringify(n);t=g_LDA.feeding_table.get({fields:["id","state"]});for(i in n)t[i].state=n[i].className==="vis_group_disabled"?"inactive":"active";g_LDA.feeding_table.update(t)});n=new Date;n.setHours(0,0,0,0);r=new Date;r.setTime(n.getTime()+864e5);g_LDA.items=new vis.DataSet;f=localStorage["timeline.items"];f!=null&&(e=JSON.parse(f),k(e),g_LDA.items._data=e,localStorage["timeline.items"]=JSON.stringify(g_LDA.items._data));g_LDA.items.on("*",function(){var t,n;localStorage["timeline.items"]=JSON.stringify(g_LDA.items._data);t=[{id:1,time_feeding_intervals:0},{id:2,time_feeding_intervals:0},{id:3,time_feeding_intervals:0},{id:4,time_feeding_intervals:0},{id:5,time_feeding_intervals:0},{id:6,time_feeding_intervals:0},{id:7,time_feeding_intervals:0},{id:8,time_feeding_intervals:0},{id:9,time_feeding_intervals:0},{id:10,time_feeding_intervals:0},{id:11,time_feeding_intervals:0},{id:12,time_feeding_intervals:0},{id:13,time_feeding_intervals:0},{id:14,time_feeding_intervals:0},{id:15,time_feeding_intervals:0},{id:16,time_feeding_intervals:0}];for(n in g_LDA.items._data)t[g_LDA.items._data[n].group-1].time_feeding_intervals+=(g_LDA.items._data[n].end-g_LDA.items._data[n].start)/1e3;g_LDA.feeding_table.update(t);h.settings.dataset.originalRecords=g_LDA.items.get();h.process()});for(c={align:"center",autoResize:!0,editable:{add:!0,remove:!0,updateGroup:!1,updateTime:!0},end:r,groupOrder:function(n,t){return n.value-t.value},margin:{axis:0,item:6},max:r,min:n,onAdd:l,onMove:l,onRemove:function(n,t){confirm("Remove item from relay "+n.group+"? ("+n.content+")")?t(n):t(null)},orientation:"bottom",selectable:!0,showCurrentTime:!0,showCustomTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!1,start:n,type:"range",width:"auto",zoomMax:864e5,zoomMin:6e4},a=document.getElementById("vis_timeline"),v=new vis.Timeline(a,g_LDA.items,c),v.setGroups(g_LDA.groups),u=1;u<=16;u++)g(u);if(o=localStorage["timeline.groups"],o!=null)for(s=JSON.parse(o),g_LDA.groups.update(s),i=0;i<16;i++)s[i].className=="vis_group_disabled"?p(i+1):y(i+1);$("#event_table").dynatable({features:{paginate:!1},dataset:{records:g_LDA.items.get()},writers:{_rowWriter:nt},inputs:{queries:$("#event_search_relay_id")}});h=$("#event_table").data("dynatable")});
/*
//# sourceMappingURL=IMRelay_vis.min.js.map
*/