function generate_csv_from_table(){var n="data:text/csv; charset=utf-8,";n+=$("#log_table").table2CSV({delivery:"value"});$("a#download_log_button").attr("href",encodeURI(n));$("a#download_log_button").attr("download","IMRelay_log.csv")}function write_log_table(n){var r,e;$("#log_table > tbody").html("");$("#log_table > tfoot").html("");var f,o,i=g_LDA.log_table.get({filter:function(t){return t.relay_number==n}}),s=$("#log_table").find("tr:first th").length,u=[],t=[];for(r=0;r<s;r++)u[r]=$("#log_table").find("th").eq(r).attr("data-dynatable-column"),t[u[r]]="";t.relay_name="SUM";t.nr_of_dead_fish=0;t.required_feed_pr_day=0;t.feed_progress_today=0;t.time_feeder_active=0;t.time_feeding_intervals=0;e=0;for(row in i)f+=log_table_row_writer(i[row],u),t.nr_of_dead_fish+=+i[row].nr_of_dead_fish,t.required_feed_pr_day+=+i[row].required_feed_pr_day,t.feed_progress_today+=+i[row].feed_progress_today,t.time_feeder_active+=+i[row].time_feeder_active,t.time_feeding_intervals+=+i[row].time_feeding_intervals,e++;t.date=e+" days";t.required_feed_pr_day=t.required_feed_pr_day.toFixed(3);t.feed_progress_today=t.feed_progress_today.toFixed(3);t.time_feeder_active=t.time_feeder_active.toFixed(1);t.time_feeding_intervals=t.time_feeding_intervals.toFixed(1);o+=log_table_row_writer(t,u);$("#log_table > tbody").append(f);$("#log_table > tfoot").append(o);console.log("html_table",f);generate_csv_from_table()}function log_table_cell_writer(n){return"<td>"+n+"<\/td>"}function log_table_row_writer(n,t){for(var r="",i=0;i<t.length;i++)r+=log_table_cell_writer(n[t[i]]);return"<tr>"+r+"<\/tr>"}$(window).load(function(){"use strict";var n,t;g_LDA.log_table=new vis.DataSet;n=localStorage["feeder.log"];n!=null&&(t=JSON.parse(n),g_LDA.log_table.update(t));g_LDA.log_table.on("*",function(){var t=g_LDA.log_table.get(),n;localStorage["feeder.log"]=JSON.stringify(t);n=$("input[name=event_relay]:radio").val();write_log_table(n)})});
/*
//# sourceMappingURL=IMRelay_log.min.js.map
*/