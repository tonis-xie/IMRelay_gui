/**
 * vis.js
 * https://github.com/almende/vis
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 3.2.0
 * @date    2014-08-14
 *
 * @license
 * Copyright (C) 2011-2014 Almende B.V, http://almende.com
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */
(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define(t):typeof exports=="object"?exports.vis=t():n.vis=t()})(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n,t,i){t.util=i(1);t.DOMutil=i(2);t.DataSet=i(3);t.DataView=i(4);t.Graph3d=i(5);t.graph3d={Camera:i(6),Filter:i(7),Point2d:i(8),Point3d:i(9),Slider:i(10),StepNumber:i(11)};t.Timeline=i(12);t.Graph2d=i(13);t.timeline={DataStep:i(14),Range:i(15),stack:i(16),TimeStep:i(17),components:{items:{Item:i(29),ItemBox:i(28),ItemPoint:i(30),ItemRange:i(31)},Component:i(18),CurrentTime:i(19),CustomTime:i(20),DataAxis:i(21),GraphGroup:i(22),Group:i(23),ItemSet:i(24),Legend:i(25),LineGraph:i(26),TimeAxis:i(27)}};t.Network=i(32);t.network={Edge:i(33),Groups:i(34),Images:i(35),Node:i(36),Popup:i(37),dotparser:i(38),gephiParser:i(39)};t.Graph=function(){throw new Error("Graph is renamed to Network. Please create a graph as new vis.Network(...)");};t.moment=i(40);t.hammer=i(41)},function(n,t,i){var r=i(40),u;t.isNumber=function(n){return n instanceof Number||typeof n=="number"};t.isString=function(n){return n instanceof String||typeof n=="string"};t.isDate=function(n){if(n instanceof Date)return!0;if(t.isString(n)){var i=u.exec(n);if(i||!isNaN(Date.parse(n)))return!0}return!1};t.isDataTable=function(n){return typeof google!="undefined"&&google.visualization&&google.visualization.DataTable&&n instanceof google.visualization.DataTable};t.randomUUID=function(){var n=function(){return Math.floor(Math.random()*65536).toString(16)};return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()};t.extend=function(n){for(var i,r,t=1,u=arguments.length;t<u;t++){i=arguments[t];for(r in i)i.hasOwnProperty(r)&&(n[r]=i[r])}return n};t.selectiveExtend=function(n,t){var i,f,r,u;if(!Array.isArray(n))throw new Error("Array with property names expected as first argument");for(i=2;i<arguments.length;i++)for(f=arguments[i],r=0;r<n.length;r++)u=n[r],f.hasOwnProperty(u)&&(t[u]=f[u]);return t};t.selectiveDeepExtend=function(n,i,r){var f,o,e,u;if(Array.isArray(r))throw new TypeError("Arrays are not supported by deepExtend");for(f=2;f<arguments.length;f++)for(o=arguments[f],e=0;e<n.length;e++)if(u=n[e],o.hasOwnProperty(u))if(r[u]&&r[u].constructor===Object)i[u]===undefined&&(i[u]={}),i[u].constructor===Object?t.deepExtend(i[u],r[u]):i[u]=r[u];else if(Array.isArray(r[u]))throw new TypeError("Arrays are not supported by deepExtend");else i[u]=r[u];return i};t.selectiveNotDeepExtend=function(n,i,r){if(Array.isArray(r))throw new TypeError("Arrays are not supported by deepExtend");for(var u in r)if(r.hasOwnProperty(u)&&n.indexOf(u)==-1)if(r[u]&&r[u].constructor===Object)i[u]===undefined&&(i[u]={}),i[u].constructor===Object?t.deepExtend(i[u],r[u]):i[u]=r[u];else if(Array.isArray(r[u]))throw new TypeError("Arrays are not supported by deepExtend");else i[u]=r[u];return i};t.deepExtend=function(n,i){if(Array.isArray(i))throw new TypeError("Arrays are not supported by deepExtend");for(var r in i)if(i.hasOwnProperty(r))if(i[r]&&i[r].constructor===Object)n[r]===undefined&&(n[r]={}),n[r].constructor===Object?t.deepExtend(n[r],i[r]):n[r]=i[r];else if(Array.isArray(i[r]))throw new TypeError("Arrays are not supported by deepExtend");else n[r]=i[r];return n};t.equalArray=function(n,t){if(n.length!=t.length)return!1;for(var i=0,r=n.length;i<r;i++)if(n[i]!=t[i])return!1;return!0};t.convert=function(n,i){var f,e;if(n===undefined)return undefined;if(n===null)return null;if(!i)return n;if(!(typeof i=="string")&&!(i instanceof String))throw new Error("Type must be a string");switch(i){case"boolean":case"Boolean":return Boolean(n);case"number":case"Number":return Number(n.valueOf());case"string":case"String":return String(n);case"Date":if(t.isNumber(n))return new Date(n);if(n instanceof Date||r.isMoment(n))return new Date(n.valueOf());if(t.isString(n))return f=u.exec(n),f?new Date(Number(f[1])):r(n).toDate();throw new Error("Cannot convert object of type "+t.getType(n)+" to type Date");case"Moment":if(t.isNumber(n))return r(n);if(n instanceof Date)return r(n.valueOf());if(r.isMoment(n))return r(n);if(t.isString(n))return f=u.exec(n),f?r(Number(f[1])):r(n);throw new Error("Cannot convert object of type "+t.getType(n)+" to type Date");case"ISODate":if(t.isNumber(n))return new Date(n);if(n instanceof Date)return n.toISOString();if(r.isMoment(n))return n.toDate().toISOString();if(t.isString(n))return f=u.exec(n),f?new Date(Number(f[1])).toISOString():new Date(n).toISOString();throw new Error("Cannot convert object of type "+t.getType(n)+" to type ISODate");case"ASPDate":if(t.isNumber(n))return"/Date("+n+")/";if(n instanceof Date)return"/Date("+n.valueOf()+")/";if(t.isString(n))return f=u.exec(n),e=f?new Date(Number(f[1])).valueOf():new Date(n).valueOf(),"/Date("+e+")/";throw new Error("Cannot convert object of type "+t.getType(n)+" to type ASPDate");default:throw new Error('Unknown type "'+i+'"');}};u=/^\/?Date\((\-?\d+)/i;t.getType=function(n){var t=typeof n;return t=="object"?n==null?"null":n instanceof Boolean?"Boolean":n instanceof Number?"Number":n instanceof String?"String":n instanceof Array?"Array":n instanceof Date?"Date":"Object":t=="number"?"Number":t=="boolean"?"Boolean":t=="string"?"String":t};t.getAbsoluteLeft=function(n){return n.getBoundingClientRect().left+window.pageXOffset};t.getAbsoluteTop=function(n){return n.getBoundingClientRect().top+window.pageYOffset};t.addClassName=function(n,t){var i=n.className.split(" ");i.indexOf(t)==-1&&(i.push(t),n.className=i.join(" "))};t.removeClassName=function(n,t){var i=n.className.split(" "),r=i.indexOf(t);r!=-1&&(i.splice(r,1),n.className=i.join(" "))};t.forEach=function(n,t){var i,r;if(n instanceof Array)for(i=0,r=n.length;i<r;i++)t(n[i],i,n);else for(i in n)n.hasOwnProperty(i)&&t(n[i],i,n)};t.toArray=function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(n[i]);return t};t.updateProperty=function(n,t,i){return n[t]!==i?(n[t]=i,!0):!1};t.addEventListener=function(n,t,i,r){n.addEventListener?(r===undefined&&(r=!1),t==="mousewheel"&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),n.addEventListener(t,i,r)):n.attachEvent("on"+t,i)};t.removeEventListener=function(n,t,i,r){n.removeEventListener?(r===undefined&&(r=!1),t==="mousewheel"&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),n.removeEventListener(t,i,r)):n.detachEvent("on"+t,i)};t.preventDefault=function(n){n||(n=window.event);n.preventDefault?n.preventDefault():n.returnValue=!1};t.getTarget=function(n){n||(n=window.event);var t;return n.target?t=n.target:n.srcElement&&(t=n.srcElement),t.nodeType!=undefined&&t.nodeType==3&&(t=t.parentNode),t};t.option={};t.option.asBoolean=function(n,t){return(typeof n=="function"&&(n=n()),n!=null)?n!=!1:t||null};t.option.asNumber=function(n,t){return(typeof n=="function"&&(n=n()),n!=null)?Number(n)||t||null:t||null};t.option.asString=function(n,t){return(typeof n=="function"&&(n=n()),n!=null)?String(n):t||null};t.option.asSize=function(n,i){return typeof n=="function"&&(n=n()),t.isString(n)?n:t.isNumber(n)?n+"px":i||null};t.option.asElement=function(n,t){return typeof n=="function"&&(n=n()),n||t||null};t.GiveDec=function(Hex){return Hex=="A"?10:Hex=="B"?11:Hex=="C"?12:Hex=="D"?13:Hex=="E"?14:Hex=="F"?15:eval(Hex)};t.GiveHex=function(n){return n==10?"A":n==11?"B":n==12?"C":n==13?"D":n==14?"E":n==15?"F":""+n};t.parseColor=function(n){var i,u;if(t.isString(n))if(t.isValidRGB(n)&&(u=n.substr(4).substr(0,n.length-5).split(","),n=t.RGBToHex(u[0],u[1],u[2])),t.isValidHex(n)){var r=t.hexToHSV(n),f={h:r.h,s:r.s*.45,v:Math.min(1,r.v*1.05)},e={h:r.h,s:Math.min(1,r.v*1.25),v:r.v*.6},o=t.HSVToHex(e.h,e.h,e.v),s=t.HSVToHex(f.h,f.s,f.v);i={background:n,border:o,highlight:{background:s,border:o},hover:{background:s,border:o}}}else i={background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}};else i={},i.background=n.background||"white",i.border=n.border||i.background,t.isString(n.highlight)?i.highlight={border:n.highlight,background:n.highlight}:(i.highlight={},i.highlight.background=n.highlight&&n.highlight.background||i.background,i.highlight.border=n.highlight&&n.highlight.border||i.border),t.isString(n.hover)?i.hover={border:n.hover,background:n.hover}:(i.hover={},i.hover.background=n.hover&&n.hover.background||i.background,i.hover.border=n.hover&&n.hover.border||i.border);return i};t.hexToRGB=function(n){n=n.replace("#","").toUpperCase();var r=t.GiveDec(n.substring(0,1)),i=t.GiveDec(n.substring(1,2)),u=t.GiveDec(n.substring(2,3)),f=t.GiveDec(n.substring(3,4)),e=t.GiveDec(n.substring(4,5)),o=t.GiveDec(n.substring(5,6)),s=r*16+i,h=u*16+f,i=e*16+o;return{r:s,g:h,b:i}};t.RGBToHex=function(n,i,r){var u=t.GiveHex(Math.floor(n/16)),f=t.GiveHex(n%16),e=t.GiveHex(Math.floor(i/16)),o=t.GiveHex(i%16),s=t.GiveHex(Math.floor(r/16)),h=t.GiveHex(r%16),c=u+f+e+o+s+h;return"#"+c};t.RGBToHSV=function(n,t,i){var r,u;if(n=n/255,t=t/255,i=i/255,r=Math.min(n,Math.min(t,i)),u=Math.max(n,Math.max(t,i)),r==u)return{h:0,s:0,v:r};var f=n==r?t-i:i==r?n-t:i-n,e=n==r?3:i==r?1:5,o=(e-f/(u-r))/6,s=(u-r)/u,h=u;return{h:o,s:s,v:h}};t.HSVToRGB=function(n,t,i){var r,u,f,h=Math.floor(n*6),c=n*6-h,e=i*(1-t),o=i*(1-c*t),s=i*(1-(1-c)*t);switch(h%6){case 0:r=i;u=s;f=e;break;case 1:r=o;u=i;f=e;break;case 2:r=e;u=i;f=s;break;case 3:r=e;u=o;f=i;break;case 4:r=s;u=e;f=i;break;case 5:r=i;u=e;f=o}return{r:Math.floor(r*255),g:Math.floor(u*255),b:Math.floor(f*255)}};t.HSVToHex=function(n,i,r){var u=t.HSVToRGB(n,i,r);return t.RGBToHex(u.r,u.g,u.b)};t.hexToHSV=function(n){var i=t.hexToRGB(n);return t.RGBToHSV(i.r,i.g,i.b)};t.isValidHex=function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)};t.isValidRGB=function(n){n=n.replace(" ","");return/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(n)};t.selectiveBridgeObject=function(n,i){var u,r;if(typeof i=="object"){for(u=Object.create(i),r=0;r<n.length;r++)i.hasOwnProperty(n[r])&&typeof i[n[r]]=="object"&&(u[n[r]]=t.bridgeObject(i[n[r]]));return u}return null};t.bridgeObject=function(n){var r,i;if(typeof n=="object"){r=Object.create(n);for(i in n)n.hasOwnProperty(i)&&typeof n[i]=="object"&&(r[i]=t.bridgeObject(n[i]));return r}return null};t.mergeOptions=function(n,t,i){if(t[i]!==undefined)if(typeof t[i]=="boolean")n[i].enabled=t[i];else{n[i].enabled=!0;for(prop in t[i])t[i].hasOwnProperty(prop)&&(n[i][prop]=t[i][prop])}};t.mergeOptions=function(n,t,i){if(t[i]!==undefined)if(typeof t[i]=="boolean")n[i].enabled=t[i];else{n[i].enabled=!0;for(prop in t[i])t[i].hasOwnProperty(prop)&&(n[i][prop]=t[i][prop])}};t.binarySearch=function(n,t,i,r){var o=n,a=1e4,s=0,h=!1,e=0,u=o.length,c=e,l=u,f=Math.floor(.5*(u+e)),v;if(u==0)f=-1;else if(u==1)f=o[f].isVisible(t)?0:-1;else{for(u-=1;h==!1&&s<a;)v=r===undefined?o[f][i]:o[f][i][r],o[f].isVisible(t)?h=!0:(v<t.start?c=Math.floor(.5*(u+e)):l=Math.floor(.5*(u+e)),e==c&&u==l?(f=-1,h=!0):(u=l,e=c,f=Math.floor(.5*(u+e)))),s++;s>=a&&console.log("BinarySearch too many iterations. Aborting.")}return f};t.binarySearchGeneric=function(n,t,i,r){var p=1e4,h=0,s=n,c=!1,o=0,f=s.length,l=o,a=f,u=Math.floor(.5*(f+o)),w,v,e,y;if(f==0)u=-1;else if(f==1)e=s[u][i],u=e==t?0:-1;else{for(f-=1;c==!1&&h<p;)v=s[Math.max(0,u-1)][i],e=s[u][i],y=s[Math.min(s.length-1,u+1)][i],e==t||v<t&&e>t||e<t&&y>t?(c=!0,e!=t&&(r=="before"?v<t&&e>t&&(u=Math.max(0,u-1)):e<t&&y>t&&(u=Math.min(s.length-1,u+1)))):(e<t?l=Math.floor(.5*(f+o)):a=Math.floor(.5*(f+o)),w=Math.floor(.5*(f+o)),o==l&&f==a?(u=-1,c=!0):(f=a,o=l,u=Math.floor(.5*(f+o)))),h++;h>=p&&console.log("BinarySearch too many iterations. Aborting.")}return u}},function(n,t){t.prepareElements=function(n){for(var t in n)n.hasOwnProperty(t)&&(n[t].redundant=n[t].used,n[t].used=[])};t.cleanupElements=function(n){var t,i;for(t in n)if(n.hasOwnProperty(t)&&n[t].redundant){for(i=0;i<n[t].redundant.length;i++)n[t].redundant[i].parentNode.removeChild(n[t].redundant[i]);n[t].redundant=[]}};t.getSVGElement=function(n,t,i){var r;return t.hasOwnProperty(n)?t[n].redundant.length>0?(r=t[n].redundant[0],t[n].redundant.shift()):(r=document.createElementNS("http://www.w3.org/2000/svg",n),i.appendChild(r)):(r=document.createElementNS("http://www.w3.org/2000/svg",n),t[n]={used:[],redundant:[]},i.appendChild(r)),t[n].used.push(r),r};t.getDOMElement=function(n,t,i){var r;return t.hasOwnProperty(n)?t[n].redundant.length>0?(r=t[n].redundant[0],t[n].redundant.shift()):(r=document.createElement(n),i.appendChild(r)):(r=document.createElement(n),t[n]={used:[],redundant:[]},i.appendChild(r)),t[n].used.push(r),r};t.drawPoint=function(n,i,r,u,f){var e;return r.options.drawPoints.style=="circle"?(e=t.getSVGElement("circle",u,f),e.setAttributeNS(null,"cx",n),e.setAttributeNS(null,"cy",i),e.setAttributeNS(null,"r",.5*r.options.drawPoints.size),e.setAttributeNS(null,"class",r.className+" point")):(e=t.getSVGElement("rect",u,f),e.setAttributeNS(null,"x",n-.5*r.options.drawPoints.size),e.setAttributeNS(null,"y",i-.5*r.options.drawPoints.size),e.setAttributeNS(null,"width",r.options.drawPoints.size),e.setAttributeNS(null,"height",r.options.drawPoints.size),e.setAttributeNS(null,"class",r.className+" point")),e};t.drawBar=function(n,i,r,u,f,e,o){var s=t.getSVGElement("rect",e,o);s.setAttributeNS(null,"x",n-.5*r);s.setAttributeNS(null,"y",i);s.setAttributeNS(null,"width",r);s.setAttributeNS(null,"height",u);s.setAttributeNS(null,"class",f)}},function(n,t,i){function r(n,t){var r,i;if(!n||Array.isArray(n)||u.isDataTable(n)||(t=n,n=null),this._options=t||{},this._data={},this._fieldId=this._options.fieldId||"id",this._type={},this._options.type)for(r in this._options.type)this._options.type.hasOwnProperty(r)&&(i=this._options.type[r],this._type[r]=i=="Date"||i=="ISODate"||i=="ASPDate"?"Date":i);if(this._options.convert)throw new Error('Option "convert" is deprecated. Use "type" instead.');this._subscribers={};n&&this.add(n)}var u=i(1);r.prototype.on=function(n,t){var i=this._subscribers[n];i||(i=[],this._subscribers[n]=i);i.push({callback:t})};r.prototype.subscribe=r.prototype.on;r.prototype.off=function(n,t){var i=this._subscribers[n];i&&(this._subscribers[n]=i.filter(function(n){return n.callback!=t}))};r.prototype.unsubscribe=r.prototype.off;r.prototype._trigger=function(n,t,i){var r,u,f;if(n=="*")throw new Error("Cannot trigger event *");for(r=[],(n in this._subscribers)&&(r=r.concat(this._subscribers[n])),("*"in this._subscribers)&&(r=r.concat(this._subscribers["*"])),u=0;u<r.length;u++)f=r[u],f.callback&&f.callback(n,t,i||null)};r.prototype.add=function(n,t){var i=[],r,s=this,e,l,h,o,a,c,f,v,y;if(Array.isArray(n))for(e=0,l=n.length;e<l;e++)r=s._addItem(n[e]),i.push(r);else if(u.isDataTable(n))for(h=this._getColumnNames(n),o=0,a=n.getNumberOfRows();o<a;o++){for(c={},f=0,v=h.length;f<v;f++)y=h[f],c[y]=n.getValue(o,f);r=s._addItem(c);i.push(r)}else if(n instanceof Object)r=s._addItem(n),i.push(r);else throw new Error("Unknown dataType");return i.length&&this._trigger("add",{items:i},t),i};r.prototype.update=function(n,t){var r=[],f=[],e=this,w=e._fieldId,h=function(n){var t=n[w];e._data[t]?(t=e._updateItem(n),f.push(t)):(t=e._addItem(n),r.push(t))},o,a,c,s,v,l,i,y,p;if(Array.isArray(n))for(o=0,a=n.length;o<a;o++)h(n[o]);else if(u.isDataTable(n))for(c=this._getColumnNames(n),s=0,v=n.getNumberOfRows();s<v;s++){for(l={},i=0,y=c.length;i<y;i++)p=c[i],l[p]=n.getValue(s,i);h(l)}else if(n instanceof Object)h(n);else throw new Error("Unknown dataType");return r.length&&this._trigger("add",{items:r},t),f.length&&this._trigger("update",{items:f},t),r.concat(f)};r.prototype.get=function(){var c=this,e,l,t,i,a=u.getType(arguments[0]),o,k,p,w,b;if(a=="String"||a=="Number"?(e=arguments[0],t=arguments[1],i=arguments[2]):a=="Array"?(l=arguments[0],t=arguments[1],i=arguments[2]):(t=arguments[0],i=arguments[1]),t&&t.returnType){if(k=["DataTable","Array","Object"],o=k.indexOf(t.returnType)==-1?"Array":t.returnType,i&&o!=u.getType(i))throw new Error('Type of parameter "data" ('+u.getType(i)+") does not correspond with specified options.type ("+t.type+")");if(o=="DataTable"&&!u.isDataTable(i))throw new Error('Parameter "data" must be a DataTable when options.type is "DataTable"');}else o=i?u.getType(i)=="DataTable"?"DataTable":"Array":"Array";var v=t&&t.type||this._options.type,s=t&&t.filter,r=[],f,y,n,h;if(e!=undefined)f=c._getItem(e,v),s&&!s(f)&&(f=null);else if(l!=undefined)for(n=0,h=l.length;n<h;n++)f=c._getItem(l[n],v),(!s||s(f))&&r.push(f);else for(y in this._data)this._data.hasOwnProperty(y)&&(f=c._getItem(y,v),(!s||s(f))&&r.push(f));if(t&&t.order&&e==undefined&&this._sort(r,t.order),t&&t.fields)if(p=t.fields,e!=undefined)f=this._filterFields(f,p);else for(n=0,h=r.length;n<h;n++)r[n]=this._filterFields(r[n],p);if(o=="DataTable"){if(w=this._getColumnNames(i),e!=undefined)c._appendRow(i,w,f);else for(n=0;n<r.length;n++)c._appendRow(i,w,r[n]);return i}if(o=="Object"){for(b={},n=0;n<r.length;n++)b[r[n].id]=r[n];return b}if(e!=undefined)return f;if(i){for(n=0,h=r.length;n<h;n++)i.push(r[n]);return i}return r};r.prototype.getIds=function(n){var i=this._data,h=n&&n.filter,o=n&&n.order,c=n&&n.type||this._options.type,r,s,t,f,u,e=[];if(h)if(o){u=[];for(t in i)i.hasOwnProperty(t)&&(f=this._getItem(t,c),h(f)&&u.push(f));for(this._sort(u,o),r=0,s=u.length;r<s;r++)e[r]=u[r][this._fieldId]}else for(t in i)i.hasOwnProperty(t)&&(f=this._getItem(t,c),h(f)&&e.push(f[this._fieldId]));else if(o){u=[];for(t in i)i.hasOwnProperty(t)&&u.push(i[t]);for(this._sort(u,o),r=0,s=u.length;r<s;r++)e[r]=u[r][this._fieldId]}else for(t in i)i.hasOwnProperty(t)&&(f=i[t],e.push(f[this._fieldId]));return e};r.prototype.getDataSet=function(){return this};r.prototype.forEach=function(n,t){var e=t&&t.filter,h=t&&t.type||this._options.type,o=this._data,i,r,f,u,s;if(t&&t.order)for(f=this.get(t),u=0,s=f.length;u<s;u++)i=f[u],r=i[this._fieldId],n(i,r);else for(r in o)o.hasOwnProperty(r)&&(i=this._getItem(r,h),(!e||e(i))&&n(i,r))};r.prototype.map=function(n,t){var f=t&&t.filter,o=t&&t.type||this._options.type,i=[],e=this._data,r;for(var u in e)e.hasOwnProperty(u)&&(r=this._getItem(u,o),(!f||f(r))&&i.push(n(r,u)));return t&&t.order&&this._sort(i,t.order),i};r.prototype._filterFields=function(n,t){var r={};for(var i in n)n.hasOwnProperty(i)&&t.indexOf(i)!=-1&&(r[i]=n[i]);return r};r.prototype._sort=function(n,t){if(u.isString(t)){var i=t;n.sort(function(n,t){var r=n[i],u=t[i];return r>u?1:r<u?-1:0})}else if(typeof t=="function")n.sort(t);else throw new TypeError("Order must be a function or a string");};r.prototype.remove=function(n,t){var r=[],u,f,i;if(Array.isArray(n))for(u=0,f=n.length;u<f;u++)i=this._remove(n[u]),i!=null&&r.push(i);else i=this._remove(n),i!=null&&r.push(i);return r.length&&this._trigger("remove",{items:r},t),r};r.prototype._remove=function(n){if(u.isNumber(n)||u.isString(n)){if(this._data[n])return delete this._data[n],n}else if(n instanceof Object){var t=n[this._fieldId];if(t&&this._data[t])return delete this._data[t],t}return null};r.prototype.clear=function(n){var t=Object.keys(this._data);return this._data={},this._trigger("remove",{items:t},n),t};r.prototype.max=function(n){var i=this._data,r=null,e=null,u,f,t;for(u in i)i.hasOwnProperty(u)&&(f=i[u],t=f[n],t!=null&&(!r||t>e)&&(r=f,e=t));return r};r.prototype.min=function(n){var i=this._data,r=null,e=null,u,f,t;for(u in i)i.hasOwnProperty(u)&&(f=i[u],t=f[n],t!=null&&(!r||t<e)&&(r=f,e=t));return r};r.prototype.distinct=function(n){var r=this._data,i=[],o=this._options.type&&this._options.type[n]||null,f=0,t;for(var s in r)if(r.hasOwnProperty(s)){var c=r[s],e=c[n],h=!1;for(t=0;t<f;t++)if(i[t]==e){h=!0;break}h||e===undefined||(i[f]=e,f++)}if(o)for(t=0;t<i.length;t++)i[t]=u.convert(i[t],o);return i};r.prototype._addItem=function(n){var t=n[this._fieldId],r,i,f;if(t!=undefined){if(this._data[t])throw new Error("Cannot add item: item with id "+t+" already exists");}else t=u.randomUUID(),n[this._fieldId]=t;r={};for(i in n)n.hasOwnProperty(i)&&(f=this._type[i],r[i]=u.convert(n[i],f));return this._data[t]=r,t};r.prototype._getItem=function(n,t){var i,f,r=this._data[n],e;if(!r)return null;if(e={},t)for(i in r)r.hasOwnProperty(i)&&(f=r[i],e[i]=u.convert(f,t[i]));else for(i in r)r.hasOwnProperty(i)&&(f=r[i],e[i]=f);return e};r.prototype._updateItem=function(n){var i=n[this._fieldId],r,t,f;if(i==undefined)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(n)+")");if(r=this._data[i],!r)throw new Error("Cannot update item: no item with id "+i+" found");for(t in n)n.hasOwnProperty(t)&&(f=this._type[t],r[t]=u.convert(n[t],f));return i};r.prototype._getColumnNames=function(n){for(var i=[],t=0,r=n.getNumberOfColumns();t<r;t++)i[t]=n.getColumnId(t)||n.getColumnLabel(t);return i};r.prototype._appendRow=function(n,t,i){for(var u,f=n.addRow(),r=0,e=t.length;r<e;r++)u=t[r],n.setValue(f,r,i[u])};n.exports=r},function(n,t,i){function r(n,t){this._data=null;this._ids={};this._options=t||{};this._fieldId="id";this._subscribers={};var i=this;this.listener=function(){i._onEvent.apply(i,arguments)};this.setData(n)}var f=i(1),u=i(3);r.prototype.setData=function(n){var t,r,u,i;if(this._data){this._data.unsubscribe&&this._data.unsubscribe("*",this.listener);t=[];for(i in this._ids)this._ids.hasOwnProperty(i)&&t.push(i);this._ids={};this._trigger("remove",{items:t})}if(this._data=n,this._data){for(this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",t=this._data.getIds({filter:this._options&&this._options.filter}),r=0,u=t.length;r<u;r++)i=t[r],this._ids[i]=!0;if(this._trigger("add",{items:t}),this._data.on)this._data.on("*",this.listener)}};r.prototype.get=function(){var o=this,i,n,r,u=f.getType(arguments[0]),e,t;return u=="String"||u=="Number"||u=="Array"?(i=arguments[0],n=arguments[1],r=arguments[2]):(n=arguments[0],r=arguments[1]),e=f.extend({},this._options,n),this._options.filter&&n&&n.filter&&(e.filter=function(t){return o._options.filter(t)&&n.filter(t)}),t=[],i!=undefined&&t.push(i),t.push(e),t.push(r),this._data&&this._data.get.apply(this._data,t)};r.prototype.getIds=function(n){var i,t,r;return this._data?(t=this._options.filter,r=n&&n.filter?t?function(i){return t(i)&&n.filter(i)}:n.filter:t,i=this._data.getIds({filter:r,order:n&&n.order})):i=[],i};r.prototype.getDataSet=function(){for(var n=this;n instanceof r;)n=n._data;return n||null};r.prototype._onEvent=function(n,t,i){var u,e,r,o,f=t&&t.items,l=this._data,s=[],c=[],h=[];if(f&&l){switch(n){case"add":for(u=0,e=f.length;u<e;u++)r=f[u],o=this.get(r),o&&(this._ids[r]=!0,s.push(r));break;case"update":for(u=0,e=f.length;u<e;u++)r=f[u],o=this.get(r),o?this._ids[r]?c.push(r):(this._ids[r]=!0,s.push(r)):this._ids[r]&&(delete this._ids[r],h.push(r));break;case"remove":for(u=0,e=f.length;u<e;u++)r=f[u],this._ids[r]&&(delete this._ids[r],h.push(r))}s.length&&this._trigger("add",{items:s},i);c.length&&this._trigger("update",{items:c},i);h.length&&this._trigger("remove",{items:h},i)}};r.prototype.on=u.prototype.on;r.prototype.off=u.prototype.off;r.prototype._trigger=u.prototype._trigger;r.prototype.subscribe=r.prototype.on;r.prototype.unsubscribe=r.prototype.off;n.exports=r},function(n,t,i){function r(n,t,i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=n;this.width="400px";this.height="400px";this.margin=10;this.defaultXCenter="55%";this.defaultYCenter="50%";this.xLabel="x";this.yLabel="y";this.zLabel="z";this.filterLabel="time";this.legendLabel="value";this.style=r.STYLE.DOT;this.showPerspective=!0;this.showGrid=!0;this.keepAspectRatio=!0;this.showShadow=!1;this.showGrayBottom=!1;this.showTooltip=!1;this.verticalRatio=.5;this.animationInterval=1e3;this.animationPreload=!1;this.camera=new l;this.eye=new u(0,0,-1);this.dataTable=null;this.dataPoints=null;this.colX=undefined;this.colY=undefined;this.colZ=undefined;this.colValue=undefined;this.colFilter=undefined;this.xMin=0;this.xStep=undefined;this.xMax=1;this.yMin=0;this.yStep=undefined;this.yMax=1;this.zMin=0;this.zStep=undefined;this.zMax=1;this.valueMin=0;this.valueMax=1;this.xBarWidth=1;this.yBarWidth=1;this.colorAxis="#4D4D4D";this.colorGrid="#D3D3D3";this.colorDot="#7DC1FF";this.colorDotBorder="#3267D2";this.create();this.setOptions(i);t&&this.setData(t)}var h=i(46),o=i(3),c=i(4),f=i(1),u=i(9),s=i(8),l=i(6),a=i(7),v=i(10),e=i(11);h(r.prototype);r.prototype._setScale=function(){this.scale=new u(1/(this.xMax-this.xMin),1/(this.yMax-this.yMin),1/(this.zMax-this.zMin));this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y);this.scale.z*=this.verticalRatio;this.scale.value=1/(this.valueMax-this.valueMin);var n=(this.xMax+this.xMin)/2*this.scale.x,t=(this.yMax+this.yMin)/2*this.scale.y,i=(this.zMax+this.zMin)/2*this.scale.z;this.camera.setArmLocation(n,t,i)};r.prototype._convert3Dto2D=function(n){var t=this._convertPointToTranslation(n);return this._convertTranslationToScreen(t)};r.prototype._convertPointToTranslation=function(n){var t=n.x*this.scale.x,i=n.y*this.scale.y,s=n.z*this.scale.z,r=this.camera.getCameraLocation().x,f=this.camera.getCameraLocation().y,h=this.camera.getCameraLocation().z,a=Math.sin(this.camera.getCameraRotation().x),v=Math.cos(this.camera.getCameraRotation().x),c=Math.sin(this.camera.getCameraRotation().y),l=Math.cos(this.camera.getCameraRotation().y),e=Math.sin(this.camera.getCameraRotation().z),o=Math.cos(this.camera.getCameraRotation().z),y=l*(e*(i-f)+o*(t-r))-c*(s-h),p=a*(l*(s-h)+c*(e*(i-f)+o*(t-r)))+v*(o*(i-f)-e*(t-r)),w=v*(l*(s-h)+c*(e*(i-f)+o*(t-r)))-a*(o*(i-f)-e*(t-r));return new u(y,p,w)};r.prototype._convertTranslationToScreen=function(n){var o=this.eye.x,h=this.eye.y,t=this.eye.z,u=n.x,f=n.y,e=n.z,i,r;return this.showPerspective?(i=(u-o)*(t/e),r=(f-h)*(t/e)):(i=u*-(t/this.camera.getArmLength()),r=f*-(t/this.camera.getArmLength())),new s(this.xcenter+i*this.frame.canvas.clientWidth,this.ycenter-r*this.frame.canvas.clientWidth)};r.prototype._setBackgroundColor=function(n){var t="white",i="gray",r=1;if(typeof n=="string")t=n,i="none",r=0;else if(typeof n=="object")n.fill!==undefined&&(t=n.fill),n.stroke!==undefined&&(i=n.stroke),n.strokeWidth!==undefined&&(r=n.strokeWidth);else if(n!==undefined)throw"Unsupported type of backgroundColor";this.frame.style.backgroundColor=t;this.frame.style.borderColor=i;this.frame.style.borderWidth=r+"px";this.frame.style.borderStyle="solid"};r.STYLE={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9};r.prototype._getStyleNumber=function(n){switch(n){case"dot":return r.STYLE.DOT;case"dot-line":return r.STYLE.DOTLINE;case"dot-color":return r.STYLE.DOTCOLOR;case"dot-size":return r.STYLE.DOTSIZE;case"line":return r.STYLE.LINE;case"grid":return r.STYLE.GRID;case"surface":return r.STYLE.SURFACE;case"bar":return r.STYLE.BAR;case"bar-color":return r.STYLE.BARCOLOR;case"bar-size":return r.STYLE.BARSIZE}return-1};r.prototype._determineColumnIndexes=function(n){if(this.style===r.STYLE.DOT||this.style===r.STYLE.DOTLINE||this.style===r.STYLE.LINE||this.style===r.STYLE.GRID||this.style===r.STYLE.SURFACE||this.style===r.STYLE.BAR)this.colX=0,this.colY=1,this.colZ=2,this.colValue=undefined,n.getNumberOfColumns()>3&&(this.colFilter=3);else if(this.style===r.STYLE.DOTCOLOR||this.style===r.STYLE.DOTSIZE||this.style===r.STYLE.BARCOLOR||this.style===r.STYLE.BARSIZE)this.colX=0,this.colY=1,this.colZ=2,this.colValue=3,n.getNumberOfColumns()>4&&(this.colFilter=4);else throw'Unknown style "'+this.style+'"';};r.prototype.getNumberOfRows=function(n){return n.length};r.prototype.getNumberOfColumns=function(n){var t=0;for(var i in n[0])n[0].hasOwnProperty(i)&&t++;return t};r.prototype.getDistinctValues=function(n,t){for(var r=[],i=0;i<n.length;i++)r.indexOf(n[i][t])==-1&&r.push(n[i][t]);return r};r.prototype.getColumnRange=function(n,t){for(var r={min:n[0][t],max:n[0][t]},i=0;i<n.length;i++)r.min>n[i][t]&&(r.min=n[i][t]),r.max<n[i][t]&&(r.max=n[i][t]);return r};r.prototype._dataInitialize=function(n){var e=this,t,f,s,h,i,u,l,v;if(this.dataSet&&this.dataSet.off("*",this._onChange),n!==undefined){if(Array.isArray(n)&&(n=new o(n)),n instanceof o||n instanceof c)t=n.get();else throw new Error("Array, DataSet, or DataView expected");if(t.length!=0){this.dataSet=n;this.dataTable=t;this._onChange=function(){e.setData(e.dataSet)};this.dataSet.on("*",this._onChange);this.colX="x";this.colY="y";this.colZ="z";this.colValue="style";this.colFilter="filter";t[0].hasOwnProperty("filter")&&this.dataFilter===undefined&&(this.dataFilter=new a(n,this.colFilter,this),this.dataFilter.setOnLoadCallback(function(){e.redraw()}));f=this.style==r.STYLE.BAR||this.style==r.STYLE.BARCOLOR||this.style==r.STYLE.BARSIZE;f&&(this.defaultXBarWidth!==undefined?this.xBarWidth=this.defaultXBarWidth:(s=this.getDistinctValues(t,this.colX),this.xBarWidth=s[1]-s[0]||1),this.defaultYBarWidth!==undefined?this.yBarWidth=this.defaultYBarWidth:(h=this.getDistinctValues(t,this.colY),this.yBarWidth=h[1]-h[0]||1));i=this.getColumnRange(t,this.colX);f&&(i.min-=this.xBarWidth/2,i.max+=this.xBarWidth/2);this.xMin=this.defaultXMin!==undefined?this.defaultXMin:i.min;this.xMax=this.defaultXMax!==undefined?this.defaultXMax:i.max;this.xMax<=this.xMin&&(this.xMax=this.xMin+1);this.xStep=this.defaultXStep!==undefined?this.defaultXStep:(this.xMax-this.xMin)/5;u=this.getColumnRange(t,this.colY);f&&(u.min-=this.yBarWidth/2,u.max+=this.yBarWidth/2);this.yMin=this.defaultYMin!==undefined?this.defaultYMin:u.min;this.yMax=this.defaultYMax!==undefined?this.defaultYMax:u.max;this.yMax<=this.yMin&&(this.yMax=this.yMin+1);this.yStep=this.defaultYStep!==undefined?this.defaultYStep:(this.yMax-this.yMin)/5;l=this.getColumnRange(t,this.colZ);this.zMin=this.defaultZMin!==undefined?this.defaultZMin:l.min;this.zMax=this.defaultZMax!==undefined?this.defaultZMax:l.max;this.zMax<=this.zMin&&(this.zMax=this.zMin+1);this.zStep=this.defaultZStep!==undefined?this.defaultZStep:(this.zMax-this.zMin)/5;this.colValue!==undefined&&(v=this.getColumnRange(t,this.colValue),this.valueMin=this.defaultValueMin!==undefined?this.defaultValueMin:v.min,this.valueMax=this.defaultValueMax!==undefined?this.defaultValueMax:v.max,this.valueMax<=this.valueMin&&(this.valueMax=this.valueMin+1));this._setScale()}}};r.prototype._getDataPoints=function(n){var t,i,f,y,o,s,v=[],h,c,e,a,w,l;if(this.style===r.STYLE.GRID||this.style===r.STYLE.SURFACE){for(h=[],c=[],f=0;f<this.getNumberOfRows(n);f++)t=n[f][this.colX]||0,i=n[f][this.colY]||0,h.indexOf(t)===-1&&h.push(t),c.indexOf(i)===-1&&c.push(i);function p(n,t){return n-t}for(h.sort(p),c.sort(p),e=[],f=0;f<n.length;f++)t=n[f][this.colX]||0,i=n[f][this.colY]||0,y=n[f][this.colZ]||0,a=h.indexOf(t),w=c.indexOf(i),e[a]===undefined&&(e[a]=[]),l=new u,l.x=t,l.y=i,l.z=y,o={},o.point=l,o.trans=undefined,o.screen=undefined,o.bottom=new u(t,i,this.zMin),e[a][w]=o,v.push(o);for(t=0;t<e.length;t++)for(i=0;i<e[t].length;i++)e[t][i]&&(e[t][i].pointRight=t<e.length-1?e[t+1][i]:undefined,e[t][i].pointTop=i<e[t].length-1?e[t][i+1]:undefined,e[t][i].pointCross=t<e.length-1&&i<e[t].length-1?e[t+1][i+1]:undefined)}else for(f=0;f<n.length;f++)s=new u,s.x=n[f][this.colX]||0,s.y=n[f][this.colY]||0,s.z=n[f][this.colZ]||0,this.colValue!==undefined&&(s.value=n[f][this.colValue]||0),o={},o.point=s,o.bottom=new u(s.x,s.y,this.zMin),o.trans=undefined,o.screen=undefined,v.push(o);return v};r.prototype.create=function(){for(var n;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div");this.frame.style.position="relative";this.frame.style.overflow="hidden";this.frame.canvas=document.createElement("canvas");this.frame.canvas.style.position="relative";this.frame.appendChild(this.frame.canvas);n=document.createElement("DIV");n.style.color="red";n.style.fontWeight="bold";n.style.padding="10px";n.innerHTML="Error: your browser does not support HTML canvas";this.frame.canvas.appendChild(n);this.frame.filter=document.createElement("div");this.frame.filter.style.position="absolute";this.frame.filter.style.bottom="0px";this.frame.filter.style.left="0px";this.frame.filter.style.width="100%";this.frame.appendChild(this.frame.filter);var t=this,i=function(n){t._onMouseDown(n)},r=function(n){t._onTouchStart(n)},u=function(n){t._onWheel(n)},e=function(n){t._onTooltip(n)};f.addEventListener(this.frame.canvas,"keydown",onkeydown);f.addEventListener(this.frame.canvas,"mousedown",i);f.addEventListener(this.frame.canvas,"touchstart",r);f.addEventListener(this.frame.canvas,"mousewheel",u);f.addEventListener(this.frame.canvas,"mousemove",e);this.containerElement.appendChild(this.frame)};r.prototype.setSize=function(n,t){this.frame.style.width=n;this.frame.style.height=t;this._resizeCanvas()};r.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%";this.frame.canvas.style.height="100%";this.frame.canvas.width=this.frame.canvas.clientWidth;this.frame.canvas.height=this.frame.canvas.clientHeight;this.frame.filter.style.width=this.frame.canvas.clientWidth-20+"px"};r.prototype.animationStart=function(){if(!this.frame.filter||!this.frame.filter.slider)throw"No animation available";this.frame.filter.slider.play()};r.prototype.animationStop=function(){this.frame.filter&&this.frame.filter.slider&&this.frame.filter.slider.stop()};r.prototype._resizeCenter=function(){this.xcenter=this.defaultXCenter.charAt(this.defaultXCenter.length-1)==="%"?parseFloat(this.defaultXCenter)/100*this.frame.canvas.clientWidth:parseFloat(this.defaultXCenter);this.ycenter=this.defaultYCenter.charAt(this.defaultYCenter.length-1)==="%"?parseFloat(this.defaultYCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight):parseFloat(this.defaultYCenter)};r.prototype.setCameraPosition=function(n){n!==undefined&&(n.horizontal!==undefined&&n.vertical!==undefined&&this.camera.setArmRotation(n.horizontal,n.vertical),n.distance!==undefined&&this.camera.setArmLength(n.distance),this.redraw())};r.prototype.getCameraPosition=function(){var n=this.camera.getArmRotation();return n.distance=this.camera.getArmLength(),n};r.prototype._readData=function(n){this._dataInitialize(n,this.style);this.dataPoints=this.dataFilter?this.dataFilter._getDataPoints():this._getDataPoints(this.dataTable);this._redrawFilter()};r.prototype.setData=function(n){this._readData(n);this.redraw();this.animationAutoStart&&this.dataFilter&&this.animationStart()};r.prototype.setOptions=function(n){var t=undefined,i;this.animationStop();n!==undefined&&(n.width!==undefined&&(this.width=n.width),n.height!==undefined&&(this.height=n.height),n.xCenter!==undefined&&(this.defaultXCenter=n.xCenter),n.yCenter!==undefined&&(this.defaultYCenter=n.yCenter),n.filterLabel!==undefined&&(this.filterLabel=n.filterLabel),n.legendLabel!==undefined&&(this.legendLabel=n.legendLabel),n.xLabel!==undefined&&(this.xLabel=n.xLabel),n.yLabel!==undefined&&(this.yLabel=n.yLabel),n.zLabel!==undefined&&(this.zLabel=n.zLabel),n.style!==undefined&&(i=this._getStyleNumber(n.style),i!==-1&&(this.style=i)),n.showGrid!==undefined&&(this.showGrid=n.showGrid),n.showPerspective!==undefined&&(this.showPerspective=n.showPerspective),n.showShadow!==undefined&&(this.showShadow=n.showShadow),n.tooltip!==undefined&&(this.showTooltip=n.tooltip),n.showAnimationControls!==undefined&&(this.showAnimationControls=n.showAnimationControls),n.keepAspectRatio!==undefined&&(this.keepAspectRatio=n.keepAspectRatio),n.verticalRatio!==undefined&&(this.verticalRatio=n.verticalRatio),n.animationInterval!==undefined&&(this.animationInterval=n.animationInterval),n.animationPreload!==undefined&&(this.animationPreload=n.animationPreload),n.animationAutoStart!==undefined&&(this.animationAutoStart=n.animationAutoStart),n.xBarWidth!==undefined&&(this.defaultXBarWidth=n.xBarWidth),n.yBarWidth!==undefined&&(this.defaultYBarWidth=n.yBarWidth),n.xMin!==undefined&&(this.defaultXMin=n.xMin),n.xStep!==undefined&&(this.defaultXStep=n.xStep),n.xMax!==undefined&&(this.defaultXMax=n.xMax),n.yMin!==undefined&&(this.defaultYMin=n.yMin),n.yStep!==undefined&&(this.defaultYStep=n.yStep),n.yMax!==undefined&&(this.defaultYMax=n.yMax),n.zMin!==undefined&&(this.defaultZMin=n.zMin),n.zStep!==undefined&&(this.defaultZStep=n.zStep),n.zMax!==undefined&&(this.defaultZMax=n.zMax),n.valueMin!==undefined&&(this.defaultValueMin=n.valueMin),n.valueMax!==undefined&&(this.defaultValueMax=n.valueMax),n.cameraPosition!==undefined&&(t=n.cameraPosition),t!==undefined?(this.camera.setArmRotation(t.horizontal,t.vertical),this.camera.setArmLength(t.distance)):(this.camera.setArmRotation(1,.5),this.camera.setArmLength(1.7)));this._setBackgroundColor(n&&n.backgroundColor);this.setSize(this.width,this.height);this.dataTable&&this.setData(this.dataTable);this.animationAutoStart&&this.dataFilter&&this.animationStart()};r.prototype.redraw=function(){if(this.dataPoints===undefined)throw"Error: graph data not initialized";this._resizeCanvas();this._resizeCenter();this._redrawSlider();this._redrawClear();this._redrawAxis();this.style===r.STYLE.GRID||this.style===r.STYLE.SURFACE?this._redrawDataGrid():this.style===r.STYLE.LINE?this._redrawDataLine():this.style===r.STYLE.BAR||this.style===r.STYLE.BARCOLOR||this.style===r.STYLE.BARSIZE?this._redrawDataBar():this._redrawDataDot();this._redrawInfo();this._redrawLegend()};r.prototype._redrawClear=function(){var n=this.frame.canvas,t=n.getContext("2d");t.clearRect(0,0,n.width,n.height)};r.prototype._redrawLegend=function(){var t,h,v,o,w,n,a,y,p,i,b;if(this.style===r.STYLE.DOTCOLOR||this.style===r.STYLE.DOTSIZE){h=this.frame.clientWidth*.02;this.style===r.STYLE.DOTSIZE?(v=h/2,o=h/2+h*2):(v=20,o=20);var c=Math.max(this.frame.clientHeight*.25,100),f=this.margin,s=this.frame.clientWidth-this.margin,u=s-o,l=f+c}if(w=this.frame.canvas,n=w.getContext("2d"),n.lineWidth=1,n.font="14px arial",this.style===r.STYLE.DOTCOLOR){for(a=0,y=c,t=a;t<y;t++){var k=(t-a)/(y-a),d=k*240,g=this._hsv2rgb(d,1,1);n.strokeStyle=g;n.beginPath();n.moveTo(u,f+t);n.lineTo(s,f+t);n.stroke()}n.strokeStyle=this.colorAxis;n.strokeRect(u,f,o,c)}if(this.style===r.STYLE.DOTSIZE&&(n.strokeStyle=this.colorAxis,n.fillStyle=this.colorDot,n.beginPath(),n.moveTo(u,f),n.lineTo(s,f),n.lineTo(s-o+v,l),n.lineTo(u,l),n.closePath(),n.fill(),n.stroke()),this.style===r.STYLE.DOTCOLOR||this.style===r.STYLE.DOTSIZE){for(p=5,i=new e(this.valueMin,this.valueMax,(this.valueMax-this.valueMin)/5,!0),i.start(),i.getCurrent()<this.valueMin&&i.next();!i.end();)t=l-(i.getCurrent()-this.valueMin)/(this.valueMax-this.valueMin)*c,n.beginPath(),n.moveTo(u-p,t),n.lineTo(u,t),n.stroke(),n.textAlign="right",n.textBaseline="middle",n.fillStyle=this.colorAxis,n.fillText(i.getCurrent(),u-2*p,t),i.next();n.textAlign="right";n.textBaseline="top";b=this.legendLabel;n.fillText(b,s,l+this.margin)}};r.prototype._redrawFilter=function(){var i,n,t,r;this.frame.filter.innerHTML="";this.dataFilter?(i={visible:this.showAnimationControls},n=new v(this.frame.filter,i),this.frame.filter.slider=n,this.frame.filter.style.padding="10px",n.setValues(this.dataFilter.values),n.setPlayInterval(this.animationInterval),t=this,r=function(){var i=n.getIndex();t.dataFilter.selectValue(i);t.dataPoints=t.dataFilter._getDataPoints();t.redraw()},n.setOnChangeCallback(r)):this.frame.filter.slider=undefined};r.prototype._redrawSlider=function(){this.frame.filter.slider!==undefined&&this.frame.filter.slider.redraw()};r.prototype._redrawInfo=function(){var t,n,i,r;this.dataFilter&&(t=this.frame.canvas,n=t.getContext("2d"),n.font="14px arial",n.lineStyle="gray",n.fillStyle="gray",n.textAlign="left",n.textBaseline="top",i=this.margin,r=this.margin,n.fillText(this.dataFilter.getLabel()+": "+this.dataFilter.getSelectedValue(),i,r))};r.prototype._redrawAxis=function(){var rt=this.frame.canvas,n=rt.getContext("2d"),t,r,i,l,f,s,h,g,nt,y,p,a,v,c,b,k,d;n.font=24/this.camera.getArmLength()+"px arial";var tt=.025/this.scale.x,it=.025/this.scale.y,w=5/this.camera.getArmLength(),o=this.camera.getArmRotation().horizontal;for(n.lineWidth=1,l=this.defaultXStep===undefined,i=new e(this.xMin,this.xMax,this.xStep,l),i.start(),i.getCurrent()<this.xMin&&i.next();!i.end();)c=i.getCurrent(),this.showGrid?(t=this._convert3Dto2D(new u(c,this.yMin,this.zMin)),r=this._convert3Dto2D(new u(c,this.yMax,this.zMin)),n.strokeStyle=this.colorGrid,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(r.x,r.y),n.stroke()):(t=this._convert3Dto2D(new u(c,this.yMin,this.zMin)),r=this._convert3Dto2D(new u(c,this.yMin+tt,this.zMin)),n.strokeStyle=this.colorAxis,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(r.x,r.y),n.stroke(),t=this._convert3Dto2D(new u(c,this.yMax,this.zMin)),r=this._convert3Dto2D(new u(c,this.yMax-tt,this.zMin)),n.strokeStyle=this.colorAxis,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(r.x,r.y),n.stroke()),h=Math.cos(o)>0?this.yMin:this.yMax,f=this._convert3Dto2D(new u(c,h,this.zMin)),Math.cos(o*2)>0?(n.textAlign="center",n.textBaseline="top",f.y+=w):Math.sin(o*2)<0?(n.textAlign="right",n.textBaseline="middle"):(n.textAlign="left",n.textBaseline="middle"),n.fillStyle=this.colorAxis,n.fillText("  "+i.getCurrent()+"  ",f.x,f.y),i.next();for(n.lineWidth=1,l=this.defaultYStep===undefined,i=new e(this.yMin,this.yMax,this.yStep,l),i.start(),i.getCurrent()<this.yMin&&i.next();!i.end();)this.showGrid?(t=this._convert3Dto2D(new u(this.xMin,i.getCurrent(),this.zMin)),r=this._convert3Dto2D(new u(this.xMax,i.getCurrent(),this.zMin)),n.strokeStyle=this.colorGrid,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(r.x,r.y),n.stroke()):(t=this._convert3Dto2D(new u(this.xMin,i.getCurrent(),this.zMin)),r=this._convert3Dto2D(new u(this.xMin+it,i.getCurrent(),this.zMin)),n.strokeStyle=this.colorAxis,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(r.x,r.y),n.stroke(),t=this._convert3Dto2D(new u(this.xMax,i.getCurrent(),this.zMin)),r=this._convert3Dto2D(new u(this.xMax-it,i.getCurrent(),this.zMin)),n.strokeStyle=this.colorAxis,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(r.x,r.y),n.stroke()),s=Math.sin(o)>0?this.xMin:this.xMax,f=this._convert3Dto2D(new u(s,i.getCurrent(),this.zMin)),Math.cos(o*2)<0?(n.textAlign="center",n.textBaseline="top",f.y+=w):Math.sin(o*2)>0?(n.textAlign="right",n.textBaseline="middle"):(n.textAlign="left",n.textBaseline="middle"),n.fillStyle=this.colorAxis,n.fillText("  "+i.getCurrent()+"  ",f.x,f.y),i.next();for(n.lineWidth=1,l=this.defaultZStep===undefined,i=new e(this.zMin,this.zMax,this.zStep,l),i.start(),i.getCurrent()<this.zMin&&i.next(),s=Math.cos(o)>0?this.xMin:this.xMax,h=Math.sin(o)<0?this.yMin:this.yMax;!i.end();)t=this._convert3Dto2D(new u(s,h,i.getCurrent())),n.strokeStyle=this.colorAxis,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(t.x-w,t.y),n.stroke(),n.textAlign="right",n.textBaseline="middle",n.fillStyle=this.colorAxis,n.fillText(i.getCurrent()+" ",t.x-5,t.y),i.next();n.lineWidth=1;t=this._convert3Dto2D(new u(s,h,this.zMin));r=this._convert3Dto2D(new u(s,h,this.zMax));n.strokeStyle=this.colorAxis;n.beginPath();n.moveTo(t.x,t.y);n.lineTo(r.x,r.y);n.stroke();n.lineWidth=1;a=this._convert3Dto2D(new u(this.xMin,this.yMin,this.zMin));v=this._convert3Dto2D(new u(this.xMax,this.yMin,this.zMin));n.strokeStyle=this.colorAxis;n.beginPath();n.moveTo(a.x,a.y);n.lineTo(v.x,v.y);n.stroke();a=this._convert3Dto2D(new u(this.xMin,this.yMax,this.zMin));v=this._convert3Dto2D(new u(this.xMax,this.yMax,this.zMin));n.strokeStyle=this.colorAxis;n.beginPath();n.moveTo(a.x,a.y);n.lineTo(v.x,v.y);n.stroke();n.lineWidth=1;t=this._convert3Dto2D(new u(this.xMin,this.yMin,this.zMin));r=this._convert3Dto2D(new u(this.xMin,this.yMax,this.zMin));n.strokeStyle=this.colorAxis;n.beginPath();n.moveTo(t.x,t.y);n.lineTo(r.x,r.y);n.stroke();t=this._convert3Dto2D(new u(this.xMax,this.yMin,this.zMin));r=this._convert3Dto2D(new u(this.xMax,this.yMax,this.zMin));n.strokeStyle=this.colorAxis;n.beginPath();n.moveTo(t.x,t.y);n.lineTo(r.x,r.y);n.stroke();b=this.xLabel;b.length>0&&(p=.1/this.scale.y,s=(this.xMin+this.xMax)/2,h=Math.cos(o)>0?this.yMin-p:this.yMax+p,f=this._convert3Dto2D(new u(s,h,this.zMin)),Math.cos(o*2)>0?(n.textAlign="center",n.textBaseline="top"):Math.sin(o*2)<0?(n.textAlign="right",n.textBaseline="middle"):(n.textAlign="left",n.textBaseline="middle"),n.fillStyle=this.colorAxis,n.fillText(b,f.x,f.y));k=this.yLabel;k.length>0&&(y=.1/this.scale.x,s=Math.sin(o)>0?this.xMin-y:this.xMax+y,h=(this.yMin+this.yMax)/2,f=this._convert3Dto2D(new u(s,h,this.zMin)),Math.cos(o*2)<0?(n.textAlign="center",n.textBaseline="top"):Math.sin(o*2)>0?(n.textAlign="right",n.textBaseline="middle"):(n.textAlign="left",n.textBaseline="middle"),n.fillStyle=this.colorAxis,n.fillText(k,f.x,f.y));d=this.zLabel;d.length>0&&(nt=30,s=Math.cos(o)>0?this.xMin:this.xMax,h=Math.sin(o)<0?this.yMin:this.yMax,g=(this.zMin+this.zMax)/2,f=this._convert3Dto2D(new u(s,h,g)),n.textAlign="right",n.textBaseline="middle",n.fillStyle=this.colorAxis,n.fillText(d,f.x-nt,f.y))};r.prototype._hsv2rgb=function(n,t,i){var r,u,f,e,s,o;e=i*t;s=Math.floor(n/60);o=e*(1-Math.abs(n/60%2-1));switch(s){case 0:r=e;u=o;f=0;break;case 1:r=o;u=e;f=0;break;case 2:r=0;u=e;f=o;break;case 3:r=0;u=o;f=e;break;case 4:r=o;u=0;f=e;break;case 5:r=e;u=0;f=o;break;default:r=0;u=0;f=0}return"RGB("+parseInt(r*255)+","+parseInt(u*255)+","+parseInt(f*255)+")"};r.prototype._redrawDataGrid=function(){var nt=this.frame.canvas,n=nt.getContext("2d"),i,f,e,s,t,y,c,a,l,o,p,v,h,w,d,b,g;if(this.dataPoints!==undefined&&!(this.dataPoints.length<=0)){for(t=0;t<this.dataPoints.length;t++)w=this._convertPointToTranslation(this.dataPoints[t].point),d=this._convertTranslationToScreen(w),this.dataPoints[t].trans=w,this.dataPoints[t].screen=d,b=this._convertPointToTranslation(this.dataPoints[t].bottom),this.dataPoints[t].dist=this.showPerspective?b.length():-b.z;if(g=function(n,t){return t.dist-n.dist},this.dataPoints.sort(g),this.style===r.STYLE.SURFACE){for(t=0;t<this.dataPoints.length;t++)if(i=this.dataPoints[t],f=this.dataPoints[t].pointRight,e=this.dataPoints[t].pointTop,s=this.dataPoints[t].pointCross,i!==undefined&&f!==undefined&&e!==undefined&&s!==undefined){if(this.showGrayBottom||this.showShadow){var tt=u.subtract(s.trans,i.trans),it=u.subtract(e.trans,f.trans),k=u.crossProduct(tt,it),rt=k.length();y=k.z>0}else y=!0;y?(h=(i.point.z+f.point.z+e.point.z+s.point.z)/4,o=(1-(h-this.zMin)*this.scale.z/this.verticalRatio)*240,p=1,this.showShadow?(v=Math.min(1+k.x/rt/2,1),c=this._hsv2rgb(o,p,v),a=c):(v=1,c=this._hsv2rgb(o,p,v),a=this.colorAxis)):(c="gray",a=this.colorAxis);l=.5;n.lineWidth=l;n.fillStyle=c;n.strokeStyle=a;n.beginPath();n.moveTo(i.screen.x,i.screen.y);n.lineTo(f.screen.x,f.screen.y);n.lineTo(s.screen.x,s.screen.y);n.lineTo(e.screen.x,e.screen.y);n.closePath();n.fill();n.stroke()}}else for(t=0;t<this.dataPoints.length;t++)i=this.dataPoints[t],f=this.dataPoints[t].pointRight,e=this.dataPoints[t].pointTop,i!==undefined&&(l=this.showPerspective?2/-i.trans.z:2*-(this.eye.z/this.camera.getArmLength())),i!==undefined&&f!==undefined&&(h=(i.point.z+f.point.z)/2,o=(1-(h-this.zMin)*this.scale.z/this.verticalRatio)*240,n.lineWidth=l,n.strokeStyle=this._hsv2rgb(o,1,1),n.beginPath(),n.moveTo(i.screen.x,i.screen.y),n.lineTo(f.screen.x,f.screen.y),n.stroke()),i!==undefined&&e!==undefined&&(h=(i.point.z+e.point.z)/2,o=(1-(h-this.zMin)*this.scale.z/this.verticalRatio)*240,n.lineWidth=l,n.strokeStyle=this._hsv2rgb(o,1,1),n.beginPath(),n.moveTo(i.screen.x,i.screen.y),n.lineTo(e.screen.x,e.screen.y),n.stroke())}};r.prototype._redrawDataDot=function(){var p=this.frame.canvas,n=p.getContext("2d"),t,h,v,c,y,f,i,l,a,e,u,o,s;if(this.dataPoints!==undefined&&!(this.dataPoints.length<=0)){for(t=0;t<this.dataPoints.length;t++)h=this._convertPointToTranslation(this.dataPoints[t].point),v=this._convertTranslationToScreen(h),this.dataPoints[t].trans=h,this.dataPoints[t].screen=v,c=this._convertPointToTranslation(this.dataPoints[t].bottom),this.dataPoints[t].dist=this.showPerspective?c.length():-c.z;for(y=function(n,t){return t.dist-n.dist},this.dataPoints.sort(y),f=this.frame.clientWidth*.02,t=0;t<this.dataPoints.length;t++)i=this.dataPoints[t],this.style===r.STYLE.DOTLINE&&(l=this._convert3Dto2D(i.bottom),n.lineWidth=1,n.strokeStyle=this.colorGrid,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(i.screen.x,i.screen.y),n.stroke()),a=this.style===r.STYLE.DOTSIZE?f/2+2*f*(i.point.value-this.valueMin)/(this.valueMax-this.valueMin):f,e=this.showPerspective?a/-i.trans.z:a*-(this.eye.z/this.camera.getArmLength()),e<0&&(e=0),this.style===r.STYLE.DOTCOLOR?(u=(1-(i.point.value-this.valueMin)*this.scale.value)*240,o=this._hsv2rgb(u,1,1),s=this._hsv2rgb(u,1,.8)):this.style===r.STYLE.DOTSIZE?(o=this.colorDot,s=this.colorDotBorder):(u=(1-(i.point.z-this.zMin)*this.scale.z/this.verticalRatio)*240,o=this._hsv2rgb(u,1,1),s=this._hsv2rgb(u,1,.8)),n.lineWidth=1,n.strokeStyle=s,n.fillStyle=o,n.beginPath(),n.arc(i.screen.x,i.screen.y,e,0,Math.PI*2,!0),n.fill(),n.stroke()}};r.prototype._redrawDataBar=function(){var it=this.frame.canvas,e=it.getContext("2d"),i,c,y,o,b,g,k,nt,s,h,l,v,p,w,a,d;if(this.dataPoints!==undefined&&!(this.dataPoints.length<=0)){for(i=0;i<this.dataPoints.length;i++)b=this._convertPointToTranslation(this.dataPoints[i].point),g=this._convertTranslationToScreen(b),this.dataPoints[i].trans=b,this.dataPoints[i].screen=g,k=this._convertPointToTranslation(this.dataPoints[i].bottom),this.dataPoints[i].dist=this.showPerspective?k.length():-k.z;for(nt=function(n,t){return t.dist-n.dist},this.dataPoints.sort(nt),s=this.xBarWidth/2,h=this.yBarWidth/2,i=0;i<this.dataPoints.length;i++){l=this.dataPoints[i];this.style===r.STYLE.BARCOLOR?(v=(1-(l.point.value-this.valueMin)*this.scale.value)*240,p=this._hsv2rgb(v,1,1),w=this._hsv2rgb(v,1,.8)):this.style===r.STYLE.BARSIZE?(p=this.colorDot,w=this.colorDotBorder):(v=(1-(l.point.z-this.zMin)*this.scale.z/this.verticalRatio)*240,p=this._hsv2rgb(v,1,1),w=this._hsv2rgb(v,1,.8));this.style===r.STYLE.BARSIZE&&(s=this.xBarWidth/2*((l.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2),h=this.yBarWidth/2*((l.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2));var tt=this,n=l.point,f=[{point:new u(n.x-s,n.y-h,n.z)},{point:new u(n.x+s,n.y-h,n.z)},{point:new u(n.x+s,n.y+h,n.z)},{point:new u(n.x-s,n.y+h,n.z)}],t=[{point:new u(n.x-s,n.y-h,this.zMin)},{point:new u(n.x+s,n.y-h,this.zMin)},{point:new u(n.x+s,n.y+h,this.zMin)},{point:new u(n.x-s,n.y+h,this.zMin)}];for(f.forEach(function(n){n.screen=tt._convert3Dto2D(n.point)}),t.forEach(function(n){n.screen=tt._convert3Dto2D(n.point)}),a=[{corners:f,center:u.avg(t[0].point,t[2].point)},{corners:[f[0],f[1],t[1],t[0]],center:u.avg(t[1].point,t[0].point)},{corners:[f[1],f[2],t[2],t[1]],center:u.avg(t[2].point,t[1].point)},{corners:[f[2],f[3],t[3],t[2]],center:u.avg(t[3].point,t[2].point)},{corners:[f[3],f[0],t[0],t[3]],center:u.avg(t[0].point,t[3].point)}],l.surfaces=a,c=0;c<a.length;c++)y=a[c],d=this._convertPointToTranslation(y.center),y.dist=this.showPerspective?d.length():-d.z;for(a.sort(function(n,t){var i=t.dist-n.dist;return i?i:n.corners===f?1:t.corners===f?-1:0}),e.lineWidth=1,e.strokeStyle=w,e.fillStyle=p,c=2;c<a.length;c++)y=a[c],o=y.corners,e.beginPath(),e.moveTo(o[3].screen.x,o[3].screen.y),e.lineTo(o[0].screen.x,o[0].screen.y),e.lineTo(o[1].screen.x,o[1].screen.y),e.lineTo(o[2].screen.x,o[2].screen.y),e.lineTo(o[3].screen.x,o[3].screen.y),e.fill(),e.stroke()}}};r.prototype._redrawDataLine=function(){var f=this.frame.canvas,t=f.getContext("2d"),i,n,r,u;if(this.dataPoints!==undefined&&!(this.dataPoints.length<=0)){for(n=0;n<this.dataPoints.length;n++)r=this._convertPointToTranslation(this.dataPoints[n].point),u=this._convertTranslationToScreen(r),this.dataPoints[n].trans=r,this.dataPoints[n].screen=u;for(this.dataPoints.length>0&&(i=this.dataPoints[0],t.lineWidth=1,t.strokeStyle="blue",t.beginPath(),t.moveTo(i.screen.x,i.screen.y)),n=1;n<this.dataPoints.length;n++)i=this.dataPoints[n],t.lineTo(i.screen.x,i.screen.y);this.dataPoints.length>0&&t.stroke()}};r.prototype._onMouseDown=function(n){if(n=n||window.event,this.leftButtonDown&&this._onMouseUp(n),this.leftButtonDown=n.which?n.which===1:n.button===1,this.leftButtonDown||this.touchDown){this.startMouseX=getMouseX(n);this.startMouseY=getMouseY(n);this.startStart=new Date(this.start);this.startEnd=new Date(this.end);this.startArmRotation=this.camera.getArmRotation();this.frame.style.cursor="move";var t=this;this.onmousemove=function(n){t._onMouseMove(n)};this.onmouseup=function(n){t._onMouseUp(n)};f.addEventListener(document,"mousemove",t.onmousemove);f.addEventListener(document,"mouseup",t.onmouseup);f.preventDefault(n)}};r.prototype._onMouseMove=function(n){var u;n=n||window.event;var e=parseFloat(getMouseX(n))-this.startMouseX,o=parseFloat(getMouseY(n))-this.startMouseY,t=this.startArmRotation.horizontal+e/200,i=this.startArmRotation.vertical+o/200,r=Math.sin(4/180*Math.PI);Math.abs(Math.sin(t))<r&&(t=Math.round(t/Math.PI)*Math.PI-.001);Math.abs(Math.cos(t))<r&&(t=(Math.round(t/Math.PI-.5)+.5)*Math.PI-.001);Math.abs(Math.sin(i))<r&&(i=Math.round(i/Math.PI)*Math.PI);Math.abs(Math.cos(i))<r&&(i=(Math.round(i/Math.PI-.5)+.5)*Math.PI);this.camera.setArmRotation(t,i);this.redraw();u=this.getCameraPosition();this.emit("cameraPositionChange",u);f.preventDefault(n)};r.prototype._onMouseUp=function(n){this.frame.style.cursor="auto";this.leftButtonDown=!1;f.removeEventListener(document,"mousemove",this.onmousemove);f.removeEventListener(document,"mouseup",this.onmouseup);f.preventDefault(n)};r.prototype._onTooltip=function(n){var r=getMouseX(n)-f.getAbsoluteLeft(this.frame),u=getMouseY(n)-f.getAbsoluteTop(this.frame),t,i;if(this.showTooltip){if(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.leftButtonDown){this._hideTooltip();return}this.tooltip&&this.tooltip.dataPoint?(t=this._dataPointFromXY(r,u),t!==this.tooltip.dataPoint&&(t?this._showTooltip(t):this._hideTooltip())):(i=this,this.tooltipTimeout=setTimeout(function(){i.tooltipTimeout=null;var n=i._dataPointFromXY(r,u);n&&i._showTooltip(n)},300))}};r.prototype._onTouchStart=function(n){this.touchDown=!0;var t=this;this.ontouchmove=function(n){t._onTouchMove(n)};this.ontouchend=function(n){t._onTouchEnd(n)};f.addEventListener(document,"touchmove",t.ontouchmove);f.addEventListener(document,"touchend",t.ontouchend);this._onMouseDown(n)};r.prototype._onTouchMove=function(n){this._onMouseMove(n)};r.prototype._onTouchEnd=function(n){this.touchDown=!1;f.removeEventListener(document,"touchmove",this.ontouchmove);f.removeEventListener(document,"touchend",this.ontouchend);this._onMouseUp(n)};r.prototype._onWheel=function(n){var t,i,r,u;n||(n=window.event);t=0;n.wheelDelta?t=n.wheelDelta/120:n.detail&&(t=-n.detail/3);t&&(i=this.camera.getArmLength(),r=i*(1-t/10),this.camera.setArmLength(r),this.redraw(),this._hideTooltip());u=this.getCameraPosition();this.emit("cameraPositionChange",u);f.preventDefault(n)};r.prototype._insideTriangle=function(n,t){function s(n){return n>0?1:n<0?-1:0}var i=t[0],r=t[1],u=t[2],f=s((r.x-i.x)*(n.y-i.y)-(r.y-i.y)*(n.x-i.x)),e=s((u.x-r.x)*(n.y-r.y)-(u.y-r.y)*(n.x-r.x)),o=s((i.x-u.x)*(n.y-u.y)-(i.y-u.y)*(n.x-u.x));return(f==0||e==0||f==e)&&(e==0||o==0||e==o)&&(f==0||o==0||f==o)};r.prototype._dataPointFromXY=function(n,t){var i,u=null,a=null,c=null,v=new s(n,t),e,o,h;if(this.style===r.STYLE.BAR||this.style===r.STYLE.BARCOLOR||this.style===r.STYLE.BARSIZE){for(i=this.dataPoints.length-1;i>=0;i--)if(u=this.dataPoints[i],e=u.surfaces,e)for(o=e.length-1;o>=0;o--){var w=e[o],f=w.corners,b=[f[0].screen,f[1].screen,f[2].screen],k=[f[2].screen,f[3].screen,f[0].screen];if(this._insideTriangle(v,b)||this._insideTriangle(v,k))return u}}else for(i=0;i<this.dataPoints.length;i++)if(u=this.dataPoints[i],h=u.screen,h){var y=Math.abs(n-h.x),p=Math.abs(t-h.y),l=Math.sqrt(y*y+p*p);(c===null||l<c)&&l<100&&(c=l,a=u)}return a};r.prototype._showTooltip=function(n){var t,r,i;this.tooltip?(t=this.tooltip.dom.content,r=this.tooltip.dom.line,i=this.tooltip.dom.dot):(t=document.createElement("div"),t.style.position="absolute",t.style.padding="10px",t.style.border="1px solid #4d4d4d",t.style.color="#1a1a1a",t.style.background="rgba(255,255,255,0.7)",t.style.borderRadius="2px",t.style.boxShadow="5px 5px 10px rgba(128,128,128,0.5)",r=document.createElement("div"),r.style.position="absolute",r.style.height="40px",r.style.width="0",r.style.borderLeft="1px solid #4d4d4d",i=document.createElement("div"),i.style.position="absolute",i.style.height="0",i.style.width="0",i.style.border="5px solid #4d4d4d",i.style.borderRadius="5px",this.tooltip={dataPoint:null,dom:{content:t,line:r,dot:i}});this._hideTooltip();this.tooltip.dataPoint=n;t.innerHTML=typeof this.showTooltip=="function"?this.showTooltip(n.point):"<table><tr><td>x:<\/td><td>"+n.point.x+"<\/td><\/tr><tr><td>y:<\/td><td>"+n.point.y+"<\/td><\/tr><tr><td>z:<\/td><td>"+n.point.z+"<\/td><\/tr><\/table>";t.style.left="0";t.style.top="0";this.frame.appendChild(t);this.frame.appendChild(r);this.frame.appendChild(i);var f=t.offsetWidth,o=t.offsetHeight,e=r.offsetHeight,s=i.offsetWidth,h=i.offsetHeight,u=n.screen.x-f/2;u=Math.min(Math.max(u,10),this.frame.clientWidth-10-f);r.style.left=n.screen.x+"px";r.style.top=n.screen.y-e+"px";t.style.left=u+"px";t.style.top=n.screen.y-e-o+"px";i.style.left=n.screen.x-s/2+"px";i.style.top=n.screen.y-h/2+"px"};r.prototype._hideTooltip=function(){var t,n;if(this.tooltip){this.tooltip.dataPoint=null;for(t in this.tooltip.dom)this.tooltip.dom.hasOwnProperty(t)&&(n=this.tooltip.dom[t],n&&n.parentNode&&n.parentNode.removeChild(n))}};getMouseX=function(n){return"clientX"in n?n.clientX:n.targetTouches[0]&&n.targetTouches[0].clientX||0};getMouseY=function(n){return"clientY"in n?n.clientY:n.targetTouches[0]&&n.targetTouches[0].clientY||0};n.exports=r},function(n,t,i){var r=i(9);Camera=function(){this.armLocation=new r;this.armRotation={};this.armRotation.horizontal=0;this.armRotation.vertical=0;this.armLength=1.7;this.cameraLocation=new r;this.cameraRotation=new r(.5*Math.PI,0,0);this.calculateCameraOrientation()};Camera.prototype.setArmLocation=function(n,t,i){this.armLocation.x=n;this.armLocation.y=t;this.armLocation.z=i;this.calculateCameraOrientation()};Camera.prototype.setArmRotation=function(n,t){n!==undefined&&(this.armRotation.horizontal=n);t!==undefined&&(this.armRotation.vertical=t,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI));(n!==undefined||t!==undefined)&&this.calculateCameraOrientation()};Camera.prototype.getArmRotation=function(){var n={};return n.horizontal=this.armRotation.horizontal,n.vertical=this.armRotation.vertical,n};Camera.prototype.setArmLength=function(n){n!==undefined&&(this.armLength=n,this.armLength<.71&&(this.armLength=.71),this.armLength>5&&(this.armLength=5),this.calculateCameraOrientation())};Camera.prototype.getArmLength=function(){return this.armLength};Camera.prototype.getCameraLocation=function(){return this.cameraLocation};Camera.prototype.getCameraRotation=function(){return this.cameraRotation};Camera.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical);this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical);this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical);this.cameraRotation.x=Math.PI/2-this.armRotation.vertical;this.cameraRotation.y=0;this.cameraRotation.z=-this.armRotation.horizontal};n.exports=Camera},function(n,t,i){function r(n,t,i){this.data=n;this.column=t;this.graph=i;this.index=undefined;this.value=undefined;this.values=i.getDistinctValues(n.get(),this.column);this.values.sort(function(n,t){return n>t?1:n<t?-1:0});this.values.length>0&&this.selectValue(0);this.dataPoints=[];this.loaded=!1;this.onLoadCallback=undefined;i.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}var u=i(4);r.prototype.isLoaded=function(){return this.loaded};r.prototype.getLoadedProgress=function(){for(var t=this.values.length,n=0;this.dataPoints[n];)n++;return Math.round(n/t*100)};r.prototype.getLabel=function(){return this.graph.filterLabel};r.prototype.getColumn=function(){return this.column};r.prototype.getSelectedValue=function(){return this.index===undefined?undefined:this.values[this.index]};r.prototype.getValues=function(){return this.values};r.prototype.getValue=function(n){if(n>=this.values.length)throw"Error: index out of range";return this.values[n]};r.prototype._getDataPoints=function(n){var i,t,r;return(n===undefined&&(n=this.index),n===undefined)?[]:(this.dataPoints[n]?i=this.dataPoints[n]:(t={},t.column=this.column,t.value=this.values[n],r=new u(this.data,{filter:function(n){return n[t.column]==t.value}}).get(),i=this.graph._getDataPoints(r),this.dataPoints[n]=i),i)};r.prototype.setOnLoadCallback=function(n){this.onLoadCallback=n};r.prototype.selectValue=function(n){if(n>=this.values.length)throw"Error: index out of range";this.index=n;this.value=this.values[n]};r.prototype.loadInBackground=function(n){var t,u,i,r;n===undefined&&(n=0);t=this.graph.frame;n<this.values.length?(u=this._getDataPoints(n),t.progress===undefined&&(t.progress=document.createElement("DIV"),t.progress.style.position="absolute",t.progress.style.color="gray",t.appendChild(t.progress)),i=this.getLoadedProgress(),t.progress.innerHTML="Loading animation... "+i+"%",t.progress.style.bottom="60px",t.progress.style.left="10px",r=this,setTimeout(function(){r.loadInBackground(n+1)},10),this.loaded=!1):(this.loaded=!0,t.progress!==undefined&&(t.removeChild(t.progress),t.progress=undefined),this.onLoadCallback&&this.onLoadCallback())};n.exports=r},function(n){Point2d=function(n,t){this.x=n!==undefined?n:0;this.y=t!==undefined?t:0};n.exports=Point2d},function(n){function t(n,t,i){this.x=n!==undefined?n:0;this.y=t!==undefined?t:0;this.z=i!==undefined?i:0}t.subtract=function(n,i){var r=new t;return r.x=n.x-i.x,r.y=n.y-i.y,r.z=n.z-i.z,r};t.add=function(n,i){var r=new t;return r.x=n.x+i.x,r.y=n.y+i.y,r.z=n.z+i.z,r};t.avg=function(n,i){return new t((n.x+i.x)/2,(n.y+i.y)/2,(n.z+i.z)/2)};t.crossProduct=function(n,i){var r=new t;return r.x=n.y*i.z-n.z*i.y,r.y=n.z*i.x-n.x*i.z,r.z=n.x*i.y-n.y*i.x,r};t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};n.exports=t},function(n,t,i){function r(n,t){if(n===undefined)throw"Error: No container element defined";if(this.container=n,this.visible=t&&t.visible!=undefined?t.visible:!0,this.visible){this.frame=document.createElement("DIV");this.frame.style.width="100%";this.frame.style.position="relative";this.container.appendChild(this.frame);this.frame.prev=document.createElement("INPUT");this.frame.prev.type="BUTTON";this.frame.prev.value="Prev";this.frame.appendChild(this.frame.prev);this.frame.play=document.createElement("INPUT");this.frame.play.type="BUTTON";this.frame.play.value="Play";this.frame.appendChild(this.frame.play);this.frame.next=document.createElement("INPUT");this.frame.next.type="BUTTON";this.frame.next.value="Next";this.frame.appendChild(this.frame.next);this.frame.bar=document.createElement("INPUT");this.frame.bar.type="BUTTON";this.frame.bar.style.position="absolute";this.frame.bar.style.border="1px solid red";this.frame.bar.style.width="100px";this.frame.bar.style.height="6px";this.frame.bar.style.borderRadius="2px";this.frame.bar.style.MozBorderRadius="2px";this.frame.bar.style.border="1px solid #7F7F7F";this.frame.bar.style.backgroundColor="#E5E5E5";this.frame.appendChild(this.frame.bar);this.frame.slide=document.createElement("INPUT");this.frame.slide.type="BUTTON";this.frame.slide.style.margin="0px";this.frame.slide.value=" ";this.frame.slide.style.position="relative";this.frame.slide.style.left="-100px";this.frame.appendChild(this.frame.slide);var i=this;this.frame.slide.onmousedown=function(n){i._onMouseDown(n)};this.frame.prev.onclick=function(n){i.prev(n)};this.frame.play.onclick=function(n){i.togglePlay(n)};this.frame.next.onclick=function(n){i.next(n)}}this.onChangeCallback=undefined;this.values=[];this.index=undefined;this.playTimeout=undefined;this.playInterval=1e3;this.playLoop=!0}var u=i(1);r.prototype.prev=function(){var n=this.getIndex();n>0&&(n--,this.setIndex(n))};r.prototype.next=function(){var n=this.getIndex();n<this.values.length-1&&(n++,this.setIndex(n))};r.prototype.playNext=function(){var t=new Date,n=this.getIndex();n<this.values.length-1?(n++,this.setIndex(n)):this.playLoop&&(n=0,this.setIndex(n));var i=new Date,r=i-t,u=Math.max(this.playInterval-r,0),f=this;this.playTimeout=setTimeout(function(){f.playNext()},u)};r.prototype.togglePlay=function(){this.playTimeout===undefined?this.play():this.stop()};r.prototype.play=function(){this.playTimeout||(this.playNext(),this.frame&&(this.frame.play.value="Stop"))};r.prototype.stop=function(){clearInterval(this.playTimeout);this.playTimeout=undefined;this.frame&&(this.frame.play.value="Play")};r.prototype.setOnChangeCallback=function(n){this.onChangeCallback=n};r.prototype.setPlayInterval=function(n){this.playInterval=n};r.prototype.getPlayInterval=function(){return this.playInterval};r.prototype.setPlayLoop=function(n){this.playLoop=n};r.prototype.onChange=function(){this.onChangeCallback!==undefined&&this.onChangeCallback()};r.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px";this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var n=this.indexToLeft(this.index);this.frame.slide.style.left=n+"px"}};r.prototype.setValues=function(n){this.values=n;this.values.length>0?this.setIndex(0):this.index=undefined};r.prototype.setIndex=function(n){if(n<this.values.length)this.index=n,this.redraw(),this.onChange();else throw"Error: index out of range";};r.prototype.getIndex=function(){return this.index};r.prototype.get=function(){return this.values[this.index]};r.prototype._onMouseDown=function(n){var i=n.which?n.which===1:n.button===1,t;i&&(this.startClientX=n.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move",t=this,this.onmousemove=function(n){t._onMouseMove(n)},this.onmouseup=function(n){t._onMouseUp(n)},u.addEventListener(document,"mousemove",this.onmousemove),u.addEventListener(document,"mouseup",this.onmouseup),u.preventDefault(n))};r.prototype.leftToIndex=function(n){var i=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,r=n-3,t=Math.round(r/i*(this.values.length-1));return t<0&&(t=0),t>this.values.length-1&&(t=this.values.length-1),t};r.prototype.indexToLeft=function(n){var t=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,i=n/(this.values.length-1)*t;return i+3};r.prototype._onMouseMove=function(n){var t=n.clientX-this.startClientX,i=this.startSlideX+t,r=this.leftToIndex(i);this.setIndex(r);u.preventDefault()};r.prototype._onMouseUp=function(){this.frame.style.cursor="auto";u.removeEventListener(document,"mousemove",this.onmousemove);u.removeEventListener(document,"mouseup",this.onmouseup);u.preventDefault()};n.exports=r},function(n){function t(n,t,i,r){this._start=0;this._end=0;this._step=1;this.prettyStep=!0;this.precision=5;this._current=0;this.setRange(n,t,i,r)}t.prototype.setRange=function(n,t,i,r){this._start=n?n:0;this._end=t?t:0;this.setStep(i,r)};t.prototype.setStep=function(n,i){n===undefined||n<=0||(i!==undefined&&(this.prettyStep=i),this._step=this.prettyStep===!0?t.calculatePrettyStep(n):n)};t.calculatePrettyStep=function(n){var i=function(n){return Math.log(n)/Math.LN10},f=Math.pow(10,Math.round(i(n))),r=2*Math.pow(10,Math.round(i(n/2))),u=5*Math.pow(10,Math.round(i(n/5))),t=f;return Math.abs(r-n)<=Math.abs(t-n)&&(t=r),Math.abs(u-n)<=Math.abs(t-n)&&(t=u),t<=0&&(t=1),t};t.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))};t.prototype.getStep=function(){return this._step};t.prototype.start=function(){this._current=this._start-this._start%this._step};t.prototype.next=function(){this._current+=this._step};t.prototype.end=function(){return this._current>this._end};n.exports=t},function(n,t,i){function r(n,t,i){var o,f;for(o in e.prototype)e.prototype.hasOwnProperty(o)&&!r.prototype.hasOwnProperty(o)&&(r.prototype[o]=e.prototype[o]);if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");f=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:"bottom",width:null,height:null,maxHeight:null,minHeight:null};this.options=u.deepExtend({},this.defaultOptions);this._create(n);this.components=[];this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},util:{snap:null,toScreen:f._toScreen.bind(f),toGlobalScreen:f._toGlobalScreen.bind(f),toTime:f._toTime.bind(f),toGlobalTime:f._toGlobalTime.bind(f)}};this.range=new s(this.body);this.components.push(this.range);this.body.range=this.range;this.timeAxis=new h(this.body);this.components.push(this.timeAxis);this.body.util.snap=this.timeAxis.snap.bind(this.timeAxis);this.currentTime=new c(this.body);this.components.push(this.currentTime);this.customTime=new l(this.body);this.components.push(this.customTime);this.itemSet=new a(this.body);this.components.push(this.itemSet);this.itemsData=null;this.groupsData=null;i&&this.setOptions(i);t?this.setItems(t):this.redraw()}var v=i(46),y=i(41),u=i(1),f=i(3),o=i(4),s=i(15),e=i(42),h=i(27),c=i(19),l=i(20),a=i(24);r.prototype.setOptions=function(n){if(n)u.selectiveExtend(["width","height","minHeight","maxHeight","autoResize","start","end","orientation"],this.options,n),this._initAutoResize();if(this.components.forEach(function(t){t.setOptions(n)}),n&&n.order)throw new Error("Option order is deprecated. There is no replacement for this feature.");this.redraw()};r.prototype.setItems=function(n){var e=this.itemsData==null,t,i,r;t=n?n instanceof f||n instanceof o?n:new f(n,{type:{start:"Date",end:"Date"}}):null;this.itemsData=t;this.itemSet&&this.itemSet.setItems(t);e&&("start"in this.options||"end"in this.options)&&(this.fit(),i="start"in this.options?u.convert(this.options.start,"Date"):null,r="end"in this.options?u.convert(this.options.end,"Date"):null,this.setWindow(i,r))};r.prototype.setGroups=function(n){var t;t=n?n instanceof f||n instanceof o?n:new f(n):null;this.groupsData=t;this.itemSet.setGroups(t)};r.prototype.setSelection=function(n){this.itemSet&&this.itemSet.setSelection(n)};r.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]};r.prototype.getItemRange=function(){var t=this.itemsData.getDataSet(),r=null,n=null,f,e,i;return t&&(f=t.min("start"),r=f?u.convert(f.start,"Date").valueOf():null,e=t.max("start"),e&&(n=u.convert(e.start,"Date").valueOf()),i=t.max("end"),i&&(n=n==null?u.convert(i.end,"Date").valueOf():Math.max(n,u.convert(i.end,"Date").valueOf()))),{min:r!=null?new Date(r):null,max:n!=null?new Date(n):null}};n.exports=r},function(n,t,i){function r(n,t,i,f){var v,o;for(v in e.prototype)e.prototype.hasOwnProperty(v)&&!r.prototype.hasOwnProperty(v)&&(r.prototype[v]=e.prototype[v]);o=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:"bottom",width:null,height:null,maxHeight:null,minHeight:null};this.options=u.deepExtend({},this.defaultOptions);this._create(n);this.components=[];this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},util:{snap:null,toScreen:o._toScreen.bind(o),toGlobalScreen:o._toGlobalScreen.bind(o),toTime:o._toTime.bind(o),toGlobalTime:o._toGlobalTime.bind(o)}};this.range=new s(this.body);this.components.push(this.range);this.body.range=this.range;this.timeAxis=new h(this.body);this.components.push(this.timeAxis);this.body.util.snap=this.timeAxis.snap.bind(this.timeAxis);this.currentTime=new c(this.body);this.components.push(this.currentTime);this.customTime=new l(this.body);this.components.push(this.customTime);this.linegraph=new a(this.body);this.components.push(this.linegraph);this.itemsData=null;this.groupsData=null;i&&this.setOptions(i);f&&this.setGroups(f);t?this.setItems(t):this.redraw()}var v=i(46),y=i(41),u=i(1),f=i(3),o=i(4),s=i(15),e=i(42),h=i(27),c=i(19),l=i(20),a=i(26);r.prototype.setOptions=function(n){if(n)u.selectiveExtend(["width","height","minHeight","maxHeight","autoResize","start","end","orientation"],this.options,n),this._initAutoResize();if(this.components.forEach(function(t){t.setOptions(n)}),n&&n.order)throw new Error("Option order is deprecated. There is no replacement for this feature.");this.redraw()};r.prototype.setItems=function(n){var e=this.itemsData==null,t,i,r;t=n?n instanceof f||n instanceof o?n:new f(n,{type:{start:"Date",end:"Date"}}):null;this.itemsData=t;this.linegraph&&this.linegraph.setItems(t);e&&("start"in this.options||"end"in this.options)&&(this.fit(),i="start"in this.options?u.convert(this.options.start,"Date"):null,r="end"in this.options?u.convert(this.options.end,"Date"):null,this.setWindow(i,r))};r.prototype.setGroups=function(n){var t;t=n?n instanceof f||n instanceof o?n:new f(n):null;this.groupsData=t;this.linegraph.setGroups(t)};r.prototype.getLegend=function(n,t,i){return t===undefined&&(t=15),i===undefined&&(i=15),this.linegraph.groups[n]!==undefined?this.linegraph.groups[n].getLegend(t,i):"cannot find group:"+n};r.prototype.isGroupVisible=function(n){return this.linegraph.groups[n]!==undefined?this.linegraph.groups[n].visible:!1};r.prototype.getItemRange=function(){var t=null,i=null,r,f,e,n;for(r in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(r)&&this.linegraph.groups[r].visible==!0)for(f=0;f<this.linegraph.groups[r].itemsData.length;f++)e=this.linegraph.groups[r].itemsData[f],n=u.convert(e.x,"Date").valueOf(),t=t==null?n:t>n?n:t,i=i==null?n:i<n?n:i;return{min:t!=null?new Date(t):null,max:i!=null?new Date(i):null}};n.exports=r},function(n){function t(n,t,i,r,u){this.current=0;this.autoScale=!0;this.stepIndex=0;this.step=1;this.scale=1;this.marginStart;this.marginEnd;this.majorSteps=[1,2,5,10];this.minorSteps=[.25,.5,1,2];this.setRange(n,t,i,r,u)}t.prototype.setRange=function(n,t,i,r,u){this._start=n;this._end=t;n==t&&(this._start=n-.75,this._end=t+1);this.autoScale&&this.setMinimumStep(i,r,u);this.setFirst()};t.prototype.setMinimumStep=function(n,t){var l=this._end-this._start,s=l*1.1,a=n*(s/t),r=Math.round(Math.log(s)/Math.LN10),e=-1,u=Math.pow(10,r),h=0,o,f,i,c;for(r<0&&(h=r),o=!1,f=h;Math.abs(f)<=Math.abs(r);f++){for(u=Math.pow(10,f),i=0;i<this.minorSteps.length;i++)if(c=u*this.minorSteps[i],c>=a){o=!0;e=i;break}if(o==!0)break}this.stepIndex=e;this.scale=u;this.step=u*this.minorSteps[e]};t.prototype.first=function(){this.setFirst()};t.prototype.setFirst=function(){var n=this._start-this.scale*this.minorSteps[this.stepIndex],t=this._end+this.scale*this.minorSteps[this.stepIndex];this.marginEnd=this.roundToMinor(t);this.marginStart=this.roundToMinor(n);this.marginRange=this.marginEnd-this.marginStart;this.current=this.marginEnd};t.prototype.roundToMinor=function(n){var t=n-n%(this.scale*this.minorSteps[this.stepIndex]);return n%(this.scale*this.minorSteps[this.stepIndex])>.5*this.scale*this.minorSteps[this.stepIndex]?t+this.scale*this.minorSteps[this.stepIndex]:t};t.prototype.hasNext=function(){return this.current>=this.marginStart};t.prototype.next=function(){var n=this.current;this.current-=this.step;this.current==n&&(this.current=this._end)};t.prototype.previous=function(){this.current+=this.step;this.marginEnd+=this.step;this.marginRange=this.marginEnd-this.marginStart};t.prototype.getCurrent=function(){for(var n=""+Number(this.current).toPrecision(5),t=n.length-1;t>0;t--)if(n[t]=="0")n=n.slice(0,t);else if(n[t]=="."||n[t]==","){n=n.slice(0,t);break}else break;return n};t.prototype.snap=function(){};t.prototype.isMajor=function(){return this.current%(this.scale*this.majorSteps[this.stepIndex])==0};n.exports=t},function(n,t,i){function r(n,t){var i=s().hours(0).minutes(0).seconds(0).milliseconds(0);this.start=i.clone().add("days",-3).valueOf();this.end=i.clone().add("days",4).valueOf();this.body=n;this.defaultOptions={start:null,end:null,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10};this.options=u.extend({},this.defaultOptions);this.props={touch:{}};this.body.emitter.on("dragstart",this._onDragStart.bind(this));this.body.emitter.on("drag",this._onDrag.bind(this));this.body.emitter.on("dragend",this._onDragEnd.bind(this));this.body.emitter.on("hold",this._onHold.bind(this));this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this));this.body.emitter.on("DOMMouseScroll",this._onMouseWheel.bind(this));this.body.emitter.on("touch",this._onTouch.bind(this));this.body.emitter.on("pinch",this._onPinch.bind(this));this.setOptions(t)}function f(n){if(n!="horizontal"&&n!="vertical")throw new TypeError('Unknown direction "'+n+'". Choose "horizontal" or "vertical".');}function e(n,t){return{x:n.pageX-u.getAbsoluteLeft(t),y:n.pageY-u.getAbsoluteTop(t)}}var u=i(1),o=i(43),s=i(40),h=i(18);r.prototype=new h;r.prototype.setOptions=function(n){if(n)u.selectiveExtend(["direction","min","max","zoomMin","zoomMax","moveable","zoomable"],this.options,n),("start"in n||"end"in n)&&this.setRange(n.start,n.end)};r.prototype.setRange=function(n,t){var r=this._applyRange(n,t),i;r&&(i={start:new Date(this.start),end:new Date(this.end)},this.body.emitter.emit("rangechange",i),this.body.emitter.emit("rangechanged",i))};r.prototype._applyRange=function(n,t){var i=n!=null?u.convert(n,"Date").valueOf():this.start,r=t!=null?u.convert(t,"Date").valueOf():this.end,e=this.options.max!=null?u.convert(this.options.max,"Date").valueOf():null,o=this.options.min!=null?u.convert(this.options.min,"Date").valueOf():null,f,s,h,c;if(isNaN(i)||i===null)throw new Error('Invalid start "'+n+'"');if(isNaN(r)||r===null)throw new Error('Invalid end "'+t+'"');return r<i&&(r=i),o!==null&&i<o&&(f=o-i,i+=f,r+=f,e!=null&&r>e&&(r=e)),e!==null&&r>e&&(f=r-e,i-=f,r-=f,o!=null&&i<o&&(i=o)),this.options.zoomMin!==null&&(s=parseFloat(this.options.zoomMin),s<0&&(s=0),r-i<s&&(this.end-this.start===s?(i=this.start,r=this.end):(f=s-(r-i),i-=f/2,r+=f/2))),this.options.zoomMax!==null&&(h=parseFloat(this.options.zoomMax),h<0&&(h=0),r-i>h&&(this.end-this.start===h?(i=this.start,r=this.end):(f=r-i-h,i+=f/2,r-=f/2))),c=this.start!=i||this.end!=r,this.start=i,this.end=r,c};r.prototype.getRange=function(){return{start:this.start,end:this.end}};r.prototype.conversion=function(n){return r.conversion(this.start,this.end,n)};r.conversion=function(n,t,i){return i!=0&&t-n!=0?{offset:n,scale:i/(t-n)}:{offset:0,scale:1}};r.prototype._onDragStart=function(){this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.start=this.start,this.props.touch.end=this.end,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))};r.prototype._onDrag=function(n){var t;if(this.options.moveable&&(t=this.options.direction,f(t),this.props.touch.allowDragging)){var r=t=="horizontal"?n.gesture.deltaX:n.gesture.deltaY,u=this.props.touch.end-this.props.touch.start,e=t=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height,i=-r/e*u;this._applyRange(this.props.touch.start+i,this.props.touch.end+i);this.body.emitter.emit("rangechange",{start:new Date(this.start),end:new Date(this.end)})}};r.prototype._onDragEnd=function(){this.options.moveable&&this.props.touch.allowDragging&&(this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end)}))};r.prototype._onMouseWheel=function(n){var t,i;if(this.options.zoomable&&this.options.moveable){if(t=0,n.wheelDelta?t=n.wheelDelta/120:n.detail&&(t=-n.detail/3),t){i=t<0?1-t/5:1/(1+t/5);var r=o.fakeGesture(this,n),u=e(r.center,this.body.dom.center),f=this._pointerToDate(u);this.zoom(i,f)}n.preventDefault()}};r.prototype._onTouch=function(){this.props.touch.start=this.start;this.props.touch.end=this.end;this.props.touch.allowDragging=!0;this.props.touch.center=null};r.prototype._onHold=function(){this.props.touch.allowDragging=!1};r.prototype._onPinch=function(n){if(this.options.zoomable&&this.options.moveable&&(this.props.touch.allowDragging=!1,n.gesture.touches.length>1)){this.props.touch.center||(this.props.touch.center=e(n.gesture.center,this.body.dom.center));var i=1/n.gesture.scale,t=this._pointerToDate(this.props.touch.center),r=parseInt(t+(this.props.touch.start-t)*i),u=parseInt(t+(this.props.touch.end-t)*i);this.setRange(r,u)}};r.prototype._pointerToDate=function(n){var t,i=this.options.direction,r,u;return f(i),i=="horizontal"?(r=this.body.domProps.center.width,t=this.conversion(r),n.x/t.scale+t.offset):(u=this.body.domProps.center.height,t=this.conversion(u),n.y/t.scale+t.offset)};r.prototype.zoom=function(n,t){t==null&&(t=(this.start+this.end)/2);var i=t+(this.start-t)*n,r=t+(this.end-t)*n;this.setRange(i,r)};r.prototype.move=function(n){var t=this.end-this.start,i=this.start+t*n,r=this.end+t*n;this.start=i;this.end=r};r.prototype.moveTo=function(n){var i=(this.start+this.end)/2,t=i-n,r=this.start-t,u=this.end-t;this.setRange(r,u)};n.exports=r},function(n,t){var i=.001;t.orderByStart=function(n){n.sort(function(n,t){return n.data.start-t.data.start})};t.orderByEnd=function(n){n.sort(function(n,t){var i="end"in n.data?n.data.end:n.data.start,r="end"in t.data?t.data.end:t.data.start;return i-r})};t.stack=function(n,i,r){var u,s,f,e,h,c,o;if(r)for(u=0,s=n.length;u<s;u++)n[u].top=null;for(u=0,s=n.length;u<s;u++)if(f=n[u],f.top===null){f.top=i.axis;do{for(e=null,h=0,c=n.length;h<c;h++)if(o=n[h],o.top!==null&&o!==f&&t.collision(f,o,i.item)){e=o;break}e!=null&&(f.top=e.top+e.height+i.item.vertical)}while(e)}};t.nostack=function(n,t){for(var i=0,r=n.length;i<r;i++)n[i].top=t.axis};t.collision=function(n,t,r){return n.left-r.horizontal+i<t.left+t.width&&n.left+n.width+r.horizontal-i>t.left&&n.top-r.vertical+i<t.top+t.height&&n.top+n.height+r.vertical-i>t.top}},function(n,t,i){function r(n,t,i){this.current=new Date;this._start=new Date;this._end=new Date;this.autoScale=!0;this.scale=r.SCALE.DAY;this.step=1;this.setRange(n,t,i)}var u=i(40);r.SCALE={MILLISECOND:1,SECOND:2,MINUTE:3,HOUR:4,DAY:5,WEEKDAY:6,MONTH:7,YEAR:8};r.prototype.setRange=function(n,t,i){if(!(n instanceof Date)||!(t instanceof Date))throw"No legal start or end date in method setRange";this._start=n!=undefined?new Date(n.valueOf()):new Date;this._end=t!=undefined?new Date(t.valueOf()):new Date;this.autoScale&&this.setMinimumStep(i)};r.prototype.first=function(){this.current=new Date(this._start.valueOf());this.roundToMinor()};r.prototype.roundToMinor=function(){switch(this.scale){case r.SCALE.YEAR:this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step));this.current.setMonth(0);case r.SCALE.MONTH:this.current.setDate(1);case r.SCALE.DAY:case r.SCALE.WEEKDAY:this.current.setHours(0);case r.SCALE.HOUR:this.current.setMinutes(0);case r.SCALE.MINUTE:this.current.setSeconds(0);case r.SCALE.SECOND:this.current.setMilliseconds(0)}if(this.step!=1)switch(this.scale){case r.SCALE.MILLISECOND:this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case r.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case r.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case r.SCALE.HOUR:this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case r.SCALE.WEEKDAY:case r.SCALE.DAY:this.current.setDate(this.current.getDate()-1-(this.current.getDate()-1)%this.step+1);break;case r.SCALE.MONTH:this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case r.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step)}};r.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()};r.prototype.next=function(){var t=this.current.valueOf(),n;if(this.current.getMonth()<6)switch(this.scale){case r.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case r.SCALE.SECOND:this.current=new Date(this.current.valueOf()+this.step*1e3);break;case r.SCALE.MINUTE:this.current=new Date(this.current.valueOf()+this.step*6e4);break;case r.SCALE.HOUR:this.current=new Date(this.current.valueOf()+this.step*36e5);n=this.current.getHours();this.current.setHours(n-n%this.step);break;case r.SCALE.WEEKDAY:case r.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case r.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case r.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}else switch(this.scale){case r.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case r.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()+this.step);break;case r.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()+this.step);break;case r.SCALE.HOUR:this.current.setHours(this.current.getHours()+this.step);break;case r.SCALE.WEEKDAY:case r.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case r.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case r.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}if(this.step!=1)switch(this.scale){case r.SCALE.MILLISECOND:this.current.getMilliseconds()<this.step&&this.current.setMilliseconds(0);break;case r.SCALE.SECOND:this.current.getSeconds()<this.step&&this.current.setSeconds(0);break;case r.SCALE.MINUTE:this.current.getMinutes()<this.step&&this.current.setMinutes(0);break;case r.SCALE.HOUR:this.current.getHours()<this.step&&this.current.setHours(0);break;case r.SCALE.WEEKDAY:case r.SCALE.DAY:this.current.getDate()<this.step+1&&this.current.setDate(1);break;case r.SCALE.MONTH:this.current.getMonth()<this.step&&this.current.setMonth(0)}this.current.valueOf()==t&&(this.current=new Date(this._end.valueOf()))};r.prototype.getCurrent=function(){return this.current};r.prototype.setScale=function(n,t){this.scale=n;t>0&&(this.step=t);this.autoScale=!1};r.prototype.setAutoScale=function(n){this.autoScale=n};r.prototype.setMinimumStep=function(n){if(n!=undefined){var t=31104e6,o=2592e6,u=864e5,s=36e5,f=6e4,e=1e3,i=1;t*1e3>n&&(this.scale=r.SCALE.YEAR,this.step=1e3);t*500>n&&(this.scale=r.SCALE.YEAR,this.step=500);t*100>n&&(this.scale=r.SCALE.YEAR,this.step=100);t*50>n&&(this.scale=r.SCALE.YEAR,this.step=50);t*10>n&&(this.scale=r.SCALE.YEAR,this.step=10);t*5>n&&(this.scale=r.SCALE.YEAR,this.step=5);t>n&&(this.scale=r.SCALE.YEAR,this.step=1);o*3>n&&(this.scale=r.SCALE.MONTH,this.step=3);o>n&&(this.scale=r.SCALE.MONTH,this.step=1);u*5>n&&(this.scale=r.SCALE.DAY,this.step=5);u*2>n&&(this.scale=r.SCALE.DAY,this.step=2);u>n&&(this.scale=r.SCALE.DAY,this.step=1);u/2>n&&(this.scale=r.SCALE.WEEKDAY,this.step=1);s*4>n&&(this.scale=r.SCALE.HOUR,this.step=4);s>n&&(this.scale=r.SCALE.HOUR,this.step=1);f*15>n&&(this.scale=r.SCALE.MINUTE,this.step=15);f*10>n&&(this.scale=r.SCALE.MINUTE,this.step=10);f*5>n&&(this.scale=r.SCALE.MINUTE,this.step=5);f>n&&(this.scale=r.SCALE.MINUTE,this.step=1);e*15>n&&(this.scale=r.SCALE.SECOND,this.step=15);e*10>n&&(this.scale=r.SCALE.SECOND,this.step=10);e*5>n&&(this.scale=r.SCALE.SECOND,this.step=5);e>n&&(this.scale=r.SCALE.SECOND,this.step=1);i*200>n&&(this.scale=r.SCALE.MILLISECOND,this.step=200);i*100>n&&(this.scale=r.SCALE.MILLISECOND,this.step=100);i*50>n&&(this.scale=r.SCALE.MILLISECOND,this.step=50);i*10>n&&(this.scale=r.SCALE.MILLISECOND,this.step=10);i*5>n&&(this.scale=r.SCALE.MILLISECOND,this.step=5);i>n&&(this.scale=r.SCALE.MILLISECOND,this.step=1)}};r.prototype.snap=function(n){var t=new Date(n.valueOf()),u,i;if(this.scale==r.SCALE.YEAR)u=t.getFullYear()+Math.round(t.getMonth()/12),t.setFullYear(Math.round(u/this.step)*this.step),t.setMonth(0),t.setDate(0),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);else if(this.scale==r.SCALE.MONTH)t.getDate()>15?(t.setDate(1),t.setMonth(t.getMonth()+1)):t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);else if(this.scale==r.SCALE.DAY){switch(this.step){case 5:case 2:t.setHours(Math.round(t.getHours()/24)*24);break;default:t.setHours(Math.round(t.getHours()/12)*12)}t.setMinutes(0);t.setSeconds(0);t.setMilliseconds(0)}else if(this.scale==r.SCALE.WEEKDAY){switch(this.step){case 5:case 2:t.setHours(Math.round(t.getHours()/12)*12);break;default:t.setHours(Math.round(t.getHours()/6)*6)}t.setMinutes(0);t.setSeconds(0);t.setMilliseconds(0)}else if(this.scale==r.SCALE.HOUR){switch(this.step){case 4:t.setMinutes(Math.round(t.getMinutes()/60)*60);break;default:t.setMinutes(Math.round(t.getMinutes()/30)*30)}t.setSeconds(0);t.setMilliseconds(0)}else if(this.scale==r.SCALE.MINUTE){switch(this.step){case 15:case 10:t.setMinutes(Math.round(t.getMinutes()/5)*5);t.setSeconds(0);break;case 5:t.setSeconds(Math.round(t.getSeconds()/60)*60);break;default:t.setSeconds(Math.round(t.getSeconds()/30)*30)}t.setMilliseconds(0)}else if(this.scale==r.SCALE.SECOND)switch(this.step){case 15:case 10:t.setSeconds(Math.round(t.getSeconds()/5)*5);t.setMilliseconds(0);break;case 5:t.setMilliseconds(Math.round(t.getMilliseconds()/1e3)*1e3);break;default:t.setMilliseconds(Math.round(t.getMilliseconds()/500)*500)}else this.scale==r.SCALE.MILLISECOND&&(i=this.step>5?this.step/2:1,t.setMilliseconds(Math.round(t.getMilliseconds()/i)*i));return t};r.prototype.isMajor=function(){switch(this.scale){case r.SCALE.MILLISECOND:return this.current.getMilliseconds()==0;case r.SCALE.SECOND:return this.current.getSeconds()==0;case r.SCALE.MINUTE:return this.current.getHours()==0&&this.current.getMinutes()==0;case r.SCALE.HOUR:return this.current.getHours()==0;case r.SCALE.WEEKDAY:case r.SCALE.DAY:return this.current.getDate()==1;case r.SCALE.MONTH:return this.current.getMonth()==0;case r.SCALE.YEAR:return!1;default:return!1}};r.prototype.getLabelMinor=function(n){n==undefined&&(n=this.current);switch(this.scale){case r.SCALE.MILLISECOND:return u(n).format("SSS");case r.SCALE.SECOND:return u(n).format("s");case r.SCALE.MINUTE:return u(n).format("HH:mm");case r.SCALE.HOUR:return u(n).format("HH:mm");case r.SCALE.WEEKDAY:return u(n).format("ddd D");case r.SCALE.DAY:return u(n).format("D");case r.SCALE.MONTH:return u(n).format("MMM");case r.SCALE.YEAR:return u(n).format("YYYY");default:return""}};r.prototype.getLabelMajor=function(n){n==undefined&&(n=this.current);switch(this.scale){case r.SCALE.MILLISECOND:return u(n).format("HH:mm:ss");case r.SCALE.SECOND:return u(n).format("D MMMM HH:mm");case r.SCALE.MINUTE:case r.SCALE.HOUR:return u(n).format("ddd D MMMM");case r.SCALE.WEEKDAY:case r.SCALE.DAY:return u(n).format("MMMM YYYY");case r.SCALE.MONTH:return u(n).format("YYYY");case r.SCALE.YEAR:return"";default:return""}};n.exports=r},function(n){function t(){this.options=null;this.props=null}t.prototype.setOptions=function(n){n&&util.extend(this.options,n)};t.prototype.redraw=function(){return!1};t.prototype.destroy=function(){};t.prototype._isResized=function(){var n=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,n};n.exports=t},function(n,t,i){function r(n,t){this.body=n;this.defaultOptions={showCurrentTime:!0};this.options=u.extend({},this.defaultOptions);this._create();this.setOptions(t)}var u=i(1),f=i(18);r.prototype=new f;r.prototype._create=function(){var n=document.createElement("div");n.className="currenttime";n.style.position="absolute";n.style.top="0px";n.style.height="100%";this.bar=n};r.prototype.destroy=function(){this.options.showCurrentTime=!1;this.redraw();this.body=null};r.prototype.setOptions=function(n){n&&u.selectiveExtend(["showCurrentTime"],this.options,n)};r.prototype.redraw=function(){var n,t,i;return this.options.showCurrentTime?(n=this.body.dom.backgroundVertical,this.bar.parentNode!=n&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),n.appendChild(this.bar),this.start()),t=new Date,i=this.body.util.toScreen(t),this.bar.style.left=i+"px",this.bar.title="Current time: "+t):(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop()),!1};r.prototype.start=function(){function t(){n.stop();var r=n.body.range.conversion(n.body.domProps.center.width).scale,i=1/r/10;i<30&&(i=30);i>1e3&&(i=1e3);n.redraw();n.currentTimeTimer=setTimeout(t,i)}var n=this;t()};r.prototype.stop=function(){this.currentTimeTimer!==undefined&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)};n.exports=r},function(n,t,i){function r(n,t){this.body=n;this.defaultOptions={showCustomTime:!1};this.options=u.extend({},this.defaultOptions);this.customTime=new Date;this.eventParams={};this._create();this.setOptions(t)}var f=i(41),u=i(1),e=i(18);r.prototype=new e;r.prototype.setOptions=function(n){n&&u.selectiveExtend(["showCustomTime"],this.options,n)};r.prototype._create=function(){var n=document.createElement("div"),t;n.className="customtime";n.style.position="absolute";n.style.top="0px";n.style.height="100%";this.bar=n;t=document.createElement("div");t.style.position="relative";t.style.top="0px";t.style.left="-10px";t.style.height="100%";t.style.width="20px";n.appendChild(t);this.hammer=f(n,{prevent_default:!0});this.hammer.on("dragstart",this._onDragStart.bind(this));this.hammer.on("drag",this._onDrag.bind(this));this.hammer.on("dragend",this._onDragEnd.bind(this))};r.prototype.destroy=function(){this.options.showCustomTime=!1;this.redraw();this.hammer.enable(!1);this.hammer=null;this.body=null};r.prototype.redraw=function(){var n,t;return this.options.showCustomTime?(n=this.body.dom.backgroundVertical,this.bar.parentNode!=n&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),n.appendChild(this.bar)),t=this.body.util.toScreen(this.customTime),this.bar.style.left=t+"px",this.bar.title="Time: "+this.customTime):this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),!1};r.prototype.setCustomTime=function(n){this.customTime=new Date(n.valueOf());this.redraw()};r.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())};r.prototype._onDragStart=function(n){this.eventParams.dragging=!0;this.eventParams.customTime=this.customTime;n.stopPropagation();n.preventDefault()};r.prototype._onDrag=function(n){if(this.eventParams.dragging){var t=n.gesture.deltaX,i=this.body.util.toScreen(this.eventParams.customTime)+t,r=this.body.util.toTime(i);this.setCustomTime(r);this.body.emitter.emit("timechange",{time:new Date(this.customTime.valueOf())});n.stopPropagation();n.preventDefault()}};r.prototype._onDragEnd=function(n){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{time:new Date(this.customTime.valueOf())}),n.stopPropagation(),n.preventDefault())};n.exports=r},function(n,t,i){function r(n,t,i){this.id=f.randomUUID();this.body=n;this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,icons:!0,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0};this.linegraphSVG=i;this.props={};this.DOMelements={lines:{},labels:{}};this.dom={};this.range={start:0,end:0};this.options=f.extend({},this.defaultOptions);this.conversionFactor=1;this.setOptions(t);this.width=Number((""+this.options.width).replace("px",""));this.minWidth=this.width;this.height=this.linegraphSVG.offsetHeight;this.stepPixels=25;this.stepPixelsForced=25;this.lineOffset=0;this.master=!0;this.svgElements={};this.groups={};this.amountOfGroups=0;this._create()}var f=i(1),u=i(2),e=i(18),o=i(14);r.prototype=new e;r.prototype.addGroup=function(n,t){this.groups.hasOwnProperty(n)||(this.groups[n]=t);this.amountOfGroups+=1};r.prototype.updateGroup=function(n,t){this.groups[n]=t};r.prototype.removeGroup=function(n){this.groups.hasOwnProperty(n)&&(delete this.groups[n],this.amountOfGroups-=1)};r.prototype.setOptions=function(n){var t,i;n&&(t=!1,this.options.orientation!=n.orientation&&n.orientation!==undefined&&(t=!0),i=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible"],f.selectiveExtend(i,this.options,n),this.minWidth=Number((""+this.options.width).replace("px","")),t==!0&&this.dom.frame&&(this.hide(),this.show()))};r.prototype._create=function(){this.dom.frame=document.createElement("div");this.dom.frame.style.width=this.options.width;this.dom.frame.style.height=this.height;this.dom.lineContainer=document.createElement("div");this.dom.lineContainer.style.width="100%";this.dom.lineContainer.style.height=this.height;this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.style.position="absolute";this.svg.style.top="0px";this.svg.style.height="100%";this.svg.style.width="100%";this.svg.style.display="block";this.dom.frame.appendChild(this.svg)};r.prototype._redrawGroupIcons=function(){var t;u.prepareElements(this.svgElements);var r,f=this.options.iconWidth,i=15,n=4,e=n+.5*i;r=this.options.orientation=="left"?n:this.width-f-n;for(t in this.groups)this.groups.hasOwnProperty(t)&&this.groups[t].visible==!0&&(this.groups[t].drawIcon(r,e,this.svgElements,this.svg,f,i),e+=i+n);u.cleanupElements(this.svgElements)};r.prototype.show=function(){this.dom.frame.parentNode||(this.options.orientation=="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame));this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)};r.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame);this.dom.lineContainer.parentNode&&this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)};r.prototype.setRange=function(n,t){this.range.start=n;this.range.end=t};r.prototype.redraw=function(){var r=!1,u=0,i,t,n;for(i in this.groups)this.groups.hasOwnProperty(i)&&this.groups[i].visible==!0&&u++;if(this.amountOfGroups==0||u==0)this.hide();else{this.show();this.height=Number(this.linegraphSVG.style.height.replace("px",""));this.dom.lineContainer.style.height=this.height+"px";this.width=this.options.visible==!0?Number((""+this.options.width).replace("px","")):0;t=this.props;n=this.dom.frame;n.className="dataaxis";this._calculateCharSize();var f=this.options.orientation,e=this.options.showMinorLabels,o=this.options.showMajorLabels;t.minorLabelHeight=e?t.minorCharHeight:0;t.majorLabelHeight=o?t.majorCharHeight:0;t.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset;t.minorLineHeight=1;t.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset;t.majorLineHeight=1;f=="left"?(n.style.top="0",n.style.left="0",n.style.bottom="",n.style.width=this.width+"px",n.style.height=this.height+"px"):(n.style.top="",n.style.bottom="0",n.style.left="0",n.style.width=this.width+"px",n.style.height=this.height+"px");r=this._redrawLabels();this.options.icons==!0&&this._redrawGroupIcons()}return r};r.prototype._redrawLabels=function(){var t,r,c,l,a,f,i,h,e;u.prepareElements(this.DOMelements.lines);u.prepareElements(this.DOMelements.labels);var s=this.options.orientation,v=this.master?this.props.majorCharHeight||10:this.stepPixelsForced,n=new o(this.range.start,this.range.end,v,this.dom.frame.offsetHeight);if(this.step=n,n.first(),t=this.dom.frame.offsetHeight/(n.marginRange/n.step+1),this.stepPixels=t,r=this.height/t,c=0,this.master==!1){for(t=this.stepPixelsForced,c=Math.round(this.height/t-r),l=0;l<.5*c;l++)n.previous();r=this.height/t}for(this.valueAtZero=n.marginEnd,a=0,f=1,n.next(),this.maxLabelSize=0,i=0;f<Math.round(r);)i=Math.round(f*t),a=f*t,h=n.isMajor(),(this.options.showMinorLabels&&h==!1||this.master==!1&&this.options.showMinorLabels==!0)&&this._redrawLabel(i-2,n.getCurrent(),s,"yAxis minor",this.props.minorCharHeight),h&&this.options.showMajorLabels&&this.master==!0||this.options.showMinorLabels==!1&&this.master==!1&&h==!0?(i>=0&&this._redrawLabel(i-2,n.getCurrent(),s,"yAxis major",this.props.majorCharHeight),this._redrawLine(i,s,"grid horizontal major",this.options.majorLinesOffset,this.props.majorLineWidth)):this._redrawLine(i,s,"grid horizontal minor",this.options.minorLinesOffset,this.props.minorLineWidth),n.next(),f++;return this.conversionFactor=a/((r-1)*n.step),e=this.options.icons==!0?this.options.iconWidth+this.options.labelOffsetX+15:this.options.labelOffsetX+15,this.maxLabelSize>this.width-e&&this.options.visible==!0?(this.width=this.maxLabelSize+e,this.options.width=this.width+"px",u.cleanupElements(this.DOMelements.lines),u.cleanupElements(this.DOMelements.labels),this.redraw(),!0):this.maxLabelSize<this.width-e&&this.options.visible==!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+e),this.options.width=this.width+"px",u.cleanupElements(this.DOMelements.lines),u.cleanupElements(this.DOMelements.labels),this.redraw(),!0):(u.cleanupElements(this.DOMelements.lines),u.cleanupElements(this.DOMelements.labels),!1)};r.prototype._redrawLabel=function(n,t,i,r,f){var e=u.getDOMElement("div",this.DOMelements.labels,this.dom.frame),o;e.className=r;e.innerHTML=t;i=="left"?(e.style.left="-"+this.options.labelOffsetX+"px",e.style.textAlign="right"):(e.style.right="-"+this.options.labelOffsetX+"px",e.style.textAlign="left");e.style.top=n-.5*f+this.options.labelOffsetY+"px";t+="";o=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<t.length*o&&(this.maxLabelSize=t.length*o)};r.prototype._redrawLine=function(n,t,i,r,f){if(this.master==!0){var e=u.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);e.className=i;e.innerHTML="";t=="left"?e.style.left=this.width-r+"px":e.style.right=this.width-r+"px";e.style.width=f+"px";e.style.top=n+"px"}};r.prototype.convertValue=function(n){var t=this.valueAtZero-n;return t*this.conversionFactor};r.prototype._calculateCharSize=function(){var i,n,r,t;"minorCharHeight"in this.props||(i=document.createTextNode("0"),n=document.createElement("DIV"),n.className="yAxis minor measure",n.appendChild(i),this.dom.frame.appendChild(n),this.props.minorCharHeight=n.clientHeight,this.props.minorCharWidth=n.clientWidth,this.dom.frame.removeChild(n));"majorCharHeight"in this.props||(r=document.createTextNode("0"),t=document.createElement("DIV"),t.className="yAxis major measure",t.appendChild(r),this.dom.frame.appendChild(t),this.props.majorCharHeight=t.clientHeight,this.props.majorCharWidth=t.clientWidth,this.dom.frame.removeChild(t))};r.prototype.snap=function(n){return this.step.snap(n)};n.exports=r},function(n,t,i){function r(n,t,i,r){this.id=t;this.options=f.selectiveBridgeObject(["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","catmullRom"],i);this.usingDefaultStyle=n.className===undefined;this.groupsUsingDefaultStyles=r;this.zeroPosition=0;this.update(n);this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1);this.itemsData=[];this.visible=n.visible===undefined?!0:n.visible}var f=i(1),u=i(2);r.prototype.setItems=function(n){n!=null?(this.itemsData=n,this.options.sort==!0&&this.itemsData.sort(function(n,t){return n.x-t.x})):this.itemsData=[]};r.prototype.setZeroPosition=function(n){this.zeroPosition=n};r.prototype.setOptions=function(n){if(n!==undefined)f.selectiveDeepExtend(["sampling","style","sort","yAxisOrientation","barChart"],this.options,n),f.mergeOptions(this.options,n,"catmullRom"),f.mergeOptions(this.options,n,"drawPoints"),f.mergeOptions(this.options,n,"shaded"),n.catmullRom&&typeof n.catmullRom=="object"&&n.catmullRom.parametrization&&(n.catmullRom.parametrization=="uniform"?this.options.catmullRom.alpha=0:n.catmullRom.parametrization=="chordal"?this.options.catmullRom.alpha=1:(this.options.catmullRom.parametrization="centripetal",this.options.catmullRom.alpha=.5))};r.prototype.update=function(n){this.group=n;this.content=n.content||"graph";this.className=n.className||this.className||"graphGroup"+this.groupsUsingDefaultStyles[0]%10;this.visible=n.visible===undefined?!0:n.visible;this.setOptions(n.options)};r.prototype.drawIcon=function(n,t,i,r,f,e){var o=e*.5,l,c,s=u.getSVGElement("rect",i,r);if(s.setAttributeNS(null,"x",n),s.setAttributeNS(null,"y",t-o),s.setAttributeNS(null,"width",f),s.setAttributeNS(null,"height",2*o),s.setAttributeNS(null,"class","outline"),this.options.style=="line")l=u.getSVGElement("path",i,r),l.setAttributeNS(null,"class",this.className),l.setAttributeNS(null,"d","M"+n+","+t+" L"+(n+f)+","+t+""),this.options.shaded.enabled==!0&&(c=u.getSVGElement("path",i,r),this.options.shaded.orientation=="top"?c.setAttributeNS(null,"d","M"+n+", "+(t-o)+"L"+n+","+t+" L"+(n+f)+","+t+" L"+(n+f)+","+(t-o)):c.setAttributeNS(null,"d","M"+n+","+t+" L"+n+","+(t+o)+" L"+(n+f)+","+(t+o)+"L"+(n+f)+","+t),c.setAttributeNS(null,"class",this.className+" iconFill")),this.options.drawPoints.enabled==!0&&u.drawPoint(n+.5*f,t,this,i,r);else{var h=Math.round(.3*f),a=Math.round(.4*e),v=Math.round(.75*e),y=Math.round((f-2*h)/3);u.drawBar(n+.5*h+y,t+o-a-1,h,a,this.className+" bar",i,r);u.drawBar(n+1.5*h+y+2,t+o-v-1,h,v,this.className+" bar",i,r)}};r.prototype.getLegend=function(n,t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");return this.drawIcon(0,.5*t,[],i,n,t),{icon:i,label:this.content,orientation:this.options.yAxisOrientation}};n.exports=r},function(n,t,i){function u(n,t,i){this.groupId=n;this.itemSet=i;this.dom={};this.props={label:{width:0,height:0}};this.className=null;this.items={};this.visibleItems=[];this.orderedItems={byStart:[],byEnd:[]};this._create();this.setData(t)}var r=i(1),f=i(16),e=i(31);u.prototype._create=function(){var i=document.createElement("div"),n,t;i.className="vlabel";this.dom.label=i;n=document.createElement("div");n.className="inner";i.appendChild(n);this.dom.inner=n;t=document.createElement("div");t.className="group";t["timeline-group"]=this;this.dom.foreground=t;this.dom.background=document.createElement("div");this.dom.background.className="group";this.dom.axis=document.createElement("div");this.dom.axis.className="group";this.dom.marker=document.createElement("div");this.dom.marker.style.visibility="hidden";this.dom.marker.innerHTML="?";this.dom.background.appendChild(this.dom.marker)};u.prototype.setData=function(n){var i=n&&n.content,t;i instanceof Element?this.dom.inner.appendChild(i):this.dom.inner.innerHTML=i!==undefined&&i!==null?i:this.groupId||"";this.dom.label.title=n&&n.title||"";this.dom.inner.firstChild?r.removeClassName(this.dom.inner,"hidden"):r.addClassName(this.dom.inner,"hidden");t=n&&n.className||null;t!=this.className&&(this.dom.label.className="vlabel",this.dom.foreground.className="group",this.dom.background.className="group",this.dom.axis.className="group",r.addClassName(this.dom.label,t),r.addClassName(this.dom.foreground,t),r.addClassName(this.dom.background,t),r.addClassName(this.dom.axis,t))};u.prototype.getLabelWidth=function(){return this.props.label.width};u.prototype.redraw=function(n,t,i){var e=!1,a,u,o,s,h,v,c,l,y,p;for(this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,n),a=this.dom.marker.clientHeight,a!=this.lastMarkerHeight&&(this.lastMarkerHeight=a,r.forEach(this.items,function(n){n.dirty=!0;n.displayed&&n.redraw()}),i=!0),this.itemSet.options.stack?f.stack(this.visibleItems,t,i):f.nostack(this.visibleItems,t),o=this.visibleItems,o.length?(s=o[0].top,h=o[0].top+o[0].height,r.forEach(o,function(n){s=Math.min(s,n.top);h=Math.max(h,n.top+n.height)}),s>t.axis&&(v=s-t.axis,h-=v,r.forEach(o,function(n){n.top-=v})),u=h+t.item.vertical/2):u=t.axis+t.item.vertical,u=Math.max(u,this.props.label.height),c=this.dom.foreground,this.top=c.offsetTop,this.left=c.offsetLeft,this.width=c.offsetWidth,e=r.updateProperty(this,"height",u)||e,e=r.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||e,e=r.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||e,this.dom.background.style.height=u+"px",this.dom.foreground.style.height=u+"px",this.dom.label.style.height=u+"px",l=0,y=this.visibleItems.length;l<y;l++)p=this.visibleItems[l],p.repositionY();return e};u.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label);this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground);this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background);this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)};u.prototype.hide=function(){var r=this.dom.label,n,t,i;r.parentNode&&r.parentNode.removeChild(r);n=this.dom.foreground;n.parentNode&&n.parentNode.removeChild(n);t=this.dom.background;t.parentNode&&t.parentNode.removeChild(t);i=this.dom.axis;i.parentNode&&i.parentNode.removeChild(i)};u.prototype.add=function(n){if(this.items[n.id]=n,n.setParent(this),this.visibleItems.indexOf(n)==-1){var t=this.itemSet.body.range;this._checkIfVisible(n,this.visibleItems,t)}};u.prototype.remove=function(n){delete this.items[n.id];n.setParent(this.itemSet);var t=this.visibleItems.indexOf(n);t!=-1&&this.visibleItems.splice(t,1)};u.prototype.removeFromDataSet=function(n){this.itemSet.removeItem(n.id)};u.prototype.order=function(){var n=r.toArray(this.items);this.orderedItems.byStart=n;this.orderedItems.byEnd=this._constructByEndArray(n);f.orderByStart(this.orderedItems.byStart);f.orderByEnd(this.orderedItems.byEnd)};u.prototype._constructByEndArray=function(n){for(var i=[],t=0;t<n.length;t++)n[t]instanceof e&&i.push(n[t]);return i};u.prototype._updateVisibleItems=function(n,t,i){var e,f=[],u,o;if(t.length>0)for(u=0;u<t.length;u++)this._checkIfVisible(t[u],f,i);if(e=f.length==0?r.binarySearch(n.byStart,i,"data","start"):n.byStart.indexOf(f[0]),o=r.binarySearch(n.byEnd,i,"data","end"),e!=-1){for(u=e;u>=0;u--)if(this._checkIfInvisible(n.byStart[u],f,i))break;for(u=e+1;u<n.byStart.length;u++)if(this._checkIfInvisible(n.byStart[u],f,i))break}if(o!=-1){for(u=o;u>=0;u--)if(this._checkIfInvisible(n.byEnd[u],f,i))break;for(u=o+1;u<n.byEnd.length;u++)if(this._checkIfInvisible(n.byEnd[u],f,i))break}return f};u.prototype._checkIfInvisible=function(n,t,i){return n.isVisible(i)?(n.displayed||n.show(),n.repositionX(),t.indexOf(n)==-1&&t.push(n),!1):(n.displayed&&n.hide(),!0)};u.prototype._checkIfVisible=function(n,t,i){n.isVisible(i)?(n.displayed||n.show(),n.repositionX(),t.push(n)):n.displayed&&n.hide()};n.exports=u},function(n,t,i){function r(n,t){this.body=n;this.defaultOptions={type:null,orientation:"bottom",align:"center",stack:!0,groupOrder:null,selectable:!0,editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1},onAdd:function(n,t){t(n)},onUpdate:function(n,t){t(n)},onMove:function(n,t){t(n)},onRemove:function(n,t){t(n)},margin:{item:{horizontal:10,vertical:10},axis:20},padding:5};this.options=u.extend({},this.defaultOptions);this.itemOptions={type:{start:"Date",end:"Date"}};this.conversion={toScreen:n.util.toScreen,toTime:n.util.toTime};this.dom={};this.props={};this.hammer=null;var i=this;this.itemsData=null;this.groupsData=null;this.itemListeners={add:function(n,t){i._onAdd(t.items)},update:function(n,t){i._onUpdate(t.items)},remove:function(n,t){i._onRemove(t.items)}};this.groupListeners={add:function(n,t){i._onAddGroups(t.items)},update:function(n,t){i._onUpdateGroups(t.items)},remove:function(n,t){i._onRemoveGroups(t.items)}};this.items={};this.groups={};this.groupIds=[];this.selection=[];this.stackDirty=!0;this.touchParams={};this._create();this.setOptions(t)}var c=i(41),u=i(1),e=i(3),o=i(4),l=i(18),s=i(23),a=i(28),v=i(30),h=i(31),f="__ungrouped__";r.prototype=new l;r.types={box:a,range:h,point:v};r.prototype._create=function(){var n=document.createElement("div"),t,i,r,u;n.className="itemset";n["timeline-itemset"]=this;this.dom.frame=n;t=document.createElement("div");t.className="background";n.appendChild(t);this.dom.background=t;i=document.createElement("div");i.className="foreground";n.appendChild(i);this.dom.foreground=i;r=document.createElement("div");r.className="axis";this.dom.axis=r;u=document.createElement("div");u.className="labelset";this.dom.labelSet=u;this._updateUngrouped();this.hammer=c(this.body.dom.centerContainer,{prevent_default:!0});this.hammer.on("touch",this._onTouch.bind(this));this.hammer.on("dragstart",this._onDragStart.bind(this));this.hammer.on("drag",this._onDrag.bind(this));this.hammer.on("dragend",this._onDragEnd.bind(this));this.hammer.on("tap",this._onSelectItem.bind(this));this.hammer.on("hold",this._onMultiSelectItem.bind(this));this.hammer.on("doubletap",this._onAddItem.bind(this));this.show()};r.prototype.setOptions=function(n){var t,i;n&&(t=["type","align","orientation","padding","stack","selectable","groupOrder"],u.selectiveExtend(t,this.options,n),"margin"in n&&(typeof n.margin=="number"?(this.options.margin.axis=n.margin,this.options.margin.item.horizontal=n.margin,this.options.margin.item.vertical=n.margin):typeof n.margin=="object"&&(u.selectiveExtend(["axis"],this.options.margin,n.margin),"item"in n.margin&&(typeof n.margin.item=="number"?(this.options.margin.item.horizontal=n.margin.item,this.options.margin.item.vertical=n.margin.item):typeof n.margin.item=="object"&&u.selectiveExtend(["horizontal","vertical"],this.options.margin.item,n.margin.item)))),"editable"in n&&(typeof n.editable=="boolean"?(this.options.editable.updateTime=n.editable,this.options.editable.updateGroup=n.editable,this.options.editable.add=n.editable,this.options.editable.remove=n.editable):typeof n.editable=="object"&&u.selectiveExtend(["updateTime","updateGroup","add","remove"],this.options.editable,n.editable)),i=function(t){if(t in n){var i=n[t];if(!(i instanceof Function))throw new Error("option "+t+" must be a function "+t+"(item, callback)");this.options[t]=i}}.bind(this),["onAdd","onUpdate","onRemove","onMove"].forEach(i),this.markDirty())};r.prototype.markDirty=function(){this.groupIds=[];this.stackDirty=!0};r.prototype.destroy=function(){this.hide();this.setItems(null);this.setGroups(null);this.hammer=null;this.body=null;this.conversion=null};r.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame);this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis);this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)};r.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame);this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis);this.dom.labelSet.parentNode||this.body.dom.left.appendChild(this.dom.labelSet)};r.prototype.setSelection=function(n){var t,u,r,i;if(n){if(!Array.isArray(n))throw new TypeError("Array expected");for(t=0,u=this.selection.length;t<u;t++)r=this.selection[t],i=this.items[r],i&&i.unselect();for(this.selection=[],t=0,u=n.length;t<u;t++)r=n[t],i=this.items[r],i&&(this.selection.push(r),i.select())}};r.prototype.getSelection=function(){return this.selection.concat([])};r.prototype.getVisibleItems=function(){var u=this.body.range.getRange(),o=this.body.util.toScreen(u.start),s=this.body.util.toScreen(u.end),f=[],i,e,r,t,n;for(i in this.groups)if(this.groups.hasOwnProperty(i))for(e=this.groups[i],r=e.visibleItems,t=0;t<r.length;t++)n=r[t],n.left<s&&n.left+n.width>o&&f.push(n.id);return f};r.prototype._deselect=function(n){for(var i=this.selection,t=0,r=i.length;t<r;t++)if(i[t]==n){i.splice(t,1);break}};r.prototype.redraw=function(){var n=this.options.margin,f=this.body.range,s=u.option.asSize,e=this.options,c=e.orientation,t=!1,i=this.dom.frame,l=e.editable.updateTime||e.editable.updateGroup,o,h;i.className="itemset"+(l?" editable":"");t=this._orderGroups()||t;o=f.end-f.start;h=o!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth;h&&(this.stackDirty=!0);this.lastVisibleInterval=o;this.props.lastWidth=this.props.width;var a=this.stackDirty,v=this._firstGroup(),y={item:n.item,axis:n.axis},p={item:n.item,axis:n.item.vertical/2},r=0,w=n.axis+n.item.vertical;return u.forEach(this.groups,function(n){var i=n==v?y:p,u=n.redraw(f,i,a);t=u||t;r+=n.height}),r=Math.max(r,w),this.stackDirty=!1,i.style.height=s(r),this.props.top=i.offsetTop,this.props.left=i.offsetLeft,this.props.width=i.offsetWidth,this.props.height=r,this.dom.axis.style.top=s(c=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.dom.axis.style.left=this.body.domProps.border.left+"px",t=this._isResized()||t};r.prototype._firstGroup=function(){var n=this.options.orientation=="top"?0:this.groupIds.length-1,t=this.groupIds[n],i=this.groups[t]||this.groups[f];return i||null};r.prototype._updateUngrouped=function(){var n=this.groups[f],i,r,t;if(this.groupsData)n&&(n.hide(),delete this.groups[f]);else if(!n){i=null;r=null;n=new s(i,r,this);this.groups[f]=n;for(t in this.items)this.items.hasOwnProperty(t)&&n.add(this.items[t]);n.show()}};r.prototype.getLabelSet=function(){return this.dom.labelSet};r.prototype.setItems=function(n){var f=this,t,i=this.itemsData,r;if(n)if(n instanceof e||n instanceof o)this.itemsData=n;else throw new TypeError("Data must be an instance of DataSet or DataView");else this.itemsData=null;i&&(u.forEach(this.itemListeners,function(n,t){i.off(t,n)}),t=i.getIds(),this._onRemove(t));this.itemsData&&(r=this.id,u.forEach(this.itemListeners,function(n,t){f.itemsData.on(t,n,r)}),t=this.itemsData.getIds(),this._onAdd(t),this._updateUngrouped())};r.prototype.getItems=function(){return this.itemsData};r.prototype.setGroups=function(n){var i=this,t,r;if(this.groupsData&&(u.forEach(this.groupListeners,function(n,t){i.groupsData.unsubscribe(t,n)}),t=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(t)),n)if(n instanceof e||n instanceof o)this.groupsData=n;else throw new TypeError("Data must be an instance of DataSet or DataView");else this.groupsData=null;this.groupsData&&(r=this.id,u.forEach(this.groupListeners,function(n,t){i.groupsData.on(t,n,r)}),t=this.groupsData.getIds(),this._onAddGroups(t));this._updateUngrouped();this._order();this.body.emitter.emit("change")};r.prototype.getGroups=function(){return this.groupsData};r.prototype.removeItem=function(n){var t=this.itemsData.get(n),i=this.itemsData.getDataSet();if(t)this.options.onRemove(t,function(t){t&&i.remove(n)})};r.prototype._onUpdate=function(n){var t=this;n.forEach(function(n){var u=t.itemsData.get(n,t.itemOptions),i=t.items[n],e=u.type||t.options.type||(u.end?"range":"box"),f=r.types[e];if(i&&(f&&i instanceof f?t._updateItem(i,u):(t._removeItem(i),i=null)),!i)if(f)i=new f(u,t.conversion,t.options),i.id=n,t._addItem(i);else if(e=="rangeoverflow")throw new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: .vis.timeline .item.range .content {overflow: visible;}');else throw new TypeError('Unknown item type "'+e+'"');});this._order();this.stackDirty=!0;this.body.emitter.emit("change")};r.prototype._onAdd=r.prototype._onUpdate;r.prototype._onRemove=function(n){var t=0,i=this;n.forEach(function(n){var r=i.items[n];r&&(t++,i._removeItem(r))});t&&(this._order(),this.stackDirty=!0,this.body.emitter.emit("change"))};r.prototype._order=function(){u.forEach(this.groups,function(n){n.order()})};r.prototype._onUpdateGroups=function(n){this._onAddGroups(n)};r.prototype._onAddGroups=function(n){var t=this;n.forEach(function(n){var o=t.groupsData.get(n),i=t.groups[n],h,r,e;if(i)i.setData(o);else{if(n==f)throw new Error("Illegal group id. "+n+" is a reserved id.");h=Object.create(t.options);u.extend(h,{height:null});i=new s(n,o,t);t.groups[n]=i;for(r in t.items)t.items.hasOwnProperty(r)&&(e=t.items[r],e.data.group==n&&i.add(e));i.order();i.show()}});this.body.emitter.emit("change")};r.prototype._onRemoveGroups=function(n){var t=this.groups;n.forEach(function(n){var i=t[n];i&&(i.hide(),delete t[n])});this.markDirty();this.body.emitter.emit("change")};r.prototype._orderGroups=function(){var n,t,i;return this.groupsData?(n=this.groupsData.getIds({order:this.options.groupOrder}),t=!u.equalArray(n,this.groupIds),t&&(i=this.groups,n.forEach(function(n){i[n].hide()}),n.forEach(function(n){i[n].show()}),this.groupIds=n),t):!1};r.prototype._addItem=function(n){this.items[n.id]=n;var i=this.groupsData?n.data.group:f,t=this.groups[i];t&&t.add(n)};r.prototype._updateItem=function(n,t){var u=n.data.group,i,e,r;n.data=t;n.displayed&&n.redraw();u!=n.data.group&&(i=this.groups[u],i&&i.remove(n),e=this.groupsData?n.data.group:f,r=this.groups[e],r&&r.add(n))};r.prototype._removeItem=function(n){var t,r,i;n.hide();delete this.items[n.id];t=this.selection.indexOf(n.id);t!=-1&&this.selection.splice(t,1);r=this.groupsData?n.data.group:f;i=this.groups[r];i&&i.remove(n)};r.prototype._constructByEndArray=function(n){for(var i=[],t=0;t<n.length;t++)n[t]instanceof h&&i.push(n[t]);return i};r.prototype._onTouch=function(n){this.touchParams.item=r.itemFromTarget(n)};r.prototype._onDragStart=function(n){var t,i,r,u,f;(this.options.editable.updateTime||this.options.editable.updateGroup)&&(t=this.touchParams.item||null,i=this,t&&t.selected&&(u=n.target.dragLeftItem,f=n.target.dragRightItem,u?(r={item:u},i.options.editable.updateTime&&(r.start=t.data.start.valueOf()),i.options.editable.updateGroup&&"group"in t.data&&(r.group=t.data.group),this.touchParams.itemProps=[r]):f?(r={item:f},i.options.editable.updateTime&&(r.end=t.data.end.valueOf()),i.options.editable.updateGroup&&"group"in t.data&&(r.group=t.data.group),this.touchParams.itemProps=[r]):this.touchParams.itemProps=this.getSelection().map(function(n){var t=i.items[n],r={item:t};return i.options.editable.updateTime&&("start"in t.data&&(r.start=t.data.start.valueOf()),"end"in t.data&&(r.end=t.data.end.valueOf())),i.options.editable.updateGroup&&"group"in t.data&&(r.group=t.data.group),r}),n.stopPropagation()))};r.prototype._onDrag=function(n){if(this.touchParams.itemProps){var i=this.body.range,t=this.body.util.snap||null,f=n.gesture.deltaX,e=this.props.width/(i.end-i.start),u=f/e;this.touchParams.itemProps.forEach(function(i){var e,o,f,s;"start"in i&&(e=new Date(i.start+u),i.item.data.start=t?t(e):e);"end"in i&&(o=new Date(i.end+u),i.item.data.end=t?t(o):o);"group"in i&&(f=r.groupFromTarget(n),f&&f.groupId!=i.item.data.group&&(s=i.item.parent,s.remove(i.item),s.order(),f.add(i.item),f.order(),i.item.data.group=f.groupId))});this.stackDirty=!0;this.body.emitter.emit("change");n.stopPropagation()}};r.prototype._onDragEnd=function(n){if(this.touchParams.itemProps){var r=[],i=this,t=this.itemsData.getDataSet();this.touchParams.itemProps.forEach(function(n){var o=n.item.id,e=i.itemsData.get(o,i.itemOptions),f=!1;if("start"in n.item.data&&(f=n.start!=n.item.data.start.valueOf(),e.start=u.convert(n.item.data.start,t._options.type&&t._options.type.start||"Date")),"end"in n.item.data&&(f=f||n.end!=n.item.data.end.valueOf(),e.end=u.convert(n.item.data.end,t._options.type&&t._options.type.end||"Date")),"group"in n.item.data&&(f=f||n.group!=n.item.data.group,e.group=n.item.data.group),f)i.options.onMove(e,function(u){u?(u[t._fieldId]=o,r.push(u)):("start"in n&&(n.item.data.start=n.start),"end"in n&&(n.item.data.end=n.end),i.stackDirty=!0,i.body.emitter.emit("change"))})});this.touchParams.itemProps=null;r.length&&t.update(r);n.stopPropagation()}};r.prototype._onSelectItem=function(n){var t,i,f;if(this.options.selectable){if(t=n.gesture.srcEvent&&n.gesture.srcEvent.ctrlKey,i=n.gesture.srcEvent&&n.gesture.srcEvent.shiftKey,t||i){this._onMultiSelectItem(n);return}var e=this.getSelection(),u=r.itemFromTarget(n),o=u?[u.id]:[];this.setSelection(o);f=this.getSelection();(f.length>0||e.length>0)&&this.body.emitter.emit("select",{items:this.getSelection()});n.stopPropagation()}};r.prototype._onAddItem=function(n){var h,e,o;if(this.options.selectable&&this.options.editable.add){var f=this,i=this.body.util.snap||null,s=r.itemFromTarget(n);if(s){h=f.itemsData.get(s.id);this.options.onUpdate(h,function(n){n&&f.itemsData.update(n)})}else{var a=u.getAbsoluteLeft(this.dom.frame),c=n.gesture.center.pageX-a,l=this.body.util.toTime(c),t={start:i?i(l):l,content:"new item"};this.options.type==="range"&&(e=this.body.util.toTime(c+this.props.width/5),t.end=i?i(e):e);t[this.itemsData.fieldId]=u.randomUUID();o=r.groupFromTarget(n);o&&(t.group=o.groupId);this.options.onAdd(t,function(n){n&&f.itemsData.add(t)})}}};r.prototype._onMultiSelectItem=function(n){var t,i,u;this.options.selectable&&(i=r.itemFromTarget(n),i&&(t=this.getSelection(),u=t.indexOf(i.id),u==-1?t.push(i.id):t.splice(u,1),this.setSelection(t),this.body.emitter.emit("select",{items:this.getSelection()}),n.stopPropagation()))};r.itemFromTarget=function(n){for(var t=n.target;t;){if(t.hasOwnProperty("timeline-item"))return t["timeline-item"];t=t.parentNode}return null};r.groupFromTarget=function(n){for(var t=n.target;t;){if(t.hasOwnProperty("timeline-group"))return t["timeline-group"];t=t.parentNode}return null};r.itemSetFromTarget=function(n){for(var t=n.target;t;){if(t.hasOwnProperty("timeline-itemset"))return t["timeline-itemset"];t=t.parentNode}return null};n.exports=r},function(n,t,i){function r(n,t,i){this.body=n;this.defaultOptions={enabled:!0,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-left"}};this.side=i;this.options=u.extend({},this.defaultOptions);this.svgElements={};this.dom={};this.groups={};this.amountOfGroups=0;this._create();this.setOptions(t)}var u=i(1),f=i(2),e=i(18);r.prototype=new e;r.prototype.addGroup=function(n,t){this.groups.hasOwnProperty(n)||(this.groups[n]=t);this.amountOfGroups+=1};r.prototype.updateGroup=function(n,t){this.groups[n]=t};r.prototype.removeGroup=function(n){this.groups.hasOwnProperty(n)&&(delete this.groups[n],this.amountOfGroups-=1)};r.prototype._create=function(){this.dom.frame=document.createElement("div");this.dom.frame.className="legend";this.dom.frame.style.position="absolute";this.dom.frame.style.top="10px";this.dom.frame.style.display="block";this.dom.textArea=document.createElement("div");this.dom.textArea.className="legendText";this.dom.textArea.style.position="relative";this.dom.textArea.style.top="0px";this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.style.position="absolute";this.svg.style.top="0px";this.svg.style.width=this.options.iconSize+5+"px";this.dom.frame.appendChild(this.svg);this.dom.frame.appendChild(this.dom.textArea)};r.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};r.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};r.prototype.setOptions=function(n){u.selectiveDeepExtend(["enabled","orientation","icons","left","right"],this.options,n)};r.prototype.redraw=function(){var i=0,t;for(var n in this.groups)this.groups.hasOwnProperty(n)&&this.groups[n].visible==!0&&i++;if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||i==0)this.hide();else{this.show();this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left="");this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right"?(this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom=""):(this.dom.frame.style.bottom=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top="");this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());t="";for(n in this.groups)this.groups.hasOwnProperty(n)&&this.groups[n].visible==!0&&(t+=this.groups[n].content+"<br />");this.dom.textArea.innerHTML=t;this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};r.prototype.drawLegendIcons=function(){var n;if(this.dom.frame.parentNode){f.prepareElements(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,t=Number(e.replace("px","")),o=t,r=this.options.iconSize,i=.75*this.options.iconSize,u=t+.5*i+3;this.svg.style.width=r+5+t+"px";for(n in this.groups)this.groups.hasOwnProperty(n)&&this.groups[n].visible==!0&&(this.groups[n].drawIcon(o,u,this.svgElements,this.svg,r,i),u+=i+this.options.iconSpacing);f.cleanupElements(this.svgElements)}};n.exports=r},function(n,t,i){function r(n,t){this.id=f.randomUUID();this.body=n;this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,align:"center"},catmullRom:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,icons:!1,width:"40px",visible:!0},legend:{enabled:!1,icons:!0,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}}};this.options=f.extend({},this.defaultOptions);this.dom={};this.props={};this.hammer=null;this.groups={};var i=this;this.itemsData=null;this.groupsData=null;this.itemListeners={add:function(n,t){i._onAdd(t.items)},update:function(n,t){i._onUpdate(t.items)},remove:function(n,t){i._onRemove(t.items)}};this.groupListeners={add:function(n,t){i._onAddGroups(t.items)},update:function(n,t){i._onUpdateGroups(t.items)},remove:function(n,t){i._onRemoveGroups(t.items)}};this.items={};this.selection=[];this.lastStart=this.body.range.start;this.touchParams={};this.svgElements={};this.setOptions(t);this.groupsUsingDefaultStyles=[0];this.body.emitter.on("rangechange",function(){var n,t,r,u;i.lastStart!=0&&(n=i.body.range.start-i.lastStart,t=i.body.range.end-i.body.range.start,i.width!=0&&(r=i.width/t,u=n*r,i.svg.style.left=-i.width-u+"px"))});this.body.emitter.on("rangechanged",function(){i.lastStart=i.body.range.start;i.svg.style.left=f.option.asSize(-i.width);i._updateGraph.apply(i)});this._create();this.body.emitter.emit("change")}var f=i(1),e=i(2),o=i(3),s=i(4),l=i(18),h=i(21),a=i(22),c=i(25),u="__ungrouped__";r.prototype=new l;r.prototype._create=function(){var n=document.createElement("div");n.className="LineGraph";this.dom.frame=n;this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.style.position="relative";this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px";this.svg.style.display="block";n.appendChild(this.svg);this.options.dataAxis.orientation="left";this.yAxisLeft=new h(this.body,this.options.dataAxis,this.svg);this.options.dataAxis.orientation="right";this.yAxisRight=new h(this.body,this.options.dataAxis,this.svg);delete this.options.dataAxis.orientation;this.legendLeft=new c(this.body,this.options.legend,"left");this.legendRight=new c(this.body,this.options.legend,"right");this.show()};r.prototype.setOptions=function(n){if(n)f.selectiveDeepExtend(["sampling","defaultGroup","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort"],this.options,n),f.mergeOptions(this.options,n,"catmullRom"),f.mergeOptions(this.options,n,"drawPoints"),f.mergeOptions(this.options,n,"shaded"),f.mergeOptions(this.options,n,"legend"),n.catmullRom&&typeof n.catmullRom=="object"&&n.catmullRom.parametrization&&(n.catmullRom.parametrization=="uniform"?this.options.catmullRom.alpha=0:n.catmullRom.parametrization=="chordal"?this.options.catmullRom.alpha=1:(this.options.catmullRom.parametrization="centripetal",this.options.catmullRom.alpha=.5)),this.yAxisLeft&&n.dataAxis!==undefined&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&n.legend!==undefined&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(u)&&this.groups[u].setOptions(n);this.dom.frame&&this._updateGraph()};r.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};r.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};r.prototype.setItems=function(n){var u=this,t,i=this.itemsData,r;if(n)if(n instanceof o||n instanceof s)this.itemsData=n;else throw new TypeError("Data must be an instance of DataSet or DataView");else this.itemsData=null;i&&(f.forEach(this.itemListeners,function(n,t){i.off(t,n)}),t=i.getIds(),this._onRemove(t));this.itemsData&&(r=this.id,f.forEach(this.itemListeners,function(n,t){u.itemsData.on(t,n,r)}),t=this.itemsData.getIds(),this._onAdd(t));this._updateUngrouped();this._updateGraph();this.redraw()};r.prototype.setGroups=function(n){var i=this,t,r;if(this.groupsData&&(f.forEach(this.groupListeners,function(n,t){i.groupsData.unsubscribe(t,n)}),t=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(t)),n)if(n instanceof o||n instanceof s)this.groupsData=n;else throw new TypeError("Data must be an instance of DataSet or DataView");else this.groupsData=null;this.groupsData&&(r=this.id,f.forEach(this.groupListeners,function(n,t){i.groupsData.on(t,n,r)}),t=this.groupsData.getIds(),this._onAddGroups(t));this._onUpdate()};r.prototype._onUpdate=function(){this._updateUngrouped();this._updateAllGroupData();this._updateGraph();this.redraw()};r.prototype._onAdd=function(n){this._onUpdate(n)};r.prototype._onRemove=function(n){this._onUpdate(n)};r.prototype._onUpdateGroups=function(n){for(var i,t=0;t<n.length;t++)i=this.groupsData.get(n[t]),this._updateGroup(i,n[t]);this._updateGraph();this.redraw()};r.prototype._onAddGroups=function(n){this._onUpdateGroups(n)};r.prototype._onRemoveGroups=function(n){for(var t=0;t<n.length;t++)this.groups.hasOwnProperty(n[t])||(this.groups[n[t]].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(n[t]),this.legendRight.removeGroup(n[t]),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(n[t]),this.legendLeft.removeGroup(n[t]),this.legendLeft.redraw()),delete this.groups[n[t]]);this._updateUngrouped();this._updateGraph();this.redraw()};r.prototype._updateGroup=function(n,t){this.groups.hasOwnProperty(t)?(this.groups[t].update(n),this.groups[t].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(t,this.groups[t]),this.legendRight.updateGroup(t,this.groups[t])):(this.yAxisLeft.updateGroup(t,this.groups[t]),this.legendLeft.updateGroup(t,this.groups[t]))):(this.groups[t]=new a(n,t,this.options,this.groupsUsingDefaultStyles),this.groups[t].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(t,this.groups[t]),this.legendRight.addGroup(t,this.groups[t])):(this.yAxisLeft.addGroup(t,this.groups[t]),this.legendLeft.addGroup(t,this.groups[t])));this.legendLeft.redraw();this.legendRight.redraw()};r.prototype._updateAllGroupData=function(){var i,r,t,n;if(this.itemsData!=null){i={};for(n in this.groups)this.groups.hasOwnProperty(n)&&(i[n]=[]);for(r in this.itemsData._data)this.itemsData._data.hasOwnProperty(r)&&(t=this.itemsData._data[r],t.x=f.convert(t.x,"Date"),i[t.group].push(t));for(n in this.groups)this.groups.hasOwnProperty(n)&&this.groups[n].setItems(i[n])}};r.prototype._updateUngrouped=function(){var r,t,i,n;if(this.itemsData!=null){if(r={id:u,content:this.options.defaultGroup},this._updateGroup(r,u),t=0,this.itemsData)for(i in this.itemsData._data)this.itemsData._data.hasOwnProperty(i)&&(n=this.itemsData._data[i],n!=undefined&&(n.hasOwnProperty("group")?n.group===undefined&&(n.group=u):n.group=u,t=n.group==u?t+1:t));t==0&&(delete this.groups[u],this.legendLeft.removeGroup(u),this.legendRight.removeGroup(u),this.yAxisLeft.removeGroup(u),this.yAxisRight.removeGroup(u))}else delete this.groups[u],this.legendLeft.removeGroup(u),this.legendRight.removeGroup(u),this.yAxisLeft.removeGroup(u),this.yAxisRight.removeGroup(u);this.legendLeft.redraw();this.legendRight.redraw()};r.prototype.redraw=function(){var n=!1,t,i;return this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",(this.lastWidth===undefined&&this.width||this.lastWidth!=this.width)&&(n=!0),n=this._isResized()||n,t=this.body.range.end-this.body.range.start,i=t!=this.lastVisibleInterval||this.width!=this.lastWidth,this.lastVisibleInterval=t,this.lastWidth=this.width,this.width=this.dom.frame.offsetWidth,n==!0&&(this.svg.style.width=f.option.asSize(3*this.width),this.svg.style.left=f.option.asSize(-this.width)),i==!0&&this._updateGraph(),this.legendLeft.redraw(),this.legendRight.redraw(),n};r.prototype._updateGraph=function(){var a,v,y,w,u,i;if(e.prepareElements(this.svgElements),this.width!=0&&this.itemsData!=null){var n,o,s,t,h=[],l=[],c=[],p=!1,r=[];for(a in this.groups)this.groups.hasOwnProperty(a)&&r.push(a);if(v=this.body.util.toGlobalTime(-this.body.domProps.root.width),y=this.body.util.toGlobalTime(2*this.body.domProps.root.width),r.length>0){for(t=0;t<r.length;t++)if(n=this.groups[r[t]],n.visible==!0){if(o=[],n.options.sort==!0){for(w=Math.max(0,f.binarySearchGeneric(n.itemsData,v,"x","before")),u=w;u<n.itemsData.length;u++)if(i=n.itemsData[u],i!==undefined)if(i.x>y){o.push(i);break}else o.push(i)}else for(u=0;u<n.itemsData.length;u++)i=n.itemsData[u],i!==undefined&&i.x>v&&i.x<y&&o.push(i);o.length>0?(s=this._preprocessData(o,n),c.push({min:s.min,max:s.max}),h.push(s.data)):(c.push({}),h.push([]))}else c.push({}),h.push([]);if(p=this._updateYAxis(r,c),p==!0){e.cleanupElements(this.svgElements);this.body.emitter.emit("change");return}for(t=0;t<r.length;t++)n=this.groups[r[t]],l.push(this._convertYvalues(h[t],n));for(t=0;t<r.length;t++)n=this.groups[r[t]],n.visible==!0&&(n.options.style=="line"?this._drawLineGraph(l[t],n):this._drawBarGraph(l[t],n))}}e.cleanupElements(this.svgElements)};r.prototype._updateYAxis=function(n,t){var i=!1,u=!1,f=!1,s=1e9,h=1e9,c=-1e9,l=-1e9,e,o,a="left",r,v;if(n.length>0){for(r=0;r<n.length;r++)a="left",v=this.groups[n[r]],v.visible==!0&&(v.options.yAxisOrientation=="right"&&(a="right"),e=t[r].min,o=t[r].max,a=="left"?(u=!0,s=s>e?e:s,c=c<o?o:c):(f=!0,h=h>e?e:h,l=l<o?o:l));u==!0&&this.yAxisLeft.setRange(s,c);f==!0&&this.yAxisRight.setRange(h,l)}return i=this._toggleAxisVisiblity(u,this.yAxisLeft)||i,i=this._toggleAxisVisiblity(f,this.yAxisRight)||i,f==!0&&u==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!u,this.yAxisRight.master==!1?(this.yAxisLeft.lineOffset=f==!0?this.yAxisRight.width:0,i=this.yAxisLeft.redraw()||i,this.yAxisRight.stepPixelsForced=this.yAxisLeft.stepPixels,i=this.yAxisRight.redraw()||i):i=this.yAxisRight.redraw()||i,i};r.prototype._toggleAxisVisiblity=function(n,t){var i=!1;return n==!1?t.dom.frame.parentNode&&(t.hide(),i=!0):t.dom.frame.parentNode||(t.show(),i=!0),i};r.prototype._drawBarGraph=function(n,t){var i;if(n!=null&&n.length>0){var r,o=.1*t.options.barChart.width,f=0,u=t.options.barChart.width;for(t.options.barChart.align=="left"?f-=.5*u:t.options.barChart.align=="right"&&(f+=.5*u),i=0;i<n.length;i++)i+1<n.length&&(r=Math.abs(n[i+1].x-n[i].x)),i>0&&(r=Math.min(r,Math.abs(n[i-1].x-n[i].x))),r<u&&(u=r<o?o:r),e.drawBar(n[i].x+f,n[i].y,u,t.zeroPosition-n[i].y,t.className+" bar",this.svgElements,this.svg);t.options.drawPoints.enabled==!0&&this._drawPoints(n,t,this.svgElements,this.svg,f)}};r.prototype._drawLineGraph=function(n,t){var r,i,u,f,o;n!=null&&n.length>0&&(u=Number(this.svg.style.height.replace("px","")),r=e.getSVGElement("path",this.svgElements,this.svg),r.setAttributeNS(null,"class",t.className),i=t.options.catmullRom.enabled==!0?this._catmullRom(n,t):this._linear(n),t.options.shaded.enabled==!0&&(f=e.getSVGElement("path",this.svgElements,this.svg),o=t.options.shaded.orientation=="top"?"M"+n[0].x+",0 "+i+"L"+n[n.length-1].x+",0":"M"+n[0].x+","+u+" "+i+"L"+n[n.length-1].x+","+u,f.setAttributeNS(null,"class",t.className+" fill"),f.setAttributeNS(null,"d",o)),r.setAttributeNS(null,"d","M"+i),t.options.drawPoints.enabled==!0&&this._drawPoints(n,t,this.svgElements,this.svg))};r.prototype._drawPoints=function(n,t,i,r,u){u===undefined&&(u=0);for(var f=0;f<n.length;f++)e.drawPoint(n[f].x+u,n[f].y,t,i,r)};r.prototype._preprocessData=function(n,t){var o=[],s,i,a=this.body.util.toScreen,h=1,e=n.length,u=n[0].y,f=n[0].y,c,l,r;for(t.options.sampling==!0&&(c=this.body.util.toGlobalScreen(n[n.length-1].x)-this.body.util.toGlobalScreen(n[0].x),l=e/c,h=Math.min(Math.ceil(.2*e),Math.max(1,Math.round(l)))),r=0;r<e;r+=h)s=a(n[r].x)+this.width-1,i=n[r].y,o.push({x:s,y:i}),u=u>i?i:u,f=f<i?i:f;return{min:u,max:f,data:o}};r.prototype._convertYvalues=function(n,t){var u=[],f,e,r=this.yAxisLeft,o=Number(this.svg.style.height.replace("px","")),i;for(t.options.yAxisOrientation=="right"&&(r=this.yAxisRight),i=0;i<n.length;i++)f=n[i].x,e=Math.round(r.convertValue(n[i].y)),u.push({x:f,y:e});return t.setZeroPosition(Math.min(o,r.convertValue(0))),u};r.prototype._catmullRomUniform=function(n){for(var f,r,t,e,o,s,h=Math.round(n[0].x)+","+Math.round(n[0].y)+" ",u=1/6,c=n.length,i=0;i<c-1;i++)f=i==0?n[0]:n[i-1],r=n[i],t=n[i+1],e=i+2<c?n[i+2]:t,o={x:(-f.x+6*r.x+t.x)*u,y:(-f.y+6*r.y+t.y)*u},s={x:(r.x+6*t.x-e.x)*u,y:(r.y+6*t.y-e.y)*u},h+="C"+o.x+","+o.y+" "+s.x+","+s.y+" "+t.x+","+t.y+" ";return h};r.prototype._catmullRom=function(n,t){var f=t.options.catmullRom.alpha,l,r,i,a,o,s,k,d,g,nt,tt,h,c,y,v,p,e,w,b,it,rt,u;if(f==0||f===undefined)return this._catmullRomUniform(n);for(it=Math.round(n[0].x)+","+Math.round(n[0].y)+" ",rt=n.length,u=0;u<rt-1;u++)l=u==0?n[0]:n[u-1],r=n[u],i=n[u+1],a=u+2<rt?n[u+2]:i,k=Math.sqrt(Math.pow(l.x-r.x,2)+Math.pow(l.y-r.y,2)),d=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),g=Math.sqrt(Math.pow(i.x-a.x,2)+Math.pow(i.y-a.y,2)),y=Math.pow(g,f),p=Math.pow(g,2*f),v=Math.pow(d,f),e=Math.pow(d,2*f),b=Math.pow(k,f),w=Math.pow(k,2*f),nt=2*w+3*b*v+e,tt=2*p+3*y*v+e,h=3*b*(b+v),h>0&&(h=1/h),c=3*y*(y+v),c>0&&(c=1/c),o={x:(-e*l.x+nt*r.x+w*i.x)*h,y:(-e*l.y+nt*r.y+w*i.y)*h},s={x:(p*r.x+tt*i.x-e*a.x)*c,y:(p*r.y+tt*i.y-e*a.y)*c},o.x==0&&o.y==0&&(o=r),s.x==0&&s.y==0&&(s=i),it+="C"+o.x+","+o.y+" "+s.x+","+s.y+" "+i.x+","+i.y+" ";return it};r.prototype._linear=function(n){for(var i="",t=0;t<n.length;t++)i+=t==0?n[t].x+","+n[t].y:" "+n[t].x+","+n[t].y;return i};n.exports=r},function(n,t,i){function r(n,t){this.dom={foreground:null,majorLines:[],majorTexts:[],minorLines:[],minorTexts:[],redundant:{majorLines:[],majorTexts:[],minorLines:[],minorTexts:[]}};this.props={range:{start:0,end:0,minimumStep:0},lineTop:0};this.defaultOptions={orientation:"bottom",showMinorLabels:!0,showMajorLabels:!0};this.options=u.extend({},this.defaultOptions);this.body=n;this._create();this.setOptions(t)}var u=i(1),f=i(18),e=i(17);r.prototype=new f;r.prototype.setOptions=function(n){n&&u.selectiveExtend(["orientation","showMinorLabels","showMajorLabels"],this.options,n)};r.prototype._create=function(){this.dom.foreground=document.createElement("div");this.dom.background=document.createElement("div");this.dom.foreground.className="timeaxis foreground";this.dom.background.className="timeaxis background"};r.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground);this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background);this.body=null};r.prototype.redraw=function(){var e=this.options,n=this.props,t=this.dom.foreground,i=this.dom.background,r=e.orientation=="top"?this.body.dom.top:this.body.dom.bottom,o=t.parentNode!==r,u,f;this._calculateCharSize();var c=this.options.orientation,s=this.options.showMinorLabels,h=this.options.showMajorLabels;return n.minorLabelHeight=s?n.minorCharHeight:0,n.majorLabelHeight=h?n.majorCharHeight:0,n.height=n.minorLabelHeight+n.majorLabelHeight,n.width=t.offsetWidth,n.minorLineHeight=this.body.domProps.root.height-n.majorLabelHeight-(e.orientation=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),n.minorLineWidth=1,n.majorLineHeight=n.minorLineHeight+n.majorLabelHeight,n.majorLineWidth=1,u=t.nextSibling,f=i.nextSibling,t.parentNode&&t.parentNode.removeChild(t),i.parentNode&&i.parentNode.removeChild(i),t.style.height=this.props.height+"px",this._repaintLabels(),u?r.insertBefore(t,u):r.appendChild(t),f?this.body.dom.backgroundVertical.insertBefore(i,f):this.body.dom.backgroundVertical.appendChild(i),this._isResized()||o};r.prototype._repaintLabels=function(){var r=this.options.orientation,h=u.convert(this.body.range.start,"Number"),c=u.convert(this.body.range.end,"Number"),l=this.body.util.toTime((this.props.minorCharWidth||10)*7).valueOf()-this.body.util.toTime(0).valueOf(),t=new e(new Date(h),new Date(c),l),n,f,o;for(this.step=t,n=this.dom,n.redundant.majorLines=n.majorLines,n.redundant.majorTexts=n.majorTexts,n.redundant.minorLines=n.minorLines,n.redundant.minorTexts=n.minorTexts,n.majorLines=[],n.majorTexts=[],n.minorLines=[],n.minorTexts=[],t.first(),f=undefined,o=0;t.hasNext()&&o<1e3;){o++;var a=t.getCurrent(),i=this.body.util.toScreen(a),v=t.isMajor();this.options.showMinorLabels&&this._repaintMinorText(i,t.getLabelMinor(),r);v&&this.options.showMajorLabels?(i>0&&(f==undefined&&(f=i),this._repaintMajorText(i,t.getLabelMajor(),r)),this._repaintMajorLine(i,r)):this._repaintMinorLine(i,r);t.next()}if(this.options.showMajorLabels){var y=this.body.util.toTime(0),s=t.getLabelMajor(y),p=s.length*(this.props.majorCharWidth||10)+10;(f==undefined||p<f)&&this._repaintMajorText(0,s,r)}u.forEach(this.dom.redundant,function(n){while(n.length){var t=n.pop();t&&t.parentNode&&t.parentNode.removeChild(t)}})};r.prototype._repaintMinorText=function(n,t,i){var r=this.dom.redundant.minorTexts.shift(),u;r||(u=document.createTextNode(""),r=document.createElement("div"),r.appendChild(u),r.className="text minor",this.dom.foreground.appendChild(r));this.dom.minorTexts.push(r);r.childNodes[0].nodeValue=t;r.style.top=i=="top"?this.props.majorLabelHeight+"px":"0";r.style.left=n+"px"};r.prototype._repaintMajorText=function(n,t,i){var r=this.dom.redundant.majorTexts.shift(),u;r||(u=document.createTextNode(t),r=document.createElement("div"),r.className="text major",r.appendChild(u),this.dom.foreground.appendChild(r));this.dom.majorTexts.push(r);r.childNodes[0].nodeValue=t;r.style.top=i=="top"?"0":this.props.minorLabelHeight+"px";r.style.left=n+"px"};r.prototype._repaintMinorLine=function(n,t){var i=this.dom.redundant.minorLines.shift(),r;i||(i=document.createElement("div"),i.className="grid vertical minor",this.dom.background.appendChild(i));this.dom.minorLines.push(i);r=this.props;i.style.top=t=="top"?r.majorLabelHeight+"px":this.body.domProps.top.height+"px";i.style.height=r.minorLineHeight+"px";i.style.left=n-r.minorLineWidth/2+"px"};r.prototype._repaintMajorLine=function(n,t){var i=this.dom.redundant.majorLines.shift(),r;i||(i=document.createElement("DIV"),i.className="grid vertical major",this.dom.background.appendChild(i));this.dom.majorLines.push(i);r=this.props;i.style.top=t=="top"?"0":this.body.domProps.top.height+"px";i.style.left=n-r.majorLineWidth/2+"px";i.style.height=r.majorLineHeight+"px"};r.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="text minor measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor));this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight;this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth;this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="text minor measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor));this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight;this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth};r.prototype.snap=function(n){return this.step.snap(n)};n.exports=r},function(n,t,i){function r(n,t,i){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},n&&n.start==undefined)throw new Error('Property "start" missing in item '+n);u.call(this,n,t,i)}var u=i(29);r.prototype=new u(null,null,null);r.prototype.isVisible=function(n){var t=(n.end-n.start)/4;return this.data.start>n.start-t&&this.data.start<n.end+t};r.prototype.redraw=function(){var n=this.dom,r,i,u,t;if(n||(this.dom={},n=this.dom,n.box=document.createElement("DIV"),n.content=document.createElement("DIV"),n.content.className="content",n.box.appendChild(n.content),n.line=document.createElement("DIV"),n.line.className="line",n.dot=document.createElement("DIV"),n.dot.className="dot",n.box["timeline-item"]=this),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!n.box.parentNode){if(r=this.parent.dom.foreground,!r)throw new Error("Cannot redraw time axis: parent has no foreground container element");r.appendChild(n.box)}if(!n.line.parentNode){if(i=this.parent.dom.background,!i)throw new Error("Cannot redraw time axis: parent has no background container element");i.appendChild(n.line)}if(!n.dot.parentNode){if(u=this.parent.dom.axis,!i)throw new Error("Cannot redraw time axis: parent has no axis container element");u.appendChild(n.dot)}if(this.displayed=!0,this.data.content!=this.content){if(this.content=this.data.content,this.content instanceof Element)n.content.innerHTML="",n.content.appendChild(this.content);else if(this.data.content!=undefined)n.content.innerHTML=this.content;else throw new Error('Property "content" missing in item '+this.data.id);this.dirty=!0}this.data.title!=this.title&&(n.box.title=this.data.title,this.title=this.data.title);t=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");this.className!=t&&(this.className=t,n.box.className="item box"+t,n.line.className="item line"+t,n.dot.className="item dot"+t,this.dirty=!0);this.dirty&&(this.props.dot.height=n.dot.offsetHeight,this.props.dot.width=n.dot.offsetWidth,this.props.line.width=n.line.offsetWidth,this.width=n.box.offsetWidth,this.height=n.box.offsetHeight,this.dirty=!1);this._repaintDeleteButton(n.box)};r.prototype.show=function(){this.displayed||this.redraw()};r.prototype.hide=function(){if(this.displayed){var n=this.dom;n.box.parentNode&&n.box.parentNode.removeChild(n.box);n.line.parentNode&&n.line.parentNode.removeChild(n.line);n.dot.parentNode&&n.dot.parentNode.removeChild(n.dot);this.top=null;this.left=null;this.displayed=!1}};r.prototype.repositionX=function(){var n=this.conversion.toScreen(this.data.start),t=this.options.align,i=this.dom.box,r=this.dom.line,u=this.dom.dot;this.left=t=="right"?n-this.width:t=="left"?n:n-this.width/2;i.style.left=this.left+"px";r.style.left=n-this.props.line.width/2+"px";u.style.left=n-this.props.dot.width/2+"px"};r.prototype.repositionY=function(){var u=this.options.orientation,i=this.dom.box,n=this.dom.line,f=this.dom.dot,t,r;u=="top"?(i.style.top=(this.top||0)+"px",n.style.top="0",n.style.height=this.parent.top+this.top+1+"px",n.style.bottom=""):(t=this.parent.itemSet.props.height,r=t-this.parent.top-this.parent.height+this.top,i.style.top=(this.parent.height-this.top-this.height||0)+"px",n.style.top=t-r+"px",n.style.bottom="0");f.style.top=-this.props.dot.height/2+"px"};n.exports=r},function(n,t,i){function r(n,t,i){this.id=null;this.parent=null;this.data=n;this.dom=null;this.conversion=t||{};this.options=i||{};this.selected=!1;this.displayed=!1;this.dirty=!0;this.top=null;this.left=null;this.width=null;this.height=null}var u=i(41);r.prototype.select=function(){this.selected=!0;this.displayed&&this.redraw()};r.prototype.unselect=function(){this.selected=!1;this.displayed&&this.redraw()};r.prototype.setParent=function(n){this.displayed?(this.hide(),this.parent=n,this.parent&&this.show()):this.parent=n};r.prototype.isVisible=function(){return!1};r.prototype.show=function(){return!1};r.prototype.hide=function(){return!1};r.prototype.redraw=function(){};r.prototype.repositionX=function(){};r.prototype.repositionY=function(){};r.prototype._repaintDeleteButton=function(n){if(this.selected&&this.options.editable.remove&&!this.dom.deleteButton){var i=this,t=document.createElement("div");t.className="delete";t.title="Delete this item";u(t,{preventDefault:!0}).on("tap",function(n){i.parent.removeFromDataSet(i);n.stopPropagation()});n.appendChild(t);this.dom.deleteButton=t}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)};n.exports=r},function(n,t,i){function r(n,t,i){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0}},n&&n.start==undefined)throw new Error('Property "start" missing in item '+n);u.call(this,n,t,i)}var u=i(29);r.prototype=new u(null,null,null);r.prototype.isVisible=function(n){var t=(n.end-n.start)/4;return this.data.start>n.start-t&&this.data.start<n.end+t};r.prototype.redraw=function(){var n=this.dom,i,t;if(n||(this.dom={},n=this.dom,n.point=document.createElement("div"),n.content=document.createElement("div"),n.content.className="content",n.point.appendChild(n.content),n.dot=document.createElement("div"),n.point.appendChild(n.dot),n.point["timeline-item"]=this),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!n.point.parentNode){if(i=this.parent.dom.foreground,!i)throw new Error("Cannot redraw time axis: parent has no foreground container element");i.appendChild(n.point)}if(this.displayed=!0,this.data.content!=this.content){if(this.content=this.data.content,this.content instanceof Element)n.content.innerHTML="",n.content.appendChild(this.content);else if(this.data.content!=undefined)n.content.innerHTML=this.content;else throw new Error('Property "content" missing in item '+this.data.id);this.dirty=!0}this.data.title!=this.title&&(n.point.title=this.data.title,this.title=this.data.title);t=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");this.className!=t&&(this.className=t,n.point.className="item point"+t,n.dot.className="item dot"+t,this.dirty=!0);this.dirty&&(this.width=n.point.offsetWidth,this.height=n.point.offsetHeight,this.props.dot.width=n.dot.offsetWidth,this.props.dot.height=n.dot.offsetHeight,this.props.content.height=n.content.offsetHeight,n.content.style.marginLeft=2*this.props.dot.width+"px",n.dot.style.top=(this.height-this.props.dot.height)/2+"px",n.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1);this._repaintDeleteButton(n.point)};r.prototype.show=function(){this.displayed||this.redraw()};r.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.top=null,this.left=null,this.displayed=!1)};r.prototype.repositionX=function(){var n=this.conversion.toScreen(this.data.start);this.left=n-this.props.dot.width;this.dom.point.style.left=this.left+"px"};r.prototype.repositionY=function(){var n=this.options.orientation,t=this.dom.point;t.style.top=n=="top"?this.top+"px":this.parent.height-this.top-this.height+"px"};n.exports=r},function(n,t,i){function r(n,t,i){if(this.props={content:{width:0}},this.overflow=!1,n){if(n.start==undefined)throw new Error('Property "start" missing in item '+n.id);if(n.end==undefined)throw new Error('Property "end" missing in item '+n.id);}f.call(this,n,t,i)}var u=i(41),f=i(29);r.prototype=new f(null,null,null);r.prototype.baseClassName="item range";r.prototype.isVisible=function(n){return this.data.start<n.end&&this.data.end>n.start};r.prototype.redraw=function(){var n=this.dom,i,t;if(n||(this.dom={},n=this.dom,n.box=document.createElement("div"),n.content=document.createElement("div"),n.content.className="content",n.box.appendChild(n.content),n.box["timeline-item"]=this),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!n.box.parentNode){if(i=this.parent.dom.foreground,!i)throw new Error("Cannot redraw time axis: parent has no foreground container element");i.appendChild(n.box)}if(this.displayed=!0,this.data.content!=this.content){if(this.content=this.data.content,this.content instanceof Element)n.content.innerHTML="",n.content.appendChild(this.content);else if(this.data.content!=undefined)n.content.innerHTML=this.content;else throw new Error('Property "content" missing in item '+this.data.id);this.dirty=!0}this.data.title!=this.title&&(n.box.title=this.data.title,this.title=this.data.title);t=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");this.className!=t&&(this.className=t,n.box.className=this.baseClassName+t,this.dirty=!0);this.dirty&&(this.overflow=window.getComputedStyle(n.content).overflow!=="hidden",this.props.content.width=this.dom.content.offsetWidth,this.height=this.dom.box.offsetHeight,this.dirty=!1);this._repaintDeleteButton(n.box);this._repaintDragLeft();this._repaintDragRight()};r.prototype.show=function(){this.displayed||this.redraw()};r.prototype.hide=function(){if(this.displayed){var n=this.dom.box;n.parentNode&&n.parentNode.removeChild(n);this.top=null;this.left=null;this.displayed=!1}};r.prototype.repositionX=function(){var f=this.props,t=this.parent.width,n=this.conversion.toScreen(this.data.start),i=this.conversion.toScreen(this.data.end),e=this.options.padding,u,r;n<-t&&(n=-t);i>2*t&&(i=2*t);r=Math.max(i-n,1);this.overflow?(u=Math.max(-n,0),this.left=n,this.width=r+this.props.content.width):(u=n<0?Math.min(-n,i-n-f.content.width-2*e):0,this.left=n,this.width=r);this.dom.box.style.left=this.left+"px";this.dom.box.style.width=r+"px";this.dom.content.style.left=u+"px"};r.prototype.repositionY=function(){var n=this.options.orientation,t=this.dom.box;t.style.top=n=="top"?this.top+"px":this.parent.height-this.top-this.height+"px"};r.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var n=document.createElement("div");n.className="drag-left";n.dragLeftItem=this;u(n,{preventDefault:!0}).on("drag",function(){});this.dom.box.appendChild(n);this.dom.dragLeft=n}else!this.selected&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)};r.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var n=document.createElement("div");n.className="drag-right";n.dragRightItem=this;u(n,{preventDefault:!0}).on("drag",function(){});this.dom.box.appendChild(n);this.dom.dragRight=n}else!this.selected&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)};n.exports=r},function(n,t,i){function r(n,t,i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._initializeMixinLoaders();this.containerElement=n;this.renderRefreshRate=60;this.renderTimestep=1e3/this.renderRefreshRate;this.renderTime=.5*this.renderTimestep;this.maxPhysicsTicksPerRender=3;this.physicsDiscreteStepsize=.5;this.initializing=!0;this.triggerFunctions={add:null,edit:null,editEdge:null,connect:null,del:null};this.defaultOptions={nodes:{mass:1,radiusMin:10,radiusMax:30,radius:10,shape:"ellipse",image:undefined,widthMin:16,widthMax:64,fixed:!1,fontColor:"black",fontSize:14,fontFace:"verdana",level:-1,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},borderColor:"#2B7CE9",backgroundColor:"#97C2FC",highlightColor:"#D2E5FF",group:undefined,borderWidth:1},edges:{widthMin:1,widthMax:15,width:1,widthSelectionMultiplier:2,hoverWidth:1.5,style:"line",color:{color:"#848484",highlight:"#848484",hover:"#848484"},fontColor:"#343434",fontSize:14,fontFace:"arial",fontFill:"white",arrowScaleFactor:1,dash:{length:10,gap:5,altLength:undefined},inheritColor:"from"},configurePhysics:!1,physics:{barnesHut:{enabled:!0,theta:1/.6,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09},repulsion:{centralGravity:0,springLength:200,springConstant:.05,nodeDistance:100,damping:.09},hierarchicalRepulsion:{enabled:!1,centralGravity:0,springLength:100,springConstant:.01,nodeDistance:150,damping:.09},damping:null,centralGravity:null,springLength:null,springConstant:null},clustering:{enabled:!1,initialMaxNodes:100,clusterThreshold:500,reduceToNodes:300,chainThreshold:.4,clusterEdgeThreshold:20,sectorThreshold:100,screenSizeThreshold:.2,fontSizeMultiplier:4,maxFontSize:1e3,forceAmplification:.1,distanceAmplification:.1,edgeGrowth:20,nodeScaling:{width:1,height:1,radius:1},maxNodeSizeIncrements:600,activeAreaBoxSize:80,clusterLevelDifference:2},navigation:{enabled:!1},keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02}},dataManipulation:{enabled:!1,initiallyVisible:!1},hierarchicalLayout:{enabled:!1,levelSeparation:150,nodeSpacing:100,direction:"UD"},freezeForStabilization:!1,smoothCurves:{enabled:!0,dynamic:!0,type:"continuous",roundness:.5},dynamicSmoothCurves:!0,maxVelocity:30,minVelocity:.1,stabilize:!0,stabilizationIterations:1e3,labels:{add:"Add Node",edit:"Edit",link:"Add Link",del:"Delete selected",editNode:"Edit Node",editEdge:"Edit Edge",back:"Back",addDescription:"Click in an empty space to place a new node.",linkDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",addError:"The function for add does not support two arguments (data,callback).",linkError:"The function for connect does not support two arguments (data,callback).",editError:"The function for edit does not support two arguments (data, callback).",editBoundError:"No edit function has been bound to this button.",deleteError:"The function for delete does not support two arguments (data, callback).",deleteClusterError:"Clusters cannot be deleted."},tooltip:{delay:300,fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}},dragNetwork:!0,dragNodes:!0,zoomable:!0,hover:!1,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,width:"100%",height:"100%",selectable:!0};this.constants=u.extend({},this.defaultOptions);this.hoverObj={nodes:{},edges:{}};this.controlNodesActive=!1;var f=this;this.groups=new w;this.images=new b;this.images.setOnloadCallback(function(){f._redraw()});this.xIncrement=0;this.yIncrement=0;this.zoomIncrement=0;this._loadPhysicsSystem();this._create();this._loadSectorSystem();this._loadClusterSystem();this._loadSelectionSystem();this._loadHierarchySystem();this._setTranslation(this.frame.clientWidth/2,this.frame.clientHeight/2);this._setScale(1);this.setOptions(i);this.freezeSimulation=!1;this.cachedFunctions={};this.calculationNodes={};this.calculationNodeIndices=[];this.nodeIndices=[];this.nodes={};this.edges={};this.canvasTopLeft={x:0,y:0};this.canvasBottomRight={x:0,y:0};this.pointerPosition={x:0,y:0};this.areaCenter={};this.scale=1;this.previousScale=this.scale;this.nodesData=null;this.edgesData=null;this.nodesListeners={add:function(n,t){f._addNodes(t.items);f.start()},update:function(n,t){f._updateNodes(t.items);f.start()},remove:function(n,t){f._removeNodes(t.items);f.start()}};this.edgesListeners={add:function(n,t){f._addEdges(t.items);f.start()},update:function(n,t){f._updateEdges(t.items);f.start()},remove:function(n,t){f._removeEdges(t.items);f.start()}};this.moving=!0;this.timer=undefined;this.setData(t,this.constants.clustering.enabled||this.constants.hierarchicalLayout.enabled);this.initializing=!1;this.constants.hierarchicalLayout.enabled==!0?this._setupHierarchicalLayout():this.constants.stabilize==!1&&this.zoomExtent(!0,this.constants.clustering.enabled);this.constants.clustering.enabled&&this.startWithClustering()}var l=i(46),a=i(41),v=i(47),u=i(1),h=i(43),f=i(3),c=i(4),y=i(38),p=i(39),w=i(34),b=i(35),e=i(36),o=i(33),k=i(37),s=i(45);i(44);l(r.prototype);r.prototype._getScriptPath=function(){for(var n,i,r=document.getElementsByTagName("script"),t=0;t<r.length;t++)if(n=r[t].src,i=n&&/\/?vis(.min)?\.js$/.exec(n),i)return n.substring(0,n.length-i[0].length);return null};r.prototype._getRange=function(){var t=1e9,i=-1e9,r=1e9,u=-1e9,n;for(var f in this.nodes)this.nodes.hasOwnProperty(f)&&(n=this.nodes[f],r>n.x&&(r=n.x),u<n.x&&(u=n.x),t>n.y&&(t=n.y),i<n.y&&(i=n.y));return r==1e9&&u==-1e9&&t==1e9&&i==-1e9&&(t=0,i=0,r=0,u=0),{minX:r,maxX:u,minY:t,maxY:i}};r.prototype._findCenter=function(n){return{x:.5*(n.maxX+n.minX),y:.5*(n.maxY+n.minY)}};r.prototype._centerNetwork=function(n){var t=this._findCenter(n);t.x*=this.scale;t.y*=this.scale;t.x-=.5*this.frame.canvas.clientWidth;t.y-=.5*this.frame.canvas.clientHeight;this._setTranslation(-t.x,-t.y)};r.prototype.zoomExtent=function(n,t){var r,u,i,f;if(n===undefined&&(n=!1),t===undefined&&(t=!1),r=this._getRange(),n==!0)i=this.nodeIndices.length,u=this.constants.smoothCurves==!0?this.constants.clustering.enabled==!0&&i>=this.constants.clustering.initialMaxNodes?49.07548/(i+142.05338)+.00091444:12.662/(i+7.4147)+.0964822:this.constants.clustering.enabled==!0&&i>=this.constants.clustering.initialMaxNodes?77.5271985/(i+187.266146)+476710517e-13:30.5062972/(i+19.93597763)+.08413486,f=Math.min(this.frame.canvas.clientWidth/600,this.frame.canvas.clientHeight/600),u*=f;else{var s=(Math.abs(r.minX)+Math.abs(r.maxX))*1.1,h=(Math.abs(r.minY)+Math.abs(r.maxY))*1.1,e=this.frame.canvas.clientWidth/s,o=this.frame.canvas.clientHeight/h;u=e<=o?e:o}u>1&&(u=1);this._setScale(u);this._centerNetwork(r);t==!1&&(this.moving=!0,this.start())};r.prototype._updateNodeIndexList=function(){this._clearNodeIndexList();for(var n in this.nodes)this.nodes.hasOwnProperty(n)&&this.nodeIndices.push(n)};r.prototype.setData=function(n,t){var r,u,i;if(t===undefined&&(t=!1),n&&n.dot&&(n.nodes||n.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(n&&n.options),n&&n.dot){if(n&&n.dot){r=y.DOTToGraph(n.dot);this.setData(r);return}}else if(n&&n.gephi){if(n&&n.gephi){u=p.parseGephi(n.gephi);this.setData(u);return}}else this._setNodes(n&&n.nodes),this._setEdges(n&&n.edges);this._putDataInSector();t||(this.constants.stabilize?(i=this,setTimeout(function(){i._stabilize();i.start()},0)):this.start())};r.prototype.setOptions=function(n){var t,f,i,r,e;if(n){if(f=["nodes","edges","smoothCurves","hierarchicalLayout","clustering","navigation","keyboard","dataManipulation","onAdd","onEdit","onEditEdge","onConnect","onDelete"],u.selectiveNotDeepExtend(f,this.constants,n),u.selectiveNotDeepExtend(["color"],this.constants.nodes,n.nodes),u.selectiveNotDeepExtend(["color","length"],this.constants.edges,n.edges),n.physics&&(u.mergeOptions(this.constants.physics,n.physics,"barnesHut"),u.mergeOptions(this.constants.physics,n.physics,"repulsion"),n.physics.hierarchicalRepulsion)){this.constants.hierarchicalLayout.enabled=!0;this.constants.physics.hierarchicalRepulsion.enabled=!0;this.constants.physics.barnesHut.enabled=!1;for(t in n.physics.hierarchicalRepulsion)n.physics.hierarchicalRepulsion.hasOwnProperty(t)&&(this.constants.physics.hierarchicalRepulsion[t]=n.physics.hierarchicalRepulsion[t])}if(n.onAdd&&(this.triggerFunctions.add=n.onAdd),n.onEdit&&(this.triggerFunctions.edit=n.onEdit),n.onEditEdge&&(this.triggerFunctions.editEdge=n.onEditEdge),n.onConnect&&(this.triggerFunctions.connect=n.onConnect),n.onDelete&&(this.triggerFunctions.del=n.onDelete),u.mergeOptions(this.constants,n,"smoothCurves"),u.mergeOptions(this.constants,n,"hierarchicalLayout"),u.mergeOptions(this.constants,n,"clustering"),u.mergeOptions(this.constants,n,"navigation"),u.mergeOptions(this.constants,n,"keyboard"),u.mergeOptions(this.constants,n,"dataManipulation"),n.dataManipulation&&(this.editMode=this.constants.dataManipulation.initiallyVisible),n.edges&&(n.edges.color!==undefined&&(u.isString(n.edges.color)?(this.constants.edges.color={},this.constants.edges.color.color=n.edges.color,this.constants.edges.color.highlight=n.edges.color,this.constants.edges.color.hover=n.edges.color):(n.edges.color.color!==undefined&&(this.constants.edges.color.color=n.edges.color.color),n.edges.color.highlight!==undefined&&(this.constants.edges.color.highlight=n.edges.color.highlight),n.edges.color.hover!==undefined&&(this.constants.edges.color.hover=n.edges.color.hover))),n.edges.fontColor||n.edges.color!==undefined&&(u.isString(n.edges.color)?this.constants.edges.fontColor=n.edges.color:n.edges.color.color!==undefined&&(this.constants.edges.fontColor=n.edges.color.color))),n.nodes&&n.nodes.color&&(i=u.parseColor(n.nodes.color),this.constants.nodes.color.background=i.background,this.constants.nodes.color.border=i.border,this.constants.nodes.color.highlight.background=i.highlight.background,this.constants.nodes.color.highlight.border=i.highlight.border,this.constants.nodes.color.hover.background=i.hover.background,this.constants.nodes.color.hover.border=i.hover.border),n.groups)for(r in n.groups)n.groups.hasOwnProperty(r)&&(e=n.groups[r],this.groups.add(r,e));if(n.tooltip){for(t in n.tooltip)n.tooltip.hasOwnProperty(t)&&(this.constants.tooltip[t]=n.tooltip[t]);n.tooltip.color&&(this.constants.tooltip.color=u.parseColor(n.tooltip.color))}}this._loadPhysicsSystem();this._loadNavigationControls();this._loadManipulationSystem();this._configureSmoothCurves();this._createKeyBinds();this.setSize(this.constants.width,this.constants.height);this.moving=!0;this.start()};r.prototype._create=function(){for(var t,n;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div");this.frame.className="network-frame";this.frame.style.position="relative";this.frame.style.overflow="hidden";this.frame.canvas=document.createElement("canvas");this.frame.canvas.style.position="relative";this.frame.appendChild(this.frame.canvas);this.frame.canvas.getContext||(t=document.createElement("DIV"),t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t));n=this;this.drag={};this.pinch={};this.hammer=a(this.frame.canvas,{prevent_default:!0});this.hammer.on("tap",n._onTap.bind(n));this.hammer.on("doubletap",n._onDoubleTap.bind(n));this.hammer.on("hold",n._onHold.bind(n));this.hammer.on("pinch",n._onPinch.bind(n));this.hammer.on("touch",n._onTouch.bind(n));this.hammer.on("dragstart",n._onDragStart.bind(n));this.hammer.on("drag",n._onDrag.bind(n));this.hammer.on("dragend",n._onDragEnd.bind(n));this.hammer.on("release",n._onRelease.bind(n));this.hammer.on("mousewheel",n._onMouseWheel.bind(n));this.hammer.on("DOMMouseScroll",n._onMouseWheel.bind(n));this.hammer.on("mousemove",n._onMouseMoveTitle.bind(n));this.containerElement.appendChild(this.frame)};r.prototype._createKeyBinds=function(){var n=this;this.mousetrap=v;this.mousetrap.reset();this.constants.keyboard.enabled==!0&&(this.mousetrap.bind("up",this._moveUp.bind(n),"keydown"),this.mousetrap.bind("up",this._yStopMoving.bind(n),"keyup"),this.mousetrap.bind("down",this._moveDown.bind(n),"keydown"),this.mousetrap.bind("down",this._yStopMoving.bind(n),"keyup"),this.mousetrap.bind("left",this._moveLeft.bind(n),"keydown"),this.mousetrap.bind("left",this._xStopMoving.bind(n),"keyup"),this.mousetrap.bind("right",this._moveRight.bind(n),"keydown"),this.mousetrap.bind("right",this._xStopMoving.bind(n),"keyup"),this.mousetrap.bind("=",this._zoomIn.bind(n),"keydown"),this.mousetrap.bind("=",this._stopZoom.bind(n),"keyup"),this.mousetrap.bind("-",this._zoomOut.bind(n),"keydown"),this.mousetrap.bind("-",this._stopZoom.bind(n),"keyup"),this.mousetrap.bind("[",this._zoomIn.bind(n),"keydown"),this.mousetrap.bind("[",this._stopZoom.bind(n),"keyup"),this.mousetrap.bind("]",this._zoomOut.bind(n),"keydown"),this.mousetrap.bind("]",this._stopZoom.bind(n),"keyup"),this.mousetrap.bind("pageup",this._zoomIn.bind(n),"keydown"),this.mousetrap.bind("pageup",this._stopZoom.bind(n),"keyup"),this.mousetrap.bind("pagedown",this._zoomOut.bind(n),"keydown"),this.mousetrap.bind("pagedown",this._stopZoom.bind(n),"keyup"));this.constants.dataManipulation.enabled==!0&&(this.mousetrap.bind("escape",this._createManipulatorBar.bind(n)),this.mousetrap.bind("del",this._deleteSelected.bind(n)))};r.prototype._getPointer=function(n){return{x:n.pageX-u.getAbsoluteLeft(this.frame.canvas),y:n.pageY-u.getAbsoluteTop(this.frame.canvas)}};r.prototype._onTouch=function(n){this.drag.pointer=this._getPointer(n.gesture.center);this.drag.pinched=!1;this.pinch.scale=this._getScale();this._handleTouch(this.drag.pointer)};r.prototype._onDragStart=function(){this._handleDragStart()};r.prototype._handleDragStart=function(){var t=this.drag,i=this._getNodeAt(t.pointer),r,n,u;if(t.dragging=!0,t.selection=[],t.translation=this._getTranslation(),t.nodeId=null,i!=null){t.nodeId=i.id;i.isSelected()||this._selectObject(i,!1);for(r in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(r)&&(n=this.selectionObj.nodes[r],u={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.xFixed,yFixed:n.yFixed},n.xFixed=!0,n.yFixed=!0,t.selection.push(u))}};r.prototype._onDrag=function(n){this._handleOnDrag(n)};r.prototype._handleOnDrag=function(n){var f,e,o,s;if(!this.drag.pinched){var t=this._getPointer(n.gesture.center),i=this,r=this.drag,u=r.selection;u&&u.length&&this.constants.dragNodes==!0?(f=t.x-r.pointer.x,e=t.y-r.pointer.y,u.forEach(function(n){var t=n.node;n.xFixed||(t.x=i._XconvertDOMtoCanvas(i._XconvertCanvasToDOM(n.x)+f));n.yFixed||(t.y=i._YconvertDOMtoCanvas(i._YconvertCanvasToDOM(n.y)+e))}),this.moving||(this.moving=!0,this.start())):this.constants.dragNetwork==!0&&(o=t.x-this.drag.pointer.x,s=t.y-this.drag.pointer.y,this._setTranslation(this.drag.translation.x+o,this.drag.translation.y+s),this._redraw())}};r.prototype._onDragEnd=function(){this.drag.dragging=!1;var n=this.drag.selection;n&&n.length?(n.forEach(function(n){n.node.xFixed=n.xFixed;n.node.yFixed=n.yFixed}),this.moving=!0,this.start()):this._redraw()};r.prototype._onTap=function(n){var t=this._getPointer(n.gesture.center);this.pointerPosition=t;this._handleTap(t)};r.prototype._onDoubleTap=function(n){var t=this._getPointer(n.gesture.center);this._handleDoubleTap(t)};r.prototype._onHold=function(n){var t=this._getPointer(n.gesture.center);this.pointerPosition=t;this._handleOnHold(t)};r.prototype._onRelease=function(n){var t=this._getPointer(n.gesture.center);this._handleOnRelease(t)};r.prototype._onPinch=function(n){var i=this._getPointer(n.gesture.center),t;this.drag.pinched=!0;"scale"in this.pinch||(this.pinch.scale=1);t=this.pinch.scale*n.gesture.scale;this._zoom(t,i)};r.prototype._zoom=function(n,t){var u,i,f;if(this.constants.zoomable==!0){u=this._getScale();n<1e-5&&(n=1e-5);n>10&&(n=10);i=null;this.drag!==undefined&&this.drag.dragging==!0&&(i=this.DOMtoCanvas(this.drag.pointer));var e=this._getTranslation(),r=n/u,o=(1-r)*t.x+e.x*r,s=(1-r)*t.y+e.y*r;return this.areaCenter={x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)},this._setScale(n),this._setTranslation(o,s),this.updateClustersDefault(),i!=null&&(f=this.canvasToDOM(i),this.drag.pointer.x=f.x,this.drag.pointer.y=f.y),this._redraw(),u<n?this.emit("zoom",{direction:"+"}):this.emit("zoom",{direction:"-"}),n}};r.prototype._onMouseWheel=function(n){var t=0,r,i,u,f;n.wheelDelta?t=n.wheelDelta/120:n.detail&&(t=-n.detail/3);t&&(r=this._getScale(),i=t/10,t<0&&(i=i/(1-i)),r*=1+i,u=h.fakeGesture(this,n),f=this._getPointer(u.center),this._zoom(r,f));n.preventDefault()};r.prototype._onMouseMoveTitle=function(n){var c=h.fakeGesture(this,n),r=this._getPointer(c.center),f,s,u,t,i;if(this.popupObj&&this._checkHidePopup(r),f=this,s=function(){f._checkShowPopup(r)},this.popupTimer&&clearInterval(this.popupTimer),this.drag.dragging||(this.popupTimer=setTimeout(s,this.constants.tooltip.delay)),this.constants.hover==!0){for(u in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(u)&&(this.hoverObj.edges[u].hover=!1,delete this.hoverObj.edges[u]);t=this._getNodeAt(r);t==null&&(t=this._getEdgeAt(r));t!=null&&this._hoverObject(t);for(i in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(i)&&(t instanceof e&&t.id!=i||t instanceof o||t==null)&&(this._blurObject(this.hoverObj.nodes[i]),delete this.hoverObj.nodes[i]);this.redraw()}};r.prototype._checkShowPopup=function(n){var o={left:this._XconvertDOMtoCanvas(n.x),top:this._YconvertDOMtoCanvas(n.y),right:this._XconvertDOMtoCanvas(n.x),bottom:this._YconvertDOMtoCanvas(n.y)},i,s=this.popupObj,u,f,e,r,t;if(this.popupObj==undefined){u=this.nodes;for(i in u)if(u.hasOwnProperty(i)&&(f=u[i],f.getTitle()!==undefined&&f.isOverlappingWith(o))){this.popupObj=f;break}}if(this.popupObj===undefined){e=this.edges;for(i in e)if(e.hasOwnProperty(i)&&(r=e[i],r.connected&&r.getTitle()!==undefined&&r.isOverlappingWith(o))){this.popupObj=r;break}}this.popupObj?this.popupObj!=s&&(t=this,t.popup||(t.popup=new k(t.frame,t.constants.tooltip)),t.popup.setPosition(n.x-3,n.y-3),t.popup.setText(t.popupObj.getTitle()),t.popup.show()):this.popup&&this.popup.hide()};r.prototype._checkHidePopup=function(n){this.popupObj&&this._getNodeAt(n)||(this.popupObj=undefined,this.popup&&this.popup.hide())};r.prototype.setSize=function(n,t){this.frame.style.width=n;this.frame.style.height=t;this.frame.canvas.style.width="100%";this.frame.canvas.style.height="100%";this.frame.canvas.width=this.frame.canvas.clientWidth;this.frame.canvas.height=this.frame.canvas.clientHeight;this.manipulationDiv!==undefined&&(this.manipulationDiv.style.width=this.frame.canvas.clientWidth+"px");this.navigationDivs!==undefined&&this.navigationDivs.wrapper!==undefined&&(this.navigationDivs.wrapper.style.width=this.frame.canvas.clientWidth+"px",this.navigationDivs.wrapper.style.height=this.frame.canvas.clientHeight+"px");this.emit("resize",{width:this.frame.canvas.width,height:this.frame.canvas.height})};r.prototype._setNodes=function(n){var t=this.nodesData,i,r;if(n instanceof f||n instanceof c)this.nodesData=n;else if(n instanceof Array)this.nodesData=new f,this.nodesData.add(n);else if(n)throw new TypeError("Array or DataSet expected");else this.nodesData=new f;t&&u.forEach(this.nodesListeners,function(n,i){t.off(i,n)});this.nodes={};this.nodesData&&(i=this,u.forEach(this.nodesListeners,function(n,t){i.nodesData.on(t,n)}),r=this.nodesData.getIds(),this._addNodes(r));this._updateSelection()};r.prototype._addNodes=function(n){for(var o,t,u,f,i,r=0,s=n.length;r<s;r++)i=n[r],o=this.nodesData.get(i),t=new e(o,this.images,this.groups,this.constants),this.nodes[i]=t,(t.xFixed==!1||t.yFixed==!1)&&(t.x===null||t.y===null)&&(u=10*.1*n.length,f=2*Math.PI*Math.random(),t.xFixed==!1&&(t.x=u*Math.cos(f)),t.yFixed==!1&&(t.y=u*Math.sin(f))),this.moving=!0;this._updateNodeIndexList();this.constants.hierarchicalLayout.enabled==!0&&this.initializing==!1&&(this._resetLevels(),this._setupHierarchicalLayout());this._updateCalculationNodes();this._reconnectEdges();this._updateValueRange(this.nodes);this.updateLabels()};r.prototype._updateNodes=function(n){for(var i=this.nodes,f=this.nodesData,r=0,o=n.length;r<o;r++){var u=n[r],t=i[u],s=f.get(u);t?t.setProperties(s,this.constants):(t=new e(properties,this.images,this.groups,this.constants),i[u]=t)}this.moving=!0;this.constants.hierarchicalLayout.enabled==!0&&this.initializing==!1&&(this._resetLevels(),this._setupHierarchicalLayout());this._updateNodeIndexList();this._reconnectEdges();this._updateValueRange(i)};r.prototype._removeNodes=function(n){for(var r,i=this.nodes,t=0,u=n.length;t<u;t++)r=n[t],delete i[r];this._updateNodeIndexList();this.constants.hierarchicalLayout.enabled==!0&&this.initializing==!1&&(this._resetLevels(),this._setupHierarchicalLayout());this._updateCalculationNodes();this._reconnectEdges();this._updateSelection();this._updateValueRange(i)};r.prototype._setEdges=function(n){var t=this.edgesData,i,r;if(n instanceof f||n instanceof c)this.edgesData=n;else if(n instanceof Array)this.edgesData=new f,this.edgesData.add(n);else if(n)throw new TypeError("Array or DataSet expected");else this.edgesData=new f;t&&u.forEach(this.edgesListeners,function(n,i){t.off(i,n)});this.edges={};this.edgesData&&(i=this,u.forEach(this.edgesListeners,function(n,t){i.edgesData.on(t,n)}),r=this.edgesData.getIds(),this._addEdges(r));this._reconnectEdges()};r.prototype._addEdges=function(n){for(var t,u,f,i=this.edges,e=this.edgesData,r=0,s=n.length;r<s;r++)t=n[r],u=i[t],u&&u.disconnect(),f=e.get(t,{showInternalIds:!0}),i[t]=new o(f,this,this.constants);this.moving=!0;this._updateValueRange(i);this._createBezierNodes();this.constants.hierarchicalLayout.enabled==!0&&this.initializing==!1&&(this._resetLevels(),this._setupHierarchicalLayout());this._updateCalculationNodes()};r.prototype._updateEdges=function(n){for(var u=this.edges,e=this.edgesData,i=0,s=n.length;i<s;i++){var r=n[i],f=e.get(r),t=u[r];t?(t.disconnect(),t.setProperties(f,this.constants),t.connect()):(t=new o(f,this,this.constants),this.edges[r]=t)}this._createBezierNodes();this.constants.hierarchicalLayout.enabled==!0&&this.initializing==!1&&(this._resetLevels(),this._setupHierarchicalLayout());this.moving=!0;this._updateValueRange(u)};r.prototype._removeEdges=function(n){for(var u,t,i=this.edges,r=0,f=n.length;r<f;r++)u=n[r],t=i[u],t&&(t.via!=null&&delete this.sectors.support.nodes[t.via.id],t.disconnect(),delete i[u]);this.moving=!0;this._updateValueRange(i);this.constants.hierarchicalLayout.enabled==!0&&this.initializing==!1&&(this._resetLevels(),this._setupHierarchicalLayout());this._updateCalculationNodes()};r.prototype._reconnectEdges=function(){var n,i=this.nodes,r=this.edges,t;for(n in i)i.hasOwnProperty(n)&&(i[n].edges=[]);for(n in r)r.hasOwnProperty(n)&&(t=r[n],t.from=null,t.to=null,t.connect())};r.prototype._updateValueRange=function(n){var t,r=undefined,u=undefined,i;for(t in n)n.hasOwnProperty(t)&&(i=n[t].getValue(),i!==undefined&&(r=r===undefined?i:Math.min(i,r),u=u===undefined?i:Math.max(i,u)));if(r!==undefined&&u!==undefined)for(t in n)n.hasOwnProperty(t)&&n[t].setValueRange(r,u)};r.prototype.redraw=function(){this.setSize(this.constants.width,this.constants.height);this._redraw()};r.prototype._redraw=function(){var n=this.frame.canvas.getContext("2d"),t=this.frame.canvas.width,i=this.frame.canvas.height;n.clearRect(0,0,t,i);n.save();n.translate(this.translation.x,this.translation.y);n.scale(this.scale,this.scale);this.canvasTopLeft={x:this._XconvertDOMtoCanvas(0),y:this._YconvertDOMtoCanvas(0)};this.canvasBottomRight={x:this._XconvertDOMtoCanvas(this.frame.canvas.clientWidth),y:this._YconvertDOMtoCanvas(this.frame.canvas.clientHeight)};this._doInAllSectors("_drawAllSectorNodes",n);(this.drag.dragging==!1||this.drag.dragging===undefined||this.constants.hideEdgesOnDrag==!1)&&this._doInAllSectors("_drawEdges",n);(this.drag.dragging==!1||this.drag.dragging===undefined||this.constants.hideNodesOnDrag==!1)&&this._doInAllSectors("_drawNodes",n,!1);this.controlNodesActive==!0&&this._doInAllSectors("_drawControlNodes",n);n.restore()};r.prototype._setTranslation=function(n,t){this.translation===undefined&&(this.translation={x:0,y:0});n!==undefined&&(this.translation.x=n);t!==undefined&&(this.translation.y=t);this.emit("viewChanged")};r.prototype._getTranslation=function(){return{x:this.translation.x,y:this.translation.y}};r.prototype._setScale=function(n){this.scale=n};r.prototype._getScale=function(){return this.scale};r.prototype._XconvertDOMtoCanvas=function(n){return(n-this.translation.x)/this.scale};r.prototype._XconvertCanvasToDOM=function(n){return n*this.scale+this.translation.x};r.prototype._YconvertDOMtoCanvas=function(n){return(n-this.translation.y)/this.scale};r.prototype._YconvertCanvasToDOM=function(n){return n*this.scale+this.translation.y};r.prototype.canvasToDOM=function(n){return{x:this._XconvertCanvasToDOM(n.x),y:this._YconvertCanvasToDOM(n.y)}};r.prototype.DOMtoCanvas=function(n){return{x:this._XconvertDOMtoCanvas(n.x),y:this._YconvertDOMtoCanvas(n.y)}};r.prototype._drawNodes=function(n,t){var i,u,r,f,e;t===undefined&&(t=!1);i=this.nodes;u=[];for(r in i)i.hasOwnProperty(r)&&(i[r].setScaleAndPos(this.scale,this.canvasTopLeft,this.canvasBottomRight),i[r].isSelected()?u.push(r):(i[r].inArea()||t)&&i[r].draw(n));for(f=0,e=u.length;f<e;f++)(i[u[f]].inArea()||t)&&i[u[f]].draw(n)};r.prototype._drawEdges=function(n){var t=this.edges,i,r;for(i in t)t.hasOwnProperty(i)&&(r=t[i],r.setScale(this.scale),r.connected&&t[i].draw(n))};r.prototype._drawControlNodes=function(n){var t=this.edges;for(var i in t)t.hasOwnProperty(i)&&t[i]._drawControlNodes(n)};r.prototype._stabilize=function(){this.constants.freezeForStabilization==!0&&this._freezeDefinedNodes();for(var n=0;this.moving&&n<this.constants.stabilizationIterations;)this._physicsTick(),n++;this.zoomExtent(!1,!0);this.constants.freezeForStabilization==!0&&this._restoreFrozenNodes();this.emit("stabilized",{iterations:n})};r.prototype._freezeDefinedNodes=function(){var n=this.nodes;for(var t in n)n.hasOwnProperty(t)&&n[t].x!=null&&n[t].y!=null&&(n[t].fixedData.x=n[t].xFixed,n[t].fixedData.y=n[t].yFixed,n[t].xFixed=!0,n[t].yFixed=!0)};r.prototype._restoreFrozenNodes=function(){var n=this.nodes;for(var t in n)n.hasOwnProperty(t)&&n[t].fixedData.x!=null&&(n[t].xFixed=n[t].fixedData.x,n[t].yFixed=n[t].fixedData.y)};r.prototype._isMoving=function(n){var t=this.nodes;for(var i in t)if(t.hasOwnProperty(i)&&t[i].isMoving(n))return!0;return!1};r.prototype._discreteStepNodes=function(){var u=this.physicsDiscreteStepsize,n=this.nodes,t,i=!1,r;if(this.constants.maxVelocity>0)for(t in n)n.hasOwnProperty(t)&&(n[t].discreteStepLimited(u,this.constants.maxVelocity),i=!0);else for(t in n)n.hasOwnProperty(t)&&(n[t].discreteStep(u),i=!0);i==!0&&(r=this.constants.minVelocity/Math.max(this.scale,.05),r>.5*this.constants.maxVelocity?this.moving=!0:(this.moving=this._isMoving(r),this.moving==!1&&this.emit("stabilized",{iterations:null}),this.moving=this.moving||this.configurePhysics))};r.prototype._physicsTick=function(){this.freezeSimulation||this.moving==!0&&(this._doInAllActiveSectors("_initializeForceCalculation"),this._doInAllActiveSectors("_discreteStepNodes"),this.constants.smoothCurves.enabled==!0&&this.constants.smoothCurves.dynamic==!0&&this._doInSupportSector("_discreteStepNodes"),this._findCenter(this._getRange()))};r.prototype._animationStep=function(){var n,t,i,r;for(this.timer=undefined,this._handleNavigation(),this.start(),n=Date.now(),t=1,this._physicsTick(),i=Date.now()-n;i<.9*(this.renderTimestep-this.renderTime)&&t<this.maxPhysicsTicksPerRender;)this._physicsTick(),i=Date.now()-n,t++;r=Date.now();this._redraw();this.renderTime=Date.now()-r};typeof window!="undefined"&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);r.prototype.start=function(){if(this.moving==!0||this.xIncrement!=0||this.yIncrement!=0||this.zoomIncrement!=0){if(!this.timer){var n=navigator.userAgent.toLowerCase(),t=!1;n.indexOf("msie 9.0")!=-1?t=!0:n.indexOf("safari")!=-1&&n.indexOf("chrome")<=-1&&(t=!0);this.timer=t==!0?window.setTimeout(this._animationStep.bind(this),this.renderTimestep):window.requestAnimationFrame(this._animationStep.bind(this),this.renderTimestep)}}else this._redraw()};r.prototype._handleNavigation=function(){var n,t;(this.xIncrement!=0||this.yIncrement!=0)&&(n=this._getTranslation(),this._setTranslation(n.x+this.xIncrement,n.y+this.yIncrement));this.zoomIncrement!=0&&(t={x:this.frame.canvas.clientWidth/2,y:this.frame.canvas.clientHeight/2},this._zoom(this.scale*(1+this.zoomIncrement),t))};r.prototype.toggleFreeze=function(){this.freezeSimulation==!1?this.freezeSimulation=!0:(this.freezeSimulation=!1,this.start())};r.prototype._configureSmoothCurves=function(n){var t,i;if(n===undefined&&(n=!0),this.constants.smoothCurves.enabled==!0&&this.constants.smoothCurves.dynamic==!0){this._createBezierNodes();for(t in this.sectors.support.nodes)this.sectors.support.nodes.hasOwnProperty(t)&&this.edges[this.sectors.support.nodes[t].parentEdgeId]===undefined&&delete this.sectors.support.nodes[t]}else{this.sectors.support.nodes={};for(i in this.edges)this.edges.hasOwnProperty(i)&&(this.edges[i].via=null)}this._updateCalculationNodes();n||(this.moving=!0,this.start())};r.prototype._createBezierNodes=function(){var i,n,t;if(this.constants.smoothCurves.enabled==!0&&this.constants.smoothCurves.dynamic==!0)for(i in this.edges)this.edges.hasOwnProperty(i)&&(n=this.edges[i],n.via==null&&(t="edgeId:".concat(n.id),this.sectors.support.nodes[t]=new e({id:t,mass:1,shape:"circle",image:"",internalMultiplier:1},{},{},this.constants),n.via=this.sectors.support.nodes[t],n.via.parentEdgeId=n.id,n.positionBezierNode()))};r.prototype._initializeMixinLoaders=function(){for(var n in s)s.hasOwnProperty(n)&&(r.prototype[n]=s[n])};r.prototype.storePosition=function(){var i=[];for(var n in this.nodes)if(this.nodes.hasOwnProperty(n)){var t=this.nodes[n],r=!this.nodes.xFixed,u=!this.nodes.yFixed;(this.nodesData._data[n].x!=Math.round(t.x)||this.nodesData._data[n].y!=Math.round(t.y))&&i.push({id:n,x:Math.round(t.x),y:Math.round(t.y),allowedToMoveX:r,allowedToMoveY:u})}this.nodesData.update(i)};r.prototype.focusOnNode=function(n,t){var r,i;if(this.nodes.hasOwnProperty(n)){t===undefined&&(t=this._getScale());r={x:this.nodes[n].x,y:this.nodes[n].y};i=t;this._setScale(i);var u=this.DOMtoCanvas({x:.5*this.frame.canvas.width,y:.5*this.frame.canvas.height}),f=this._getTranslation(),e={x:u.x-r.x,y:u.y-r.y};this._setTranslation(f.x+i*e.x,f.y+i*e.y);this.redraw()}else console.log("This nodeId cannot be found.")};n.exports=r},function(n,t,i){function r(n,t,i){if(!t)throw"No network provided";var r=u.selectiveBridgeObject(["edges","physics"],i);this.options=r.edges;this.physics=r.physics;this.options.smoothCurves=i.smoothCurves;this.network=t;this.id=undefined;this.fromId=undefined;this.toId=undefined;this.title=undefined;this.widthSelected=this.options.width*this.options.widthSelectionMultiplier;this.value=undefined;this.selected=!1;this.hover=!1;this.from=null;this.to=null;this.via=null;this.originalFromId=[];this.originalToId=[];this.connected=!1;this.widthFixed=!1;this.lengthFixed=!1;this.setProperties(n);this.controlNodesEnabled=!1;this.controlNodes={from:null,to:null,positions:{}};this.connectedNode=null}var u=i(1),f=i(36);r.prototype.setProperties=function(n){if(n){u.selectiveDeepExtend(["style","fontSize","fontFace","fontColor","fontFill","width","widthSelectionMultiplier","hoverWidth","arrowScaleFactor","dash"],this.options,n);n.from!==undefined&&(this.fromId=n.from);n.to!==undefined&&(this.toId=n.to);n.id!==undefined&&(this.id=n.id);n.label!==undefined&&(this.label=n.label);n.title!==undefined&&(this.title=n.title);n.value!==undefined&&(this.value=n.value);n.length!==undefined&&(this.physics.springLength=n.length);n.arrowScaleFactor!==undefined&&(this.options.arrowScaleFactor=n.arrowScaleFactor);n.inheritColor!==undefined&&(this.options.inheritColor=n.inheritColor);n.color!==undefined&&(this.options.inheritColor=!1,u.isString(n.color)?(this.options.color.color=n.color,this.options.color.highlight=n.color):(n.color.color!==undefined&&(this.options.color.color=n.color.color),n.color.highlight!==undefined&&(this.options.color.highlight=n.color.highlight),n.color.hover!==undefined&&(this.options.color.hover=n.color.hover)));this.connect();this.widthFixed=this.widthFixed||n.width!==undefined;this.lengthFixed=this.lengthFixed||n.length!==undefined;this.widthSelected=this.options.width*this.options.widthSelectionMultiplier;switch(this.options.style){case"line":this.draw=this._drawLine;break;case"arrow":this.draw=this._drawArrow;break;case"arrow-center":this.draw=this._drawArrowCenter;break;case"dash-line":this.draw=this._drawDashLine;break;default:this.draw=this._drawLine}}};r.prototype.connect=function(){this.disconnect();this.from=this.network.nodes[this.fromId]||null;this.to=this.network.nodes[this.toId]||null;this.connected=this.from&&this.to;this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this))};r.prototype.disconnect=function(){this.from&&(this.from.detachEdge(this),this.from=null);this.to&&(this.to.detachEdge(this),this.to=null);this.connected=!1};r.prototype.getTitle=function(){return typeof this.title=="function"?this.title():this.title};r.prototype.getValue=function(){return this.value};r.prototype.setValueRange=function(n,t){if(!this.widthFixed&&this.value!==undefined){var i=(this.options.widthMax-this.options.widthMin)/(t-n);this.options.width=(this.value-n)*i+this.options.widthMin;this.widthSelected=this.options.width*this.options.widthSelectionMultiplier}};r.prototype.draw=function(){throw"Method draw not initialized in edge";};r.prototype.isOverlappingWith=function(n){if(this.connected){var t=this.from.x,i=this.from.y,r=this.to.x,u=this.to.y,f=n.left,e=n.top,o=this._getDistanceToEdge(t,i,r,u,f,e);return o<10}return!1};r.prototype._getColor=function(){var n=this.options.color;return this.options.inheritColor=="to"?n={highlight:this.to.options.color.highlight.border,hover:this.to.options.color.hover.border,color:this.to.options.color.border}:(this.options.inheritColor=="from"||this.options.inheritColor==!0)&&(n={highlight:this.from.options.color.highlight.border,hover:this.from.options.color.hover.border,color:this.from.options.color.border}),this.selected==!0?n.highlight:this.hover==!0?n.hover:n.color};r.prototype._drawLine=function(n){var r,i,o,s,f,e,u,t;n.strokeStyle=this._getColor();n.lineWidth=this._getLineWidth();this.from!=this.to?(r=this._line(n),this.label&&(this.options.smoothCurves.enabled==!0&&r!=null?(o=.5*(.5*(this.from.x+r.x)+.5*(this.to.x+r.x)),s=.5*(.5*(this.from.y+r.y)+.5*(this.to.y+r.y)),i={x:o,y:s}):i=this._pointOnLine(.5),this._label(n,this.label,i.x,i.y))):(u=this.physics.springLength/4,t=this.from,t.width||t.resize(n),t.width>t.height?(f=t.x+t.width/2,e=t.y-u):(f=t.x+u,e=t.y-t.height/2),this._circle(n,f,e,u),i=this._pointOnCircle(f,e,u,.5),this._label(n,this.label,i.x,i.y))};r.prototype._getLineWidth=function(){return this.selected==!0?Math.min(this.widthSelected,this.options.widthMax)*this.networkScaleInv:this.hover==!0?Math.min(this.options.hoverWidth,this.options.widthMax)*this.networkScaleInv:this.options.width*this.networkScaleInv};r.prototype._getViaCoordinates=function(){var t=null,i=null,n=this.options.smoothCurves.roundness,f=this.options.smoothCurves.type,r=Math.abs(this.from.x-this.to.x),u=Math.abs(this.from.y-this.to.y);return f=="discrete"||f=="diagonalCross"?Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)?(this.from.y>this.to.y?this.from.x<this.to.x?(t=this.from.x+n*u,i=this.from.y-n*u):this.from.x>this.to.x&&(t=this.from.x-n*u,i=this.from.y-n*u):this.from.y<this.to.y&&(this.from.x<this.to.x?(t=this.from.x+n*u,i=this.from.y+n*u):this.from.x>this.to.x&&(t=this.from.x-n*u,i=this.from.y+n*u)),f=="discrete"&&(t=r<n*u?this.from.x:t)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>this.to.y?this.from.x<this.to.x?(t=this.from.x+n*r,i=this.from.y-n*r):this.from.x>this.to.x&&(t=this.from.x-n*r,i=this.from.y-n*r):this.from.y<this.to.y&&(this.from.x<this.to.x?(t=this.from.x+n*r,i=this.from.y+n*r):this.from.x>this.to.x&&(t=this.from.x-n*r,i=this.from.y+n*r)),f=="discrete"&&(i=u<n*r?this.from.y:i)):f=="straightCross"?Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)?(t=this.from.x,i=this.from.y<this.to.y?this.to.y-(1-n)*u:this.to.y+(1-n)*u):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(t=this.from.x<this.to.x?this.to.x-(1-n)*r:this.to.x+(1-n)*r,i=this.from.y):f=="horizontal"?(t=this.from.x<this.to.x?this.to.x-(1-n)*r:this.to.x+(1-n)*r,i=this.from.y):f=="vertical"?(t=this.from.x,i=this.from.y<this.to.y?this.to.y-(1-n)*u:this.to.y+(1-n)*u):Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)?this.from.y>this.to.y?this.from.x<this.to.x?(t=this.from.x+n*u,i=this.from.y-n*u,t=this.to.x<t?this.to.x:t):this.from.x>this.to.x&&(t=this.from.x-n*u,i=this.from.y-n*u,t=this.to.x>t?this.to.x:t):this.from.y<this.to.y&&(this.from.x<this.to.x?(t=this.from.x+n*u,i=this.from.y+n*u,t=this.to.x<t?this.to.x:t):this.from.x>this.to.x&&(t=this.from.x-n*u,i=this.from.y+n*u,t=this.to.x>t?this.to.x:t)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>this.to.y?this.from.x<this.to.x?(t=this.from.x+n*r,i=this.from.y-n*r,i=this.to.y>i?this.to.y:i):this.from.x>this.to.x&&(t=this.from.x-n*r,i=this.from.y-n*r,i=this.to.y>i?this.to.y:i):this.from.y<this.to.y&&(this.from.x<this.to.x?(t=this.from.x+n*r,i=this.from.y+n*r,i=this.to.y<i?this.to.y:i):this.from.x>this.to.x&&(t=this.from.x-n*r,i=this.from.y+n*r,i=this.to.y<i?this.to.y:i))),{x:t,y:i}};r.prototype._line=function(n){if(n.beginPath(),n.moveTo(this.from.x,this.from.y),this.options.smoothCurves.enabled==!0){if(this.options.smoothCurves.dynamic==!1){var t=this._getViaCoordinates();return t.x==null?(n.lineTo(this.to.x,this.to.y),n.stroke(),null):(n.quadraticCurveTo(t.x,t.y,this.to.x,this.to.y),n.stroke(),t)}return n.quadraticCurveTo(this.via.x,this.via.y,this.to.x,this.to.y),n.stroke(),this.via}return n.lineTo(this.to.x,this.to.y),n.stroke(),null};r.prototype._circle=function(n,t,i,r){n.beginPath();n.arc(t,i,r,0,2*Math.PI,!1);n.stroke()};r.prototype._label=function(n,t,i,r){if(t){n.font=(this.from.selected||this.to.selected?"bold ":"")+this.options.fontSize+"px "+this.options.fontFace;n.fillStyle=this.options.fontFill;var u=n.measureText(t).width,f=this.options.fontSize,e=i-u/2,o=r-f/2;n.fillRect(e,o,u,f);n.fillStyle=this.options.fontColor||"black";n.textAlign="left";n.textBaseline="top";n.fillText(t,e,o)}};r.prototype._drawDashLine=function(n){var t,i,r,u,f;n.strokeStyle=this.selected==!0?this.options.color.highlight:this.hover==!0?this.options.color.hover:this.options.color.color;n.lineWidth=this._getLineWidth();t=null;n.mozDash!==undefined||n.setLineDash!==undefined?(i=[0],i=this.options.dash.length!==undefined&&this.options.dash.gap!==undefined?[this.options.dash.length,this.options.dash.gap]:[5,5],typeof n.setLineDash!="undefined"?(n.setLineDash(i),n.lineDashOffset=0):(n.mozDash=i,n.mozDashOffset=0),t=this._line(n),typeof n.setLineDash!="undefined"?(n.setLineDash([0]),n.lineDashOffset=0):(n.mozDash=[0],n.mozDashOffset=0)):(n.beginPath(),n.lineCap="round",this.options.dash.altLength!==undefined?n.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.options.dash.length,this.options.dash.gap,this.options.dash.altLength,this.options.dash.gap]):this.options.dash.length!==undefined&&this.options.dash.gap!==undefined?n.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.options.dash.length,this.options.dash.gap]):(n.moveTo(this.from.x,this.from.y),n.lineTo(this.to.x,this.to.y)),n.stroke());this.label&&(this.options.smoothCurves.enabled==!0&&t!=null?(u=.5*(.5*(this.from.x+t.x)+.5*(this.to.x+t.x)),f=.5*(.5*(this.from.y+t.y)+.5*(this.to.y+t.y)),r={x:u,y:f}):r=this._pointOnLine(.5),this._label(n,this.label,r.x,r.y))};r.prototype._pointOnLine=function(n){return{x:(1-n)*this.from.x+n*this.to.x,y:(1-n)*this.from.y+n*this.to.y}};r.prototype._pointOnCircle=function(n,t,i,r){var u=(r-3/8)*2*Math.PI;return{x:n+i*Math.cos(u),y:t-i*Math.sin(u)}};r.prototype._drawArrowCenter=function(n){var t,h,c,f,e,r,i,o,s;if(this.selected==!0?(n.strokeStyle=this.options.color.highlight,n.fillStyle=this.options.color.highlight):this.hover==!0?(n.strokeStyle=this.options.color.hover,n.fillStyle=this.options.color.hover):(n.strokeStyle=this.options.color.color,n.fillStyle=this.options.color.color),n.lineWidth=this._getLineWidth(),this.from!=this.to){var u=this._line(n),o=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x),s=(10+5*this.options.width)*this.options.arrowScaleFactor;this.options.smoothCurves.enabled==!0&&u!=null?(h=.5*(.5*(this.from.x+u.x)+.5*(this.to.x+u.x)),c=.5*(.5*(this.from.y+u.y)+.5*(this.to.y+u.y)),t={x:h,y:c}):t=this._pointOnLine(.5);n.arrow(t.x,t.y,o,s);n.fill();n.stroke();this.label&&this._label(n,this.label,t.x,t.y)}else r=.25*Math.max(100,this.physics.springLength),i=this.from,i.width||i.resize(n),i.width>i.height?(f=i.x+i.width*.5,e=i.y-r):(f=i.x+r,e=i.y-i.height*.5),this._circle(n,f,e,r),o=.2*Math.PI,s=(10+5*this.options.width)*this.options.arrowScaleFactor,t=this._pointOnCircle(f,e,r,.5),n.arrow(t.x,t.y,o,s),n.fill(),n.stroke(),this.label&&(t=this._pointOnCircle(f,e,r,.5),this._label(n,this.label,t.x,t.y))};r.prototype._drawArrow=function(n){var f,b,r,h,c,u,k,d,i,l,a,v,y,p;if(this.selected==!0?(n.strokeStyle=this.options.color.highlight,n.fillStyle=this.options.color.highlight):this.hover==!0?(n.strokeStyle=this.options.color.hover,n.fillStyle=this.options.color.hover):(n.strokeStyle=this.options.color.color,n.fillStyle=this.options.color.color),n.lineWidth=this._getLineWidth(),this.from!=this.to){f=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x);var e=this.to.x-this.from.x,o=this.to.y-this.from.y,s=Math.sqrt(e*e+o*o),g=this.from.distanceToBorder(n,f+Math.PI),w=(s-g)/s,nt=w*this.from.x+(1-w)*this.to.x,tt=w*this.from.y+(1-w)*this.to.y,t;this.options.smoothCurves.dynamic==!0&&this.options.smoothCurves.enabled==!0?t=this.via:this.options.smoothCurves.enabled==!0&&(t=this._getViaCoordinates());this.options.smoothCurves.enabled==!0&&t.x!=null&&(f=Math.atan2(this.to.y-t.y,this.to.x-t.x),e=this.to.x-t.x,o=this.to.y-t.y,s=Math.sqrt(e*e+o*o));b=this.to.distanceToBorder(n,f);r=(s-b)/s;this.options.smoothCurves.enabled==!0&&t.x!=null?(h=(1-r)*t.x+r*this.to.x,c=(1-r)*t.y+r*this.to.y):(h=(1-r)*this.from.x+r*this.to.x,c=(1-r)*this.from.y+r*this.to.y);n.beginPath();n.moveTo(nt,tt);this.options.smoothCurves.enabled==!0&&t.x!=null?n.quadraticCurveTo(t.x,t.y,h,c):n.lineTo(h,c);n.stroke();p=(10+5*this.options.width)*this.options.arrowScaleFactor;n.arrow(h,c,f,p);n.fill();n.stroke();this.label&&(this.options.smoothCurves.enabled==!0&&t!=null?(k=.5*(.5*(this.from.x+t.x)+.5*(this.to.x+t.x)),d=.5*(.5*(this.from.y+t.y)+.5*(this.to.y+t.y)),u={x:k,y:d}):u=this._pointOnLine(.5),this._label(n,this.label,u.x,u.y))}else i=this.from,y=.25*Math.max(100,this.physics.springLength),i.width||i.resize(n),i.width>i.height?(l=i.x+i.width*.5,a=i.y-y,v={x:l,y:i.y,angle:.9*Math.PI}):(l=i.x+y,a=i.y-i.height*.5,v={x:i.x,y:a,angle:.6*Math.PI}),n.beginPath(),n.arc(l,a,y,0,2*Math.PI,!1),n.stroke(),p=(10+5*this.options.width)*this.options.arrowScaleFactor,n.arrow(v.x,v.y,v.angle,p),n.fill(),n.stroke(),this.label&&(u=this._pointOnCircle(l,a,y,.5),this._label(n,this.label,u.x,u.y))};r.prototype._getDistanceToEdge=function(n,t,i,r,u,f){var v,y,p,c,w,l,o,d,g,s,h,b,k,a,e;if(this.from!=this.to){if(this.options.smoothCurves.enabled==!0){for(this.options.smoothCurves.enabled==!0&&this.options.smoothCurves.dynamic==!0?(v=this.via.x,y=this.via.y):(p=this._getViaCoordinates(),v=p.x,y=p.y),c=1e9,l=0;l<10;l++)o=.1*l,s=Math.pow(1-o,2)*n+2*o*(1-o)*v+Math.pow(o,2)*i,h=Math.pow(1-o,2)*t+2*o*(1-o)*y+Math.pow(o,2)*r,l>0&&(w=this._getDistanceToLine(d,g,s,h,u,f),c=w<c?w:c),d=s,g=h;return c}return this._getDistanceToLine(n,t,i,r,u,f)}return a=this.physics.springLength/4,e=this.from,e.width||e.resize(ctx),e.width>e.height?(s=e.x+e.width/2,h=e.y-a):(s=e.x+a,h=e.y-e.height/2),b=s-u,k=h-f,Math.abs(Math.sqrt(b*b+k*k)-a)};r.prototype._getDistanceToLine=function(n,t,i,r,u,f){var o=i-n,s=r-t,l=o*o+s*s,e=((u-n)*o+(f-t)*s)/l;e>1?e=1:e<0&&(e=0);var a=n+e*o,v=t+e*s,h=a-u,c=v-f;return Math.sqrt(h*h+c*c)};r.prototype.setScale=function(n){this.networkScaleInv=1/n};r.prototype.select=function(){this.selected=!0};r.prototype.unselect=function(){this.selected=!1};r.prototype.positionBezierNode=function(){this.via!==null&&this.from!==null&&this.to!==null&&(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y))};r.prototype._drawControlNodes=function(n){if(this.controlNodesEnabled==!0){if(this.controlNodes.from===null&&this.controlNodes.to===null){var i="edgeIdFrom:".concat(this.id),r="edgeIdTo:".concat(this.id),t={nodes:{group:"",radius:8},physics:{damping:0},clustering:{maxNodeSizeIncrements:0,nodeScaling:{width:0,height:0,radius:0}}};this.controlNodes.from=new f({id:i,shape:"dot",color:{background:"#ff4e00",border:"#3c3c3c",highlight:{background:"#07f968"}}},{},{},t);this.controlNodes.to=new f({id:r,shape:"dot",color:{background:"#ff4e00",border:"#3c3c3c",highlight:{background:"#07f968"}}},{},{},t)}this.controlNodes.from.selected==!1&&this.controlNodes.to.selected==!1&&(this.controlNodes.positions=this.getControlNodePositions(n),this.controlNodes.from.x=this.controlNodes.positions.from.x,this.controlNodes.from.y=this.controlNodes.positions.from.y,this.controlNodes.to.x=this.controlNodes.positions.to.x,this.controlNodes.to.y=this.controlNodes.positions.to.y);this.controlNodes.from.draw(n);this.controlNodes.to.draw(n)}else this.controlNodes={from:null,to:null,positions:{}}};r.prototype._enableControlNodes=function(){this.controlNodesEnabled=!0};r.prototype._disableControlNodes=function(){this.controlNodesEnabled=!1};r.prototype._getSelectedControlNode=function(n,t){var i=this.controlNodes.positions,r=Math.sqrt(Math.pow(n-i.from.x,2)+Math.pow(t-i.from.y,2)),u=Math.sqrt(Math.pow(n-i.to.x,2)+Math.pow(t-i.to.y,2));return r<15?(this.connectedNode=this.from,this.from=this.controlNodes.from,this.controlNodes.from):u<15?(this.connectedNode=this.to,this.to=this.controlNodes.to,this.controlNodes.to):null};r.prototype._restoreControlNodes=function(){this.controlNodes.from.selected==!0&&(this.from=this.connectedNode,this.connectedNode=null,this.controlNodes.from.unselect());this.controlNodes.to.selected==!0&&(this.to=this.connectedNode,this.connectedNode=null,this.controlNodes.to.unselect())};r.prototype.getControlNodePositions=function(n){var o=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x),r=this.to.x-this.from.x,u=this.to.y-this.from.y,f=Math.sqrt(r*r+u*u),l=this.from.distanceToBorder(n,o+Math.PI),e=(f-l)/f,a=e*this.from.x+(1-e)*this.to.x,v=e*this.from.y+(1-e)*this.to.y,t,c,i,s,h;return this.options.smoothCurves.dynamic==!0&&this.options.smoothCurves.enabled==!0?t=this.via:this.options.smoothCurves.enabled==!0&&(t=this._getViaCoordinates()),this.options.smoothCurves.enabled==!0&&t.x!=null&&(o=Math.atan2(this.to.y-t.y,this.to.x-t.x),r=this.to.x-t.x,u=this.to.y-t.y,f=Math.sqrt(r*r+u*u)),c=this.to.distanceToBorder(n,o),i=(f-c)/f,this.options.smoothCurves.enabled==!0&&t.x!=null?(s=(1-i)*t.x+i*this.to.x,h=(1-i)*t.y+i*this.to.y):(s=(1-i)*this.from.x+i*this.to.x,h=(1-i)*this.from.y+i*this.to.y),{from:{x:a,y:v},to:{x:s,y:h}}};n.exports=r},function(n,t,i){function r(){this.clear();this.defaultIndex=0}var u=i(1);r.DEFAULT=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}}];r.prototype.clear=function(){this.groups={};this.groups.length=function(){var n=0;for(var t in this)this.hasOwnProperty(t)&&n++;return n}};r.prototype.get=function(n){var t=this.groups[n],i;return t==undefined&&(i=this.defaultIndex%r.DEFAULT.length,this.defaultIndex++,t={},t.color=r.DEFAULT[i],this.groups[n]=t),t};r.prototype.add=function(n,t){return this.groups[n]=t,t.color&&(t.color=u.parseColor(t.color)),t};n.exports=r},function(n){function t(){this.images={};this.callback=undefined}t.prototype.setOnloadCallback=function(n){this.callback=n};t.prototype.load=function(n){var t=this.images[n],i;return t==undefined&&(i=this,t=new Image,this.images[n]=t,t.onload=function(){i.callback&&i.callback(this)},t.src=n),t};n.exports=t},function(n,t,i){function r(n,t,i,r){var f=u.selectiveBridgeObject(["nodes"],r);this.options=f.nodes;this.selected=!1;this.hover=!1;this.edges=[];this.dynamicEdges=[];this.reroutedEdges={};this.fontDrawThreshold=3;this.id=undefined;this.x=null;this.y=null;this.xFixed=!1;this.yFixed=!1;this.horizontalAlignLeft=!0;this.verticalAlignTop=!0;this.baseRadiusValue=r.nodes.radius;this.radiusFixed=!1;this.level=-1;this.preassignedLevel=!1;this.imagelist=t;this.grouplist=i;this.fx=0;this.fy=0;this.vx=0;this.vy=0;this.damping=r.physics.damping;this.fixedData={x:null,y:null};this.setProperties(n,f);this.resetCluster();this.dynamicEdgesLength=0;this.clusterSession=0;this.clusterSizeWidthFactor=r.clustering.nodeScaling.width;this.clusterSizeHeightFactor=r.clustering.nodeScaling.height;this.clusterSizeRadiusFactor=r.clustering.nodeScaling.radius;this.maxNodeSizeIncrements=r.clustering.maxNodeSizeIncrements;this.growthIndicator=0;this.networkScaleInv=1;this.networkScale=1;this.canvasTopLeft={x:-300,y:-300};this.canvasBottomRight={x:300,y:300};this.parentEdgeId=null}var u=i(1);r.prototype.resetCluster=function(){this.formationScale=undefined;this.clusterSize=1;this.containedNodes={};this.containedEdges={};this.clusterSessions=[]};r.prototype.attachEdge=function(n){this.edges.indexOf(n)==-1&&this.edges.push(n);this.dynamicEdges.indexOf(n)==-1&&this.dynamicEdges.push(n);this.dynamicEdgesLength=this.dynamicEdges.length};r.prototype.detachEdge=function(n){var t=this.edges.indexOf(n);t!=-1&&(this.edges.splice(t,1),this.dynamicEdges.splice(t,1));this.dynamicEdgesLength=this.dynamicEdges.length};r.prototype.setProperties=function(n,t){var f,i,r;if(n){if(f=["borderWidth","borderWidthSelected","shape","image","radius","fontColor","fontSize","fontFace","group","mass"],u.selectiveDeepExtend(f,this.options,n),this.originalLabel=undefined,n.id!==undefined&&(this.id=n.id),n.label!==undefined&&(this.label=n.label,this.originalLabel=n.label),n.title!==undefined&&(this.title=n.title),n.x!==undefined&&(this.x=n.x),n.y!==undefined&&(this.y=n.y),n.value!==undefined&&(this.value=n.value),n.level!==undefined&&(this.level=n.level,this.preassignedLevel=!0),n.horizontalAlignLeft!==undefined&&(this.horizontalAlignLeft=n.horizontalAlignLeft),n.verticalAlignTop!==undefined&&(this.verticalAlignTop=n.verticalAlignTop),n.triggerFunction!==undefined&&(this.triggerFunction=n.triggerFunction),this.id===undefined)throw"Node must have an id";if(this.options.group!==undefined&&this.options.group!=""){i=this.grouplist.get(this.options.group);for(r in i)i.hasOwnProperty(r)&&(this.options[r]=i[r])}if(n.radius!==undefined&&(this.baseRadiusValue=this.options.radius),n.color!==undefined&&(this.options.color=u.parseColor(n.color)),this.options.image!==undefined&&this.options.image!="")if(this.imagelist)this.imageObj=this.imagelist.load(this.options.image);else throw"No imagelist provided";this.xFixed=this.xFixed||n.x!==undefined&&!n.allowedToMoveX;this.yFixed=this.yFixed||n.y!==undefined&&!n.allowedToMoveY;this.radiusFixed=this.radiusFixed||n.radius!==undefined;this.options.shape=="image"&&(this.options.radiusMin=t.nodes.widthMin,this.options.radiusMax=t.nodes.widthMax);switch(this.options.shape){case"database":this.draw=this._drawDatabase;this.resize=this._resizeDatabase;break;case"box":this.draw=this._drawBox;this.resize=this._resizeBox;break;case"circle":this.draw=this._drawCircle;this.resize=this._resizeCircle;break;case"ellipse":this.draw=this._drawEllipse;this.resize=this._resizeEllipse;break;case"image":this.draw=this._drawImage;this.resize=this._resizeImage;break;case"text":this.draw=this._drawText;this.resize=this._resizeText;break;case"dot":this.draw=this._drawDot;this.resize=this._resizeShape;break;case"square":this.draw=this._drawSquare;this.resize=this._resizeShape;break;case"triangle":this.draw=this._drawTriangle;this.resize=this._resizeShape;break;case"triangleDown":this.draw=this._drawTriangleDown;this.resize=this._resizeShape;break;case"star":this.draw=this._drawStar;this.resize=this._resizeShape;break;default:this.draw=this._drawEllipse;this.resize=this._resizeEllipse}this._reset()}};r.prototype.select=function(){this.selected=!0;this._reset()};r.prototype.unselect=function(){this.selected=!1;this._reset()};r.prototype.clearSizeCache=function(){this._reset()};r.prototype._reset=function(){this.width=undefined;this.height=undefined};r.prototype.getTitle=function(){return typeof this.title=="function"?this.title():this.title};r.prototype.distanceToBorder=function(n,t){var i=1;this.width||this.resize(n);switch(this.options.shape){case"circle":case"dot":return this.options.radius+i;case"ellipse":var r=this.width/2,u=this.height/2,f=Math.sin(t)*r,e=Math.cos(t)*u;return r*u/Math.sqrt(f*f+e*e);case"box":case"image":case"text":default:return this.width?Math.min(Math.abs(this.width/2/Math.cos(t)),Math.abs(this.height/2/Math.sin(t)))+i:0}};r.prototype._setForce=function(n,t){this.fx=n;this.fy=t};r.prototype._addForce=function(n,t){this.fx+=n;this.fy+=t};r.prototype.discreteStep=function(n){var t,i,r,u;this.xFixed||(t=this.damping*this.vx,i=(this.fx-t)/this.options.mass,this.vx+=i*n,this.x+=this.vx*n);this.yFixed||(r=this.damping*this.vy,u=(this.fy-r)/this.options.mass,this.vy+=u*n,this.y+=this.vy*n)};r.prototype.discreteStepLimited=function(n,t){var i,r,u,f;this.xFixed?this.fx=0:(i=this.damping*this.vx,r=(this.fx-i)/this.options.mass,this.vx+=r*n,this.vx=Math.abs(this.vx)>t?this.vx>0?t:-t:this.vx,this.x+=this.vx*n);this.yFixed?this.fy=0:(u=this.damping*this.vy,f=(this.fy-u)/this.options.mass,this.vy+=f*n,this.vy=Math.abs(this.vy)>t?this.vy>0?t:-t:this.vy,this.y+=this.vy*n)};r.prototype.isFixed=function(){return this.xFixed&&this.yFixed};r.prototype.isMoving=function(n){return Math.abs(this.vx)>n||Math.abs(this.vy)>n};r.prototype.isSelected=function(){return this.selected};r.prototype.getValue=function(){return this.value};r.prototype.getDistance=function(n,t){var i=this.x-n,r=this.y-t;return Math.sqrt(i*i+r*r)};r.prototype.setValueRange=function(n,t){if(!this.radiusFixed&&this.value!==undefined)if(t==n)this.options.radius=(this.options.radiusMin+this.options.radiusMax)/2;else{var i=(this.options.radiusMax-this.options.radiusMin)/(t-n);this.options.radius=(this.value-n)*i+this.options.radiusMin}this.baseRadiusValue=this.options.radius};r.prototype.draw=function(){throw"Draw method not initialized for node";};r.prototype.resize=function(){throw"Resize method not initialized for node";};r.prototype.isOverlappingWith=function(n){return this.left<n.right&&this.left+this.width>n.left&&this.top<n.bottom&&this.top+this.height>n.top};r.prototype._resizeImage=function(){var n,t,i;this.width&&this.height||(this.value?(this.options.radius=this.baseRadiusValue,i=this.imageObj.height/this.imageObj.width,i!==undefined?(n=this.options.radius||this.imageObj.width,t=this.options.radius*i||this.imageObj.height):(n=0,t=0)):(n=this.imageObj.width,t=this.imageObj.height),this.width=n,this.height=t,this.growthIndicator=0,this.width>0&&this.height>0&&(this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-n))};r.prototype._drawImage=function(n){var i,t;this._resizeImage(n);this.left=this.x-this.width/2;this.top=this.y-this.height/2;this.imageObj.width!=0?(this.clusterSize>1&&(t=this.clusterSize>1?10:0,t*=this.networkScaleInv,t=Math.min(.2*this.width,t),n.globalAlpha=.5,n.drawImage(this.imageObj,this.left-t,this.top-t,this.width+2*t,this.height+2*t)),n.globalAlpha=1,n.drawImage(this.imageObj,this.left,this.top,this.width,this.height),i=this.y+this.height/2):i=this.y;this._label(n,this.label,this.x,i,undefined,"top")};r.prototype._resizeBox=function(n){if(!this.width){var t=5,i=this.getTextSize(n);this.width=i.width+2*t;this.height=i.height+2*t;this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*.5*this.clusterSizeWidthFactor;this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*.5*this.clusterSizeHeightFactor;this.growthIndicator=this.width-(i.width+2*t)}};r.prototype._drawBox=function(n){this._resizeBox(n);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var t=2.5,i=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth;n.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border;this.clusterSize>1&&(n.lineWidth=(this.selected?r:i)+(this.clusterSize>1?t:0),n.lineWidth*=this.networkScaleInv,n.lineWidth=Math.min(this.width,n.lineWidth),n.roundRect(this.left-2*n.lineWidth,this.top-2*n.lineWidth,this.width+4*n.lineWidth,this.height+4*n.lineWidth,this.options.radius),n.stroke());n.lineWidth=(this.selected?r:i)+(this.clusterSize>1?t:0);n.lineWidth*=this.networkScaleInv;n.lineWidth=Math.min(this.width,n.lineWidth);n.fillStyle=this.selected?this.options.color.highlight.background:this.options.color.background;n.roundRect(this.left,this.top,this.width,this.height,this.options.radius);n.fill();n.stroke();this._label(n,this.label,this.x,this.y)};r.prototype._resizeDatabase=function(n){if(!this.width){var i=this.getTextSize(n),t=i.width+10;this.width=t;this.height=t;this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor;this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor;this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor;this.growthIndicator=this.width-t}};r.prototype._drawDatabase=function(n){this._resizeDatabase(n);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var t=2.5,i=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth;n.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border;this.clusterSize>1&&(n.lineWidth=(this.selected?r:i)+(this.clusterSize>1?t:0),n.lineWidth*=this.networkScaleInv,n.lineWidth=Math.min(this.width,n.lineWidth),n.database(this.x-this.width/2-2*n.lineWidth,this.y-this.height*.5-2*n.lineWidth,this.width+4*n.lineWidth,this.height+4*n.lineWidth),n.stroke());n.lineWidth=(this.selected?r:i)+(this.clusterSize>1?t:0);n.lineWidth*=this.networkScaleInv;n.lineWidth=Math.min(this.width,n.lineWidth);n.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background;n.database(this.x-this.width/2,this.y-this.height*.5,this.width,this.height);n.fill();n.stroke();this._label(n,this.label,this.x,this.y)};r.prototype._resizeCircle=function(n){if(!this.width){var i=this.getTextSize(n),t=Math.max(i.width,i.height)+10;this.options.radius=t/2;this.width=t;this.height=t;this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*.5*this.clusterSizeRadiusFactor;this.growthIndicator=this.options.radius-.5*t}};r.prototype._drawCircle=function(n){this._resizeCircle(n);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var t=2.5,i=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth;n.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border;this.clusterSize>1&&(n.lineWidth=(this.selected?r:i)+(this.clusterSize>1?t:0),n.lineWidth*=this.networkScaleInv,n.lineWidth=Math.min(this.width,n.lineWidth),n.circle(this.x,this.y,this.options.radius+2*n.lineWidth),n.stroke());n.lineWidth=(this.selected?r:i)+(this.clusterSize>1?t:0);n.lineWidth*=this.networkScaleInv;n.lineWidth=Math.min(this.width,n.lineWidth);n.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background;n.circle(this.x,this.y,this.options.radius);n.fill();n.stroke();this._label(n,this.label,this.x,this.y)};r.prototype._resizeEllipse=function(n){var t,i;this.width||(t=this.getTextSize(n),this.width=t.width*1.5,this.height=t.height*2,this.width<this.height&&(this.width=this.height),i=this.width,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-i)};r.prototype._drawEllipse=function(n){this._resizeEllipse(n);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var t=2.5,i=this.options.borderWidth,r=this.options.borderWidthSelected||2*this.options.borderWidth;n.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border;this.clusterSize>1&&(n.lineWidth=(this.selected?r:i)+(this.clusterSize>1?t:0),n.lineWidth*=this.networkScaleInv,n.lineWidth=Math.min(this.width,n.lineWidth),n.ellipse(this.left-2*n.lineWidth,this.top-2*n.lineWidth,this.width+4*n.lineWidth,this.height+4*n.lineWidth),n.stroke());n.lineWidth=(this.selected?r:i)+(this.clusterSize>1?t:0);n.lineWidth*=this.networkScaleInv;n.lineWidth=Math.min(this.width,n.lineWidth);n.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background;n.ellipse(this.left,this.top,this.width,this.height);n.fill();n.stroke();this._label(n,this.label,this.x,this.y)};r.prototype._drawDot=function(n){this._drawShape(n,"circle")};r.prototype._drawTriangle=function(n){this._drawShape(n,"triangle")};r.prototype._drawTriangleDown=function(n){this._drawShape(n,"triangleDown")};r.prototype._drawSquare=function(n){this._drawShape(n,"square")};r.prototype._drawStar=function(n){this._drawShape(n,"star")};r.prototype._resizeShape=function(){if(!this.width){this.options.radius=this.baseRadiusValue;var n=2*this.options.radius;this.width=n;this.height=n;this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor;this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor;this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*.5*this.clusterSizeRadiusFactor;this.growthIndicator=this.width-n}};r.prototype._drawShape=function(n,t){this._resizeShape(n);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var r=2.5,u=this.options.borderWidth,f=this.options.borderWidthSelected||2*this.options.borderWidth,i=2;switch(t){case"dot":i=2;break;case"square":i=2;break;case"triangle":i=3;break;case"triangleDown":i=3;break;case"star":i=4}n.strokeStyle=this.selected?this.options.color.highlight.border:this.hover?this.options.color.hover.border:this.options.color.border;this.clusterSize>1&&(n.lineWidth=(this.selected?f:u)+(this.clusterSize>1?r:0),n.lineWidth*=this.networkScaleInv,n.lineWidth=Math.min(this.width,n.lineWidth),n[t](this.x,this.y,this.options.radius+i*n.lineWidth),n.stroke());n.lineWidth=(this.selected?f:u)+(this.clusterSize>1?r:0);n.lineWidth*=this.networkScaleInv;n.lineWidth=Math.min(this.width,n.lineWidth);n.fillStyle=this.selected?this.options.color.highlight.background:this.hover?this.options.color.hover.background:this.options.color.background;n[t](this.x,this.y,this.options.radius);n.fill();n.stroke();this.label&&this._label(n,this.label,this.x,this.y+this.height/2,undefined,"top",!0)};r.prototype._resizeText=function(n){if(!this.width){var t=5,i=this.getTextSize(n);this.width=i.width+2*t;this.height=i.height+2*t;this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor;this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor;this.options.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor;this.growthIndicator=this.width-(i.width+2*t)}};r.prototype._drawText=function(n){this._resizeText(n);this.left=this.x-this.width/2;this.top=this.y-this.height/2;this._label(n,this.label,this.x,this.y)};r.prototype._label=function(n,t,i,r,u,f,e){var o;if(t&&Number(this.options.fontSize)*this.networkScale>this.fontDrawThreshold){n.font=(this.selected?"bold ":"")+this.options.fontSize+"px "+this.options.fontFace;n.fillStyle=this.options.fontColor||"black";n.textAlign=u||"center";n.textBaseline=f||"middle";var l=t.split("\n"),s=l.length,h=Number(this.options.fontSize)+4,c=r+(1-s)/2*h;for(e==!0&&(c=r+(1-s)/(2*h)),o=0;o<s;o++)n.fillText(l[o],i,c),c+=h}};r.prototype.getTextSize=function(n){var t,u;if(this.label!==undefined){n.font=(this.selected?"bold ":"")+this.options.fontSize+"px "+this.options.fontFace;var i=this.label.split("\n"),f=(Number(this.options.fontSize)+4)*i.length,r=0;for(t=0,u=i.length;t<u;t++)r=Math.max(r,n.measureText(i[t]).width);return{width:r,height:f}}return{width:0,height:0}};r.prototype.inArea=function(){return this.width!==undefined?this.x+this.width*this.networkScaleInv>=this.canvasTopLeft.x&&this.x-this.width*this.networkScaleInv<this.canvasBottomRight.x&&this.y+this.height*this.networkScaleInv>=this.canvasTopLeft.y&&this.y-this.height*this.networkScaleInv<this.canvasBottomRight.y:!0};r.prototype.inView=function(){return this.x>=this.canvasTopLeft.x&&this.x<this.canvasBottomRight.x&&this.y>=this.canvasTopLeft.y&&this.y<this.canvasBottomRight.y};r.prototype.setScaleAndPos=function(n,t,i){this.networkScaleInv=1/n;this.networkScale=n;this.canvasTopLeft=t;this.canvasBottomRight=i};r.prototype.setScale=function(n){this.networkScaleInv=1/n;this.networkScale=n};r.prototype.clearVelocity=function(){this.vx=0;this.vy=0};r.prototype.updateVelocity=function(n){var t=this.vx*this.vx*n;this.vx=Math.sqrt(t/this.options.mass);t=this.vy*this.vy*n;this.vy=Math.sqrt(t/this.options.mass)};n.exports=r},function(n){function t(n,t,i,r,u){this.container=n?n:document.body;u===undefined&&(typeof t=="object"?(u=t,t=undefined):typeof r=="object"?(u=r,r=undefined):u={fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}});this.x=0;this.y=0;this.padding=5;t!==undefined&&i!==undefined&&this.setPosition(t,i);r!==undefined&&this.setText(r);this.frame=document.createElement("div");var f=this.frame.style;f.position="absolute";f.visibility="hidden";f.border="1px solid "+u.color.border;f.color=u.fontColor;f.fontSize=u.fontSize+"px";f.fontFamily=u.fontFace;f.padding=this.padding+"px";f.backgroundColor=u.color.background;f.borderRadius="3px";f.MozBorderRadius="3px";f.WebkitBorderRadius="3px";f.boxShadow="3px 3px 10px rgba(128, 128, 128, 0.5)";f.whiteSpace="nowrap";this.container.appendChild(this.frame)}t.prototype.setPosition=function(n,t){this.x=parseInt(n);this.y=parseInt(t)};t.prototype.setText=function(n){this.frame.innerHTML=n};t.prototype.show=function(n){var t;if(n===undefined&&(n=!0),n){var r=this.frame.clientHeight,u=this.frame.clientWidth,f=this.frame.parentNode.clientHeight,e=this.frame.parentNode.clientWidth,i=this.y-r;i+r+this.padding>f&&(i=f-r-this.padding);i<this.padding&&(i=this.padding);t=this.x;t+u+this.padding>e&&(t=e-u-this.padding);t<this.padding&&(t=this.padding);this.frame.style.left=t+"px";this.frame.style.top=i+"px";this.frame.style.visibility="visible"}else this.hide()};t.prototype.hide=function(){this.frame.style.visibility="hidden"};n.exports=t},function(n,t){function y(n){return h=n,et()}function it(){l=0;r=h.charAt(0)}function f(){l++;r=h.charAt(l)}function a(){return h.charAt(l+1)}function w(n){return rt.test(n)}function c(n,t){if(n||(n={}),t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function ut(n,t,i){for(var f=t.split("."),r=n,u;f.length;)u=f.shift(),f.length?(r[u]||(r[u]={}),r=r[u]):r[u]=i}function b(n,t){for(var i,o,r=null,e=[n],u=n,f;u.parent;)e.push(u.parent),u=u.parent;if(u.nodes)for(i=0,o=u.nodes.length;i<o;i++)if(t.id===u.nodes[i].id){r=u.nodes[i];break}for(r||(r={id:t.id},n.node&&(r.attr=c(r.attr,n.node))),i=e.length-1;i>=0;i--)f=e[i],f.nodes||(f.nodes=[]),f.nodes.indexOf(r)==-1&&f.nodes.push(r);t.attr&&(r.attr=c(r.attr,t.attr))}function ft(n,t){if(n.edges||(n.edges=[]),n.edges.push(t),n.edge){var i=c({},n.edge);t.attr=c(i,t.attr)}}function k(n,t,i,r,u){var f={from:t,to:i,type:r};return n.edge&&(f.attr=c({},n.edge)),f.attr=c(f.attr||{},u),f}function u(){var t,n,u;for(o=e.NULL,i="";r==" "||r=="\t"||r=="\n"||r=="\r";)f();do{if(t=!1,r=="#"){for(n=l-1;h.charAt(n)==" "||h.charAt(n)=="\t";)n--;if(h.charAt(n)=="\n"||h.charAt(n)==""){while(r!=""&&r!="\n")f();t=!0}}if(r=="/"&&a()=="/"){while(r!=""&&r!="\n")f();t=!0}if(r=="/"&&a()=="*"){while(r!="")if(r=="*"&&a()=="/"){f();f();break}else f();t=!0}while(r==" "||r=="\t"||r=="\n"||r=="\r")f()}while(t);if(r==""){o=e.DELIMITER;return}if(u=r+a(),p[u]){o=e.DELIMITER;i=u;f();f();return}if(p[r]){o=e.DELIMITER;i=r;f();return}if(w(r)||r=="-"){for(i+=r,f();w(r);)i+=r,f();i=="false"?i=!1:i=="true"?i=!0:isNaN(Number(i))||(i=Number(i));o=e.IDENTIFIER;return}if(r=='"'){for(f();r!=""&&(r!='"'||r=='"'&&a()=='"');)i+=r,r=='"'&&f(),f();if(r!='"')throw s('End of string " expected');f();o=e.IDENTIFIER;return}for(o=e.UNKNOWN;r!="";)i+=r,f();throw new SyntaxError('Syntax error in part "'+tt(i,30)+'"');}function et(){var n={};if(it(),u(),i=="strict"&&(n.strict=!0,u()),(i=="graph"||i=="digraph")&&(n.type=i,u()),o==e.IDENTIFIER&&(n.id=i,u()),i!="{")throw s("Angle bracket { expected");if(u(),d(n),i!="}")throw s("Angle bracket } expected");if(u(),i!=="")throw s("End of file expected");return u(),delete n.node,delete n.edge,delete n.graph,n}function d(n){while(i!==""&&i!="}")ot(n),i==";"&&u()}function ot(n){var r=g(n),f,t;if(r){nt(n,r);return}if(f=st(n),!f){if(o!=e.IDENTIFIER)throw s("Identifier expected");if(t=i,u(),i=="="){if(u(),o!=e.IDENTIFIER)throw s("Identifier expected");n[t]=i;u()}else ht(n,t)}}function g(n){var t=null;if(i=="subgraph"&&(t={},t.type="subgraph",u(),o==e.IDENTIFIER&&(t.id=i,u())),i=="{"){if(u(),t||(t={}),t.parent=n,t.node=n.node,t.edge=n.edge,t.graph=n.graph,d(t),i!="}")throw s("Angle bracket } expected");u();delete t.node;delete t.edge;delete t.graph;delete t.parent;n.subgraphs||(n.subgraphs=[]);n.subgraphs.push(t)}return t}function st(n){return i=="node"?(u(),n.node=v(),"node"):i=="edge"?(u(),n.edge=v(),"edge"):i=="graph"?(u(),n.graph=v(),"graph"):null}function ht(n,t){var i={id:t},r=v();r&&(i.attr=r);b(n,i);nt(n,t)}function nt(n,t){for(var r,h,f,c,l;i=="->"||i=="--";){if(h=i,u(),f=g(n),f)r=f;else{if(o!=e.IDENTIFIER)throw s("Identifier or subgraph expected");r=i;b(n,{id:r});u()}c=v();l=k(n,t,r,h,c);ft(n,l);t=r}}function v(){for(var n=null,t,r;i=="[";){for(u(),n={};i!==""&&i!="]";){if(o!=e.IDENTIFIER)throw s("Attribute name expected");if(t=i,u(),i!="=")throw s("Equal sign = expected");if(u(),o!=e.IDENTIFIER)throw s("Attribute value expected");r=i;ut(n,t,r);u();i==","&&u()}if(i!="]")throw s("Bracket ] expected");u()}return n}function s(n){return new SyntaxError(n+', got "'+tt(i,30)+'" (char '+l+")")}function tt(n,t){return n.length<=t?n:n.substr(0,27)+"..."}function ct(n,t,i){n instanceof Array?n.forEach(function(n){t instanceof Array?t.forEach(function(t){i(n,t)}):i(n,t)}):t instanceof Array?t.forEach(function(t){i(n,t)}):i(n,t)}function lt(n){var i=y(n),t={nodes:[],edges:[],options:{}};if(i.nodes&&i.nodes.forEach(function(n){var i={id:n.id,label:String(n.label||n.id)};c(i,n.attr);i.image&&(i.shape="image");t.nodes.push(i)}),i.edges){function r(n){var t={from:n.from,to:n.to};return c(t,n.attr),t.style=n.type=="->"?"arrow":"line",t}i.edges.forEach(function(n){var i,u;i=n.from instanceof Object?n.from.nodes:{id:n.from};u=n.to instanceof Object?n.to.nodes:{id:n.to};n.from instanceof Object&&n.from.edges&&n.from.edges.forEach(function(n){var i=r(n);t.edges.push(i)});ct(i,u,function(i,u){var f=k(t,i.id,u.id,n.type,n.attr),e=r(f);t.edges.push(e)});n.to instanceof Object&&n.to.edges&&n.to.edges.forEach(function(n){var i=r(n);t.edges.push(i)})})}return i.attr&&(t.options=i.attr),t}var e={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},p={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},h="",l=0,r="",i="",o=e.NULL,rt=/[a-zA-Z_0-9.:#]/;t.parseDOT=y;t.DOTToGraph=lt},function(n,t){function i(n,t){var h=[],c=[],o,s,u,e,f,i,r;for(this.options={edges:{inheritColor:!0},nodes:{allowedToMove:!1,parseColor:!1}},t!==undefined&&(this.options.nodes.allowedToMove=t.allowedToMove|!1,this.options.nodes.parseColor=t.parseColor|!1,this.options.edges.inheritColor=t.inheritColor|!0),o=n.edges,s=n.nodes,f=0;f<o.length;f++)u={},e=o[f],u.id=e.id,u.from=e.source,u.to=e.target,u.attributes=e.attributes,u.color=e.color,u.inheritColor=u.color!==undefined?!1:this.options.inheritColor,h.push(u);for(f=0;f<s.length;f++)i={},r=s[f],i.id=r.id,i.attributes=r.attributes,i.x=r.x,i.y=r.y,i.label=r.label,i.color=this.options.nodes.parseColor==!0?r.color:r.color!==undefined?{background:r.color,border:r.color}:undefined,i.radius=r.size,i.allowedToMoveX=this.options.nodes.allowedToMove,i.allowedToMoveY=this.options.nodes.allowedToMove,c.push(i);return{nodes:c,edges:h}}t.parseGephi=i},function(n,t,i){n.exports=typeof window!="undefined"&&window.moment||i(48)},function(n,t,i){n.exports=typeof window!="undefined"?window.Hammer||i(49):function(){throw Error("hammer.js is only available in a browser, not in node.js.");}},function(n,t,i){function r(){}var f=i(46),e=i(41),u=i(1),o=i(3),s=i(4),h=i(15),c=i(27),l=i(19),a=i(20),v=i(24);f(r.prototype);r.prototype._create=function(n){this.dom={};this.dom.root=document.createElement("div");this.dom.background=document.createElement("div");this.dom.backgroundVertical=document.createElement("div");this.dom.backgroundHorizontal=document.createElement("div");this.dom.centerContainer=document.createElement("div");this.dom.leftContainer=document.createElement("div");this.dom.rightContainer=document.createElement("div");this.dom.center=document.createElement("div");this.dom.left=document.createElement("div");this.dom.right=document.createElement("div");this.dom.top=document.createElement("div");this.dom.bottom=document.createElement("div");this.dom.shadowTop=document.createElement("div");this.dom.shadowBottom=document.createElement("div");this.dom.shadowTopLeft=document.createElement("div");this.dom.shadowBottomLeft=document.createElement("div");this.dom.shadowTopRight=document.createElement("div");this.dom.shadowBottomRight=document.createElement("div");this.dom.background.className="vispanel background";this.dom.backgroundVertical.className="vispanel background vertical";this.dom.backgroundHorizontal.className="vispanel background horizontal";this.dom.centerContainer.className="vispanel center";this.dom.leftContainer.className="vispanel left";this.dom.rightContainer.className="vispanel right";this.dom.top.className="vispanel top";this.dom.bottom.className="vispanel bottom";this.dom.left.className="content";this.dom.center.className="content";this.dom.right.className="content";this.dom.shadowTop.className="shadow top";this.dom.shadowBottom.className="shadow bottom";this.dom.shadowTopLeft.className="shadow top";this.dom.shadowBottomLeft.className="shadow bottom";this.dom.shadowTopRight.className="shadow top";this.dom.shadowBottomRight.className="shadow bottom";this.dom.root.appendChild(this.dom.background);this.dom.root.appendChild(this.dom.backgroundVertical);this.dom.root.appendChild(this.dom.backgroundHorizontal);this.dom.root.appendChild(this.dom.centerContainer);this.dom.root.appendChild(this.dom.leftContainer);this.dom.root.appendChild(this.dom.rightContainer);this.dom.root.appendChild(this.dom.top);this.dom.root.appendChild(this.dom.bottom);this.dom.centerContainer.appendChild(this.dom.center);this.dom.leftContainer.appendChild(this.dom.left);this.dom.rightContainer.appendChild(this.dom.right);this.dom.centerContainer.appendChild(this.dom.shadowTop);this.dom.centerContainer.appendChild(this.dom.shadowBottom);this.dom.leftContainer.appendChild(this.dom.shadowTopLeft);this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft);this.dom.rightContainer.appendChild(this.dom.shadowTopRight);this.dom.rightContainer.appendChild(this.dom.shadowBottomRight);this.on("rangechange",this.redraw.bind(this));this.on("change",this.redraw.bind(this));this.on("touch",this._onTouch.bind(this));this.on("pinch",this._onPinch.bind(this));this.on("dragstart",this._onDragStart.bind(this));this.on("drag",this._onDrag.bind(this));this.hammer=e(this.dom.root,{prevent_default:!0});this.listeners={};var t=this;if(["touch","pinch","tap","doubletap","hold","dragstart","drag","dragend","mousewheel","DOMMouseScroll"].forEach(function(n){var i=function(){var i=[n].concat(Array.prototype.slice.call(arguments,0));t.emit.apply(t,i)};t.hammer.on(n,i);t.listeners[n]=i}),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.touch={},!n)throw new Error("No container provided");n.appendChild(this.dom.root)};r.prototype.destroy=function(){this.clear();this.off();this._stopAutoResize();this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root);this.dom=null;for(var n in this.listeners)this.listeners.hasOwnProperty(n)&&delete this.listeners[n];this.listeners=null;this.hammer=null;this.components.forEach(function(n){n.destroy()});this.body=null};r.prototype.setCustomTime=function(n){if(!this.customTime)throw new Error("Cannot get custom time: Custom time bar is not enabled");this.customTime.setCustomTime(n)};r.prototype.getCustomTime=function(){if(!this.customTime)throw new Error("Cannot get custom time: Custom time bar is not enabled");return this.customTime.getCustomTime()};r.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]};r.prototype.clear=function(n){(!n||n.items)&&this.setItems(null);(!n||n.groups)&&this.setGroups(null);(!n||n.options)&&(this.components.forEach(function(n){n.setOptions(n.defaultOptions)}),this.setOptions(this.defaultOptions))};r.prototype.fit=function(){var r=this.getItemRange(),n=r.min,t=r.max,i;(n!=null&&t!=null&&(i=t.valueOf()-n.valueOf(),i<=0&&(i=864e5),n=new Date(n.valueOf()-i*.05),t=new Date(t.valueOf()+i*.05)),n!==null||t!==null)&&this.range.setRange(n,t)};r.prototype.setWindow=function(n,t){if(arguments.length==1){var i=arguments[0];this.range.setRange(i.start,i.end)}else this.range.setRange(n,t)};r.prototype.getWindow=function(){var n=this.range.getRange();return{start:new Date(n.start),end:new Date(n.end)}};r.prototype.redraw=function(){var h=!1,i=this.options,n=this.props,t=this.dom,e,c,a,v,l,r,f,o,s;t&&(t.root.className="vis timeline root "+i.orientation,t.root.style.maxHeight=u.option.asSize(i.maxHeight,""),t.root.style.minHeight=u.option.asSize(i.minHeight,""),t.root.style.width=u.option.asSize(i.width,""),n.border.left=(t.centerContainer.offsetWidth-t.centerContainer.clientWidth)/2,n.border.right=n.border.left,n.border.top=(t.centerContainer.offsetHeight-t.centerContainer.clientHeight)/2,n.border.bottom=n.border.top,e=t.root.offsetHeight-t.root.clientHeight,c=t.root.offsetWidth-t.root.clientWidth,n.center.height=t.center.offsetHeight,n.left.height=t.left.offsetHeight,n.right.height=t.right.offsetHeight,n.top.height=t.top.clientHeight||-n.border.top,n.bottom.height=t.bottom.clientHeight||-n.border.bottom,a=Math.max(n.left.height,n.center.height,n.right.height),v=n.top.height+a+n.bottom.height+e+n.border.top+n.border.bottom,t.root.style.height=u.option.asSize(i.height,v+"px"),n.root.height=t.root.offsetHeight,n.background.height=n.root.height-e,l=n.root.height-n.top.height-n.bottom.height-e,n.centerContainer.height=l,n.leftContainer.height=l,n.rightContainer.height=n.leftContainer.height,n.root.width=t.root.offsetWidth,n.background.width=n.root.width-c,n.left.width=t.leftContainer.clientWidth||-n.border.left,n.leftContainer.width=n.left.width,n.right.width=t.rightContainer.clientWidth||-n.border.right,n.rightContainer.width=n.right.width,r=n.root.width-n.left.width-n.right.width-c,n.center.width=r,n.centerContainer.width=r,n.top.width=r,n.bottom.width=r,t.background.style.height=n.background.height+"px",t.backgroundVertical.style.height=n.background.height+"px",t.backgroundHorizontal.style.height=n.centerContainer.height+"px",t.centerContainer.style.height=n.centerContainer.height+"px",t.leftContainer.style.height=n.leftContainer.height+"px",t.rightContainer.style.height=n.rightContainer.height+"px",t.background.style.width=n.background.width+"px",t.backgroundVertical.style.width=n.centerContainer.width+"px",t.backgroundHorizontal.style.width=n.background.width+"px",t.centerContainer.style.width=n.center.width+"px",t.top.style.width=n.top.width+"px",t.bottom.style.width=n.bottom.width+"px",t.background.style.left="0",t.background.style.top="0",t.backgroundVertical.style.left=n.left.width+"px",t.backgroundVertical.style.top="0",t.backgroundHorizontal.style.left="0",t.backgroundHorizontal.style.top=n.top.height+"px",t.centerContainer.style.left=n.left.width+"px",t.centerContainer.style.top=n.top.height+"px",t.leftContainer.style.left="0",t.leftContainer.style.top=n.top.height+"px",t.rightContainer.style.left=n.left.width+n.center.width+"px",t.rightContainer.style.top=n.top.height+"px",t.top.style.left=n.left.width+"px",t.top.style.top="0",t.bottom.style.left=n.left.width+"px",t.bottom.style.top=n.top.height+n.centerContainer.height+"px",this._updateScrollTop(),f=this.props.scrollTop,i.orientation=="bottom"&&(f+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0)),t.center.style.left="0",t.center.style.top=f+"px",t.left.style.left="0",t.left.style.top=f+"px",t.right.style.left="0",t.right.style.top=f+"px",o=this.props.scrollTop==0?"hidden":"",s=this.props.scrollTop==this.props.scrollTopMin?"hidden":"",t.shadowTop.style.visibility=o,t.shadowBottom.style.visibility=s,t.shadowTopLeft.style.visibility=o,t.shadowBottomLeft.style.visibility=s,t.shadowTopRight.style.visibility=o,t.shadowBottomRight.style.visibility=s,this.components.forEach(function(n){h=n.redraw()||h}),h&&this.redraw())};r.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.");};r.prototype._toTime=function(n){var t=this.range.conversion(this.props.center.width);return new Date(n/t.scale+t.offset)};r.prototype._toGlobalTime=function(n){var t=this.range.conversion(this.props.root.width);return new Date(n/t.scale+t.offset)};r.prototype._toScreen=function(n){var t=this.range.conversion(this.props.center.width);return(n.valueOf()-t.offset)*t.scale};r.prototype._toGlobalScreen=function(n){var t=this.range.conversion(this.props.root.width);return(n.valueOf()-t.offset)*t.scale};r.prototype._initAutoResize=function(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()};r.prototype._startAutoResize=function(){var n=this;this._stopAutoResize();this._onResize=function(){if(n.options.autoResize!=!0){n._stopAutoResize();return}n.dom.root&&(n.dom.root.clientWidth!=n.props.lastWidth||n.dom.root.clientHeight!=n.props.lastHeight)&&(n.props.lastWidth=n.dom.root.clientWidth,n.props.lastHeight=n.dom.root.clientHeight,n.emit("change"))};u.addEventListener(window,"resize",this._onResize);this.watchTimer=setInterval(this._onResize,1e3)};r.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=undefined);u.removeEventListener(window,"resize",this._onResize);this._onResize=null};r.prototype._onTouch=function(){this.touch.allowDragging=!0};r.prototype._onPinch=function(){this.touch.allowDragging=!1};r.prototype._onDragStart=function(){this.touch.initialScrollTop=this.props.scrollTop};r.prototype._onDrag=function(n){if(this.touch.allowDragging){var t=n.gesture.deltaY,i=this._getScrollTop(),r=this._setScrollTop(this.touch.initialScrollTop+t);r!=i&&this.redraw()}};r.prototype._setScrollTop=function(n){return this.props.scrollTop=n,this._updateScrollTop(),this.props.scrollTop};r.prototype._updateScrollTop=function(){var n=Math.min(this.props.centerContainer.height-this.props.center.height,0);return n!=this.props.scrollTopMin&&(this.options.orientation=="bottom"&&(this.props.scrollTop+=n-this.props.scrollTopMin),this.props.scrollTopMin=n),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<n&&(this.props.scrollTop=n),this.props.scrollTop};r.prototype._getScrollTop=function(){return this.props.scrollTop};n.exports=r},function(n,t,i){var r=i(41);t.fakeGesture=function(n,t){var u=null,f=r.event.getTouchList(t,u),i=r.event.collectEventData(this,u,f,t);return isNaN(i.center.pageX)&&(i.center.pageX=t.pageX),isNaN(i.center.pageY)&&(i.center.pageY=t.pageY),i}},function(){typeof CanvasRenderingContext2D!="undefined"&&(CanvasRenderingContext2D.prototype.circle=function(n,t,i){this.beginPath();this.arc(n,t,i,0,2*Math.PI,!1)},CanvasRenderingContext2D.prototype.square=function(n,t,i){this.beginPath();this.rect(n-i,t-i,i*2,i*2)},CanvasRenderingContext2D.prototype.triangle=function(n,t,i){this.beginPath();var r=i*2,u=r/2,f=Math.sqrt(3)/6*r,e=Math.sqrt(r*r-u*u);this.moveTo(n,t-(e-f));this.lineTo(n+u,t+f);this.lineTo(n-u,t+f);this.lineTo(n,t-(e-f));this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(n,t,i){this.beginPath();var r=i*2,u=r/2,f=Math.sqrt(3)/6*r,e=Math.sqrt(r*r-u*u);this.moveTo(n,t+(e-f));this.lineTo(n+u,t-f);this.lineTo(n-u,t-f);this.lineTo(n,t+(e-f));this.closePath()},CanvasRenderingContext2D.prototype.star=function(n,t,i){var r,u;for(this.beginPath(),r=0;r<10;r++)u=r%2==0?i*1.3:i*.5,this.lineTo(n+u*Math.sin(r*2*Math.PI/10),t-u*Math.cos(r*2*Math.PI/10));this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(n,t,i,r,u){var f=Math.PI/180;i-2*u<0&&(u=i/2);r-2*u<0&&(u=r/2);this.beginPath();this.moveTo(n+u,t);this.lineTo(n+i-u,t);this.arc(n+i-u,t+u,u,f*270,f*360,!1);this.lineTo(n+i,t+r-u);this.arc(n+i-u,t+r-u,u,0,f*90,!1);this.lineTo(n+u,t+r);this.arc(n+u,t+r-u,u,f*90,f*180,!1);this.lineTo(n,t+u);this.arc(n+u,t+u,u,f*180,f*270,!1)},CanvasRenderingContext2D.prototype.ellipse=function(n,t,i,r){var c=.5522848,e=i/2*c,o=r/2*c,s=n+i,h=t+r,f=n+i/2,u=t+r/2;this.beginPath();this.moveTo(n,u);this.bezierCurveTo(n,u-o,f-e,t,f,t);this.bezierCurveTo(f+e,t,s,u-o,s,u);this.bezierCurveTo(s,u+o,f+e,h,f,h);this.bezierCurveTo(f-e,h,n,u+o,n,u)},CanvasRenderingContext2D.prototype.database=function(n,t,i,r){var l=i,h=r*(1/3),y=.5522848,e=l/2*y,o=h/2*y,s=n+l,a=t+h,u=n+l/2,f=t+h/2,c=t+(r-h/2),v=t+r;this.beginPath();this.moveTo(s,f);this.bezierCurveTo(s,f+o,u+e,a,u,a);this.bezierCurveTo(u-e,a,n,f+o,n,f);this.bezierCurveTo(n,f-o,u-e,t,u,t);this.bezierCurveTo(u+e,t,s,f-o,s,f);this.lineTo(s,c);this.bezierCurveTo(s,c+o,u+e,v,u,v);this.bezierCurveTo(u-e,v,n,c+o,n,c);this.lineTo(n,f)},CanvasRenderingContext2D.prototype.arrow=function(n,t,i,r){var u=n-r*Math.cos(i),f=t-r*Math.sin(i),e=n-r*.9*Math.cos(i),o=t-r*.9*Math.sin(i),s=u+r/3*Math.cos(i+.5*Math.PI),h=f+r/3*Math.sin(i+.5*Math.PI),c=u+r/3*Math.cos(i-.5*Math.PI),l=f+r/3*Math.sin(i-.5*Math.PI);this.beginPath();this.moveTo(n,t);this.lineTo(s,h);this.lineTo(e,o);this.lineTo(c,l);this.closePath()},CanvasRenderingContext2D.prototype.dashedLine=function(n,t,i,r,u){var a,f,e;u||(u=[10,5]);f==0&&(f=.001);a=u.length;this.moveTo(n,t);for(var o=i-n,h=r-t,c=h/o,s=Math.sqrt(o*o+h*h),v=0,l=!0;s>=.1;)f=u[v++%a],f>s&&(f=s),e=Math.sqrt(f*f/(1+c*c)),o<0&&(e=-e),n+=e,t+=c*e,this[l?"lineTo":"moveTo"](n,t),s-=f,l=!l})},function(n,t,i){var u=i(56),f=i(50),e=i(51),o=i(52),r=i(53),s=i(54),h=i(55);t._loadMixin=function(n){for(var t in n)n.hasOwnProperty(t)&&(this[t]=n[t])};t._clearMixin=function(n){for(var t in n)n.hasOwnProperty(t)&&(this[t]=undefined)};t._loadPhysicsSystem=function(){this._loadMixin(u);this._loadSelectedForceSolver();this.constants.configurePhysics==!0&&this._loadPhysicsConfiguration()};t._loadClusterSystem=function(){this.clusterSession=0;this.hubThreshold=5;this._loadMixin(f)};t._loadSectorSystem=function(){this.sectors={};this.activeSector=["default"];this.sectors.active={};this.sectors.active["default"]={nodes:{},edges:{},nodeIndices:[],formationScale:1,drawingNode:undefined};this.sectors.frozen={};this.sectors.support={nodes:{},edges:{},nodeIndices:[],formationScale:1,drawingNode:undefined};this.nodeIndices=this.sectors.active["default"].nodeIndices;this._loadMixin(e)};t._loadSelectionSystem=function(){this.selectionObj={nodes:{},edges:{}};this._loadMixin(o)};t._loadManipulationSystem=function(){this.blockConnectingEdgeSelection=!1;this.forceAppendSelection=!1;this.constants.dataManipulation.enabled==!0?(this.manipulationDiv===undefined&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="network-manipulationDiv",this.manipulationDiv.id="network-manipulationDiv",this.manipulationDiv.style.display=this.editMode==!0?"block":"none",this.containerElement.insertBefore(this.manipulationDiv,this.frame)),this.editModeDiv===undefined&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="network-manipulation-editMode",this.editModeDiv.id="network-manipulation-editMode",this.editModeDiv.style.display=this.editMode==!0?"none":"block",this.containerElement.insertBefore(this.editModeDiv,this.frame)),this.closeDiv===undefined&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="network-manipulation-closeDiv",this.closeDiv.id="network-manipulation-closeDiv",this.closeDiv.style.display=this.manipulationDiv.style.display,this.containerElement.insertBefore(this.closeDiv,this.frame)),this._loadMixin(r),this._createManipulatorBar()):this.manipulationDiv!==undefined&&(this._createManipulatorBar(),this.containerElement.removeChild(this.manipulationDiv),this.containerElement.removeChild(this.editModeDiv),this.containerElement.removeChild(this.closeDiv),this.manipulationDiv=undefined,this.editModeDiv=undefined,this.closeDiv=undefined,this._clearMixin(r))};t._loadNavigationControls=function(){this._loadMixin(s);this._cleanNavigation();this.constants.navigation.enabled==!0&&this._loadNavigationElements()};t._loadHierarchySystem=function(){this._loadMixin(h)}},function(n){function t(n){if(n)return i(n)}function i(n){for(var i in t.prototype)n[i]=t.prototype[i];return n}n.exports=t;t.prototype.on=t.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks[n]=this._callbacks[n]||[]).push(t),this};t.prototype.once=function(n,t){function i(){r.off(n,i);t.apply(this,arguments)}var r=this;this._callbacks=this._callbacks||{};i.fn=t;this.on(n,i);return this};t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(n,t){var i,u,r;if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;if(i=this._callbacks[n],!i)return this;if(1==arguments.length)return delete this._callbacks[n],this;for(r=0;r<i.length;r++)if(u=i[r],u===t||u.fn===t){i.splice(r,1);break}return this};t.prototype.emit=function(n){var r,t,i,u;if(this._callbacks=this._callbacks||{},r=[].slice.call(arguments,1),t=this._callbacks[n],t)for(t=t.slice(0),i=0,u=t.length;i<u;++i)t[i].apply(this,r);return this};t.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks[n]||[]};t.prototype.hasListeners=function(n){return!!this.listeners(n).length}},function(n){function h(n,t,i){if(n.addEventListener)return n.addEventListener(t,i,!1);n.attachEvent("on"+t,i)}function k(n){return n.type=="keypress"?String.fromCharCode(n.which):r[n.which]?r[n.which]:y[n.which]?y[n.which]:String.fromCharCode(n.which).toLowerCase()}function it(n){var t=n.target||n.srcElement,i=t.tagName;return(" "+t.className+" ").indexOf(" mousetrap ")>-1?!1:i=="INPUT"||i=="SELECT"||i=="TEXTAREA"||t.contentEditable&&t.contentEditable=="true"}function rt(n,t){return n.sort().join(",")===t.sort().join(",")}function c(n){n=n||{};var t=!1;for(var i in f){if(n[i]){t=!0;continue}f[i]=0}t||(o=!1)}function d(n,t,r,u,e){var s,o,h=[];if(!i[n])return[];for(r=="keyup"&&v(n)&&(t=[n]),s=0;s<i[n].length;++s)(o=i[n][s],o.seq&&f[o.seq]!=o.level)||r==o.action&&(r=="keypress"||rt(t,o.modifiers))&&(u&&o.combo==e&&i[n].splice(s,1),h.push(o));return h}function ut(n){var t=[];return n.shiftKey&&t.push("shift"),n.altKey&&t.push("alt"),n.ctrlKey&&t.push("ctrl"),n.metaKey&&t.push("meta"),t}function l(n,t){n(t)===!1&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1,t.cancelBubble=!0)}function ft(n,t){if(!it(t)){for(var r=d(n,ut(t),t.type),u={},f=!1,i=0;i<r.length;++i){if(r[i].seq){f=!0;u[r[i].seq]=1;l(r[i].callback,t);continue}f||o||l(r[i].callback,t)}t.type!=o||v(n)||c(u)}}function a(n){n.which=typeof n.which=="number"?n.which:n.keyCode;var t=k(n);if(t){if(n.type=="keyup"&&s==t){s=!1;return}ft(t,n)}}function v(n){return n=="shift"||n=="ctrl"||n=="alt"||n=="meta"}function et(){clearTimeout(b);b=setTimeout(c,1e3)}function ot(){if(!e){e={};for(var n in r)n>95&&n<112||r.hasOwnProperty(n)&&(e[r[n]]=n)}return e}function g(n,t,i){return i||(i=ot()[n]?"keydown":"keypress"),i=="keypress"&&t.length&&(i="keydown"),i}function st(n,t,i,r){f[n]=0;r||(r=g(t[0],[]));for(var e=function(){o=r;++f[n];et()},h=function(n){l(i,n);r!=="keyup"&&(s=k(n));setTimeout(c,10)},u=0;u<t.length;++u)nt(t[u],u<t.length-1?e:h,r,n,u)}function nt(n,t,r,u,f){n=n.replace(/\s+/g," ");var c=n.split(" "),s,e,h,o=[];if(c.length>1)return st(n,c,t,r);for(h=n==="+"?["+"]:n.split("+"),s=0;s<h.length;++s)e=h[s],w[e]&&(e=w[e]),r&&r!="keypress"&&p[e]&&(e=p[e],o.push("shift")),v(e)&&o.push(e);r=g(e,o,r);i[e]||(i[e]=[]);d(e,o,r,!u,n);i[e][u?"unshift":"push"]({callback:t,modifiers:o,action:r,seq:u,level:f,combo:n})}function ht(n,t,i){for(var r=0;r<n.length;++r)nt(n[r],t,i)}for(var tt,r={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},y={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},p={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},w={option:"alt",command:"meta","return":"enter",escape:"esc"},e,i={},u={},f={},b,s=!1,o=!1,t=1;t<20;++t)r[111+t]="f"+t;for(t=0;t<=9;++t)r[t+96]=t;h(document,"keypress",a);h(document,"keydown",a);h(document,"keyup",a);tt={bind:function(n,t,i){return ht(n instanceof Array?n:[n],t,i),u[n+":"+i]=t,this},unbind:function(n,t){return u[n+":"+t]&&(delete u[n+":"+t],this.bind(n,function(){},t)),this},trigger:function(n,t){return u[n+":"+t](),this},reset:function(){return i={},u={},this}};n.exports=tt},function(n,t,i){var r;(function(n,u){
//! moment.js
//! version : 2.8.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(f){function rt(n,t,i){switch(arguments.length){case 2:return n!=null?n:t;case 3:return n!=null?n:t!=null?t:i;default:throw new Error("Implement me");}}function bt(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function wi(n){e.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+n)}function l(n,t){var i=!0;return tt(function(){return i&&(wi(n),i=!1),t.apply(this,arguments)},t)}function ku(n,t){yi[n]||(wi(t),yi[n]=!0)}function bi(n,t){return function(i){return s(n.call(this,i),t)}}function du(n,t){return function(i){return this.localeData().ordinal(n.call(this,i),t)}}function ki(){}function ct(n,t){t!==!1&&or(n);di(this,n);this._d=new Date(+n._d)}function kt(n){var t=rr(n),i=t.year||0,r=t.quarter||0,u=t.month||0,f=t.week||0,o=t.day||0,s=t.hour||0,h=t.minute||0,c=t.second||0,l=t.millisecond||0;this._milliseconds=+l+c*1e3+h*6e4+s*36e5;this._days=+o+f*7;this._months=+u+r*3+i*12;this._data={};this._locale=e.localeData();this._bubble()}function tt(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return t.hasOwnProperty("toString")&&(n.toString=t.toString),t.hasOwnProperty("valueOf")&&(n.valueOf=t.valueOf),n}function di(n,t){var u,i,r;if(typeof t._isAMomentObject!="undefined"&&(n._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(n._i=t._i),typeof t._f!="undefined"&&(n._f=t._f),typeof t._l!="undefined"&&(n._l=t._l),typeof t._strict!="undefined"&&(n._strict=t._strict),typeof t._tzm!="undefined"&&(n._tzm=t._tzm),typeof t._isUTC!="undefined"&&(n._isUTC=t._isUTC),typeof t._offset!="undefined"&&(n._offset=t._offset),typeof t._pf!="undefined"&&(n._pf=t._pf),typeof t._locale!="undefined"&&(n._locale=t._locale),st.length>0)for(u in st)i=st[u],r=t[i],typeof r!="undefined"&&(n[i]=r);return n}function a(n){return n<0?Math.ceil(n):Math.floor(n)}function s(n,t,i){for(var r=""+Math.abs(n),u=n>=0;r.length<t;)r="0"+r;return(u?i?"+":"":"-")+r}function gi(n,t){var i={milliseconds:0,months:0};return i.months=t.month()-n.month()+(t.year()-n.year())*12,n.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+n.clone().add(i.months,"M"),i}function gu(n,t){var i;return t=at(t,n),n.isBefore(t)?i=gi(n,t):(i=gi(t,n),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function nr(n,t){return function(i,r){var u,f;return r===null||isNaN(+r)||(ku(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),f=i,i=r,r=f),i=typeof i=="string"?+i:i,u=e.duration(i,r),tr(this,u,n),this}}function tr(n,t,i,r){var o=t._milliseconds,u=t._days,f=t._months;r=r==null?!0:r;o&&n._d.setTime(+n._d+o*i);u&&br(n,"Date",ri(n,"Date")+u*i);f&&wr(n,ri(n,"Month")+f*i);r&&e.updateOffset(n,u||f)}function lt(n){return Object.prototype.toString.call(n)==="[object Array]"}function nf(n){return Object.prototype.toString.call(n)==="[object Date]"||n instanceof Date}function ir(n,t,i){for(var f=Math.min(n.length,t.length),e=Math.abs(n.length-t.length),u=0,r=0;r<f;r++)(i&&n[r]!==t[r]||!i&&o(n[r])!==o(t[r]))&&u++;return u+e}function b(n){if(n){var t=n.toLowerCase().replace(/(.)s$/,"$1");n=wu[n]||bu[t]||t}return n}function rr(n){var r={},t;for(var i in n)n.hasOwnProperty(i)&&(t=b(i),t&&(r[t]=n[i]));return r}function tf(n){var t,i;if(n.indexOf("week")===0)t=7,i="day";else if(n.indexOf("month")===0)t=12,i="month";else return;e[n]=function(r,u){var o,s,c=e._locale[n],h=[];if(typeof r=="number"&&(u=r,r=f),s=function(n){var t=e().utc().set(i,n);return c.call(e._locale,t,r||"")},u!=null)return s(u);for(o=0;o<t;o++)h.push(s(o));return h}}function o(n){var t=+n,i=0;return t!==0&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function dt(n,t){return new Date(Date.UTC(n,t+1,0)).getUTCDate()}function ur(n,t,i){return it(e([n,11,31+t-i]),t,i).week}function fr(n){return er(n)?366:365}function er(n){return n%4==0&&n%100!=0||n%400==0}function or(n){var t;n._a&&n._pf.overflow===-2&&(t=n._a[y]<0||n._a[y]>11?y:n._a[c]<1||n._a[c]>dt(n._a[v],n._a[y])?c:n._a[p]<0||n._a[p]>23?p:n._a[ut]<0||n._a[ut]>59?ut:n._a[ft]<0||n._a[ft]>59?ft:n._a[et]<0||n._a[et]>999?et:-1,n._pf._overflowDayOfYear&&(t<v||t>c)&&(t=c),n._pf.overflow=t)}function sr(n){return n._isValid==null&&(n._isValid=!isNaN(n._d.getTime())&&n._pf.overflow<0&&!n._pf.empty&&!n._pf.invalidMonth&&!n._pf.nullInput&&!n._pf.invalidFormat&&!n._pf.userInvalidated,n._strict&&(n._isValid=n._isValid&&n._pf.charsLeftOver===0&&n._pf.unusedTokens.length===0)),n._isValid}function hr(n){return n?n.toLowerCase().replace("_","-"):n}function rf(n){for(var r=0,i,t,f,u;r<n.length;){for(u=hr(n[r]).split("-"),i=u.length,t=hr(n[r+1]),t=t?t.split("-"):null;i>0;){if(f=cr(u.slice(0,i).join("-")),f)return f;if(t&&t.length>=i&&ir(u,t,!0)>=i-1)break;i--}r++}return null}function cr(n){var t=null;if(!nt[n]&&fi)try{t=e.locale();!function(){var n=new Error('Cannot find module "./locale"');n.code="MODULE_NOT_FOUND";throw n;}();e.locale(t)}catch(r){}return nt[n]}function at(n,t){return t._isUTC?e(n).zone(t._offset||0):e(n).local()}function uf(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function ff(n){for(var i=n.match(ei),t=0,r=i.length;t<r;t++)i[t]=w[i[t]]?w[i[t]]:uf(i[t]);return function(u){var f="";for(t=0;t<r;t++)f+=i[t]instanceof Function?i[t].call(u,n):i[t];return f}}function gt(n,t){return n.isValid()?(t=lr(t,n.localeData()),wt[t]||(wt[t]=ff(t)),wt[t](n)):n.localeData().invalidDate()}function lr(n,t){function r(n){return t.longDateFormat(n)||n}var i=5;for(ht.lastIndex=0;i>=0&&ht.test(n);)n=n.replace(ht,r),ht.lastIndex=0,i-=1;return n}function ef(n,t){var i=t._strict;switch(n){case"Q":return si;case"DDDD":return ci;case"YYYY":case"GGGG":case"gggg":return i?lu:uu;case"Y":case"G":case"g":return vu;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?au:fu;case"S":if(i)return si;case"SS":if(i)return hi;case"SSS":if(i)return ci;case"DDD":return ru;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return ou;case"a":case"A":return t._locale._meridiemParse;case"X":return hu;case"Z":case"ZZ":return vt;case"T":return su;case"SSSS":return eu;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?hi:oi;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return oi;case"Do":return cu;default:return new RegExp(af(lf(n.replace("\\","")),"i"))}}function ar(n){n=n||"";var i=n.match(vt)||[],u=i[i.length-1]||[],t=(u+"").match(pu)||["-",0,0],r=+(t[1]*60)+o(t[2]);return t[0]==="+"?-r:r}function of(n,t,i){var u,r=i._a;switch(n){case"Q":t!=null&&(r[y]=(o(t)-1)*3);break;case"M":case"MM":t!=null&&(r[y]=o(t)-1);break;case"MMM":case"MMMM":u=i._locale.monthsParse(t);u!=null?r[y]=u:i._pf.invalidMonth=t;break;case"D":case"DD":t!=null&&(r[c]=o(t));break;case"Do":t!=null&&(r[c]=o(parseInt(t,10)));break;case"DDD":case"DDDD":t!=null&&(i._dayOfYear=o(t));break;case"YY":r[v]=e.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":r[v]=o(t);break;case"a":case"A":i._isPm=i._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":r[p]=o(t);break;case"m":case"mm":r[ut]=o(t);break;case"s":case"ss":r[ft]=o(t);break;case"S":case"SS":case"SSS":case"SSSS":r[et]=o(("0."+t)*1e3);break;case"X":i._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":i._useUTC=!0;i._tzm=ar(t);break;case"dd":case"ddd":case"dddd":u=i._locale.weekdaysParse(t);u!=null?(i._w=i._w||{},i._w.d=u):i._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":n=n.substr(0,1);case"gggg":case"GGGG":case"GGGGG":n=n.substr(0,2);t&&(i._w=i._w||{},i._w[n]=o(t));break;case"gg":case"GG":i._w=i._w||{};i._w[n]=e.parseTwoDigitYear(t)}}function sf(n){var t,o,u,r,i,f,s;t=n._w;t.GG!=null||t.W!=null||t.E!=null?(i=1,f=4,o=rt(t.GG,n._a[v],it(e(),1,4).year),u=rt(t.W,1),r=rt(t.E,1)):(i=n._locale._week.dow,f=n._locale._week.doy,o=rt(t.gg,n._a[v],it(e(),i,f).year),u=rt(t.w,1),t.d!=null?(r=t.d,r<i&&++u):r=t.e!=null?t.e+i:i);s=gf(o,u,r,f,i);n._a[v]=s.year;n._dayOfYear=s.dayOfYear}function ni(n){var t,i,r=[],u,f;if(!n._d){for(u=cf(n),n._w&&n._a[c]==null&&n._a[y]==null&&sf(n),n._dayOfYear&&(f=rt(n._a[v],u[v]),n._dayOfYear>fr(f)&&(n._pf._overflowDayOfYear=!0),i=ii(f,0,n._dayOfYear),n._a[y]=i.getUTCMonth(),n._a[c]=i.getUTCDate()),t=0;t<3&&n._a[t]==null;++t)n._a[t]=r[t]=u[t];for(;t<7;t++)n._a[t]=r[t]=n._a[t]==null?t===2?1:0:n._a[t];n._d=(n._useUTC?ii:wf).apply(null,r);n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()+n._tzm)}}function hf(n){var t;n._d||(t=rr(n._i),n._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],ni(n))}function cf(n){var t=new Date;return n._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function ti(n){if(n._f===e.ISO_8601){vr(n);return}n._a=[];n._pf.empty=!0;for(var t=""+n._i,i,r,o,h=t.length,s=0,f=lr(n._f,n._locale).match(ei)||[],u=0;u<f.length;u++)r=f[u],i=(t.match(ef(r,n))||[])[0],i&&(o=t.substr(0,t.indexOf(i)),o.length>0&&n._pf.unusedInput.push(o),t=t.slice(t.indexOf(i)+i.length),s+=i.length),w[r]?(i?n._pf.empty=!1:n._pf.unusedTokens.push(r),of(r,i,n)):n._strict&&!i&&n._pf.unusedTokens.push(r);n._pf.charsLeftOver=h-s;t.length>0&&n._pf.unusedInput.push(t);n._isPm&&n._a[p]<12&&(n._a[p]+=12);n._isPm===!1&&n._a[p]===12&&(n._a[p]=0);ni(n);or(n)}function lf(n){return n.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,i,r,u){return t||i||r||u})}function af(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function vf(n){var t,f,u,r,i;if(n._f.length===0){n._pf.invalidFormat=!0;n._d=new Date(NaN);return}for(r=0;r<n._f.length;r++)(i=0,t=di({},n),t._pf=bt(),t._f=n._f[r],ti(t),sr(t))&&(i+=t._pf.charsLeftOver,i+=t._pf.unusedTokens.length*10,t._pf.score=i,(u==null||i<u)&&(u=i,f=t));tt(n,f||t)}function vr(n){var t,i,r=n._i,u=yu.exec(r);if(u){for(n._pf.iso=!0,t=0,i=yt.length;t<i;t++)if(yt[t][1].exec(r)){n._f=yt[t][0]+(u[6]||" ");break}for(t=0,i=pt.length;t<i;t++)if(pt[t][1].exec(r)){n._f+=pt[t][0];break}r.match(vt)&&(n._f+="Z");ti(n)}else n._isValid=!1}function yf(n){vr(n);n._isValid===!1&&(delete n._isValid,e.createFromInputFallback(n))}function pf(n){var t=n._i,i;t===f?n._d=new Date:nf(t)?n._d=new Date(+t):(i=nu.exec(t))!==null?n._d=new Date(+i[1]):typeof t=="string"?yf(n):lt(t)?(n._a=t.slice(0),ni(n)):typeof t=="object"?hf(n):typeof t=="number"?n._d=new Date(t):e.createFromInputFallback(n)}function wf(n,t,i,r,u,f,e){var o=new Date(n,t,i,r,u,f,e);return n<1970&&o.setFullYear(n),o}function ii(n){var t=new Date(Date.UTC.apply(null,arguments));return n<1970&&t.setUTCFullYear(n),t}function bf(n,t){if(typeof n=="string")if(isNaN(n)){if(n=t.weekdaysParse(n),typeof n!="number")return null}else n=parseInt(n,10);return n}function kf(n,t,i,r,u){return u.relativeTime(t||1,!!i,n,r)}function df(n,t,i){var r=e.duration(n).abs(),c=g(r.as("s")),f=g(r.as("m")),o=g(r.as("h")),s=g(r.as("d")),h=g(r.as("M")),l=g(r.as("y")),u=c<d.s&&["s",c]||f===1&&["m"]||f<d.m&&["mm",f]||o===1&&["h"]||o<d.h&&["hh",o]||s===1&&["d"]||s<d.d&&["dd",s]||h===1&&["M"]||h<d.M&&["MM",h]||l===1&&["y"]||["yy",l];return u[2]=t,u[3]=+n>0,u[4]=i,kf.apply({},u)}function it(n,t,i){var f=i-t,r=i-n.day(),u;return r>f&&(r-=7),r<f-7&&(r+=7),u=e(n).add(r,"d"),{week:Math.ceil(u.dayOfYear()/7),year:u.year()}}function gf(n,t,i,r,u){var f=ii(n,0,1).getUTCDay(),o,e;return f=f===0?7:f,i=i!=null?i:u,o=u-f+(f>r?7:0)-(f<u?7:0),e=7*(t-1)+(i-u)+o+1,{year:e>0?n:n-1,dayOfYear:e>0?e:fr(n-1)+e}}function yr(n){var t=n._i,i=n._f;return(n._locale=n._locale||e.localeData(n._l),t===null||i===f&&t==="")?e.invalid({nullInput:!0}):(typeof t=="string"&&(n._i=t=n._locale.preparse(t)),e.isMoment(t))?new ct(t,!0):(i?lt(i)?vf(n):ti(n):pf(n),new ct(n))}function pr(n,t){var r,i;if(t.length===1&&lt(t[0])&&(t=t[0]),!t.length)return e();for(r=t[0],i=1;i<t.length;++i)t[i][n](r)&&(r=t[i]);return r}function wr(n,t){var i;return typeof t=="string"&&(t=n.localeData().monthsParse(t),typeof t!="number")?n:(i=Math.min(n.date(),dt(n.year(),t)),n._d["set"+(n._isUTC?"UTC":"")+"Month"](t,i),n)}function ri(n,t){return n._d["get"+(n._isUTC?"UTC":"")+t]()}function br(n,t,i){return t==="Month"?wr(n,i):n._d["set"+(n._isUTC?"UTC":"")+t](i)}function k(n,t){return function(i){return i!=null?(br(this,n,i),e.updateOffset(this,t),this):ri(this,n)}}function kr(n){return n*400/146097}function dr(n){return n*146097/400}function ne(n){e.duration.fn[n]=function(){return this._data[n]}}function gr(n){typeof ender=="undefined"&&(ui=ot.moment,ot.moment=n?l("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",e):e)}for(var e,ot=typeof n!="undefined"?n:this,ui,g=Math.round,h,v=0,y=1,c=2,p=3,ut=4,ft=5,et=6,nt={},st=[],fi=typeof u!="undefined"&&u.exports,nu=/^\/?Date\((\-?\d+)/i,tu=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,iu=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ei=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,ht=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,oi=/\d\d?/,ru=/\d{1,3}/,uu=/\d{1,4}/,fu=/[+\-]?\d{1,6}/,eu=/\d+/,ou=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,vt=/Z|[\+\-]\d\d:?\d\d/gi,su=/T/i,hu=/[\+\-]?\d+(\.\d{1,3})?/,cu=/\d{1,2}/,si=/\d/,hi=/\d\d/,ci=/\d{3}/,lu=/\d{4}/,au=/[+-]?\d{6}/,vu=/[+-]?\d+/,yu=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],pt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],pu=/([\+\-]|\d\d)/gi,te="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),li={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},wu={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},bu={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},wt={},d={s:45,m:45,h:22,d:26,M:11},ai="DDD w W M D d".split(" "),vi="M D H h m s w W".split(" "),w={M:function(){return this.month()+1},MMM:function(n){return this.localeData().monthsShort(this,n)},MMMM:function(n){return this.localeData().months(this,n)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(n){return this.localeData().weekdaysMin(this,n)},ddd:function(n){return this.localeData().weekdaysShort(this,n)},dddd:function(n){return this.localeData().weekdays(this,n)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return s(this.year()%100,2)},YYYY:function(){return s(this.year(),4)},YYYYY:function(){return s(this.year(),5)},YYYYYY:function(){var n=this.year(),t=n>=0?"+":"-";return t+s(Math.abs(n),6)},gg:function(){return s(this.weekYear()%100,2)},gggg:function(){return s(this.weekYear(),4)},ggggg:function(){return s(this.weekYear(),5)},GG:function(){return s(this.isoWeekYear()%100,2)},GGGG:function(){return s(this.isoWeekYear(),4)},GGGGG:function(){return s(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return o(this.milliseconds()/100)},SS:function(){return s(o(this.milliseconds()/10),2)},SSS:function(){return s(this.milliseconds(),3)},SSSS:function(){return s(this.milliseconds(),3)},Z:function(){var n=-this.zone(),t="+";return n<0&&(n=-n,t="-"),t+s(o(n/60),2)+":"+s(o(n)%60,2)},ZZ:function(){var n=-this.zone(),t="+";return n<0&&(n=-n,t="-"),t+s(o(n/60),2)+s(o(n)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},yi={},pi=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ai.length;)h=ai.pop(),w[h+"o"]=du(w[h],h);while(vi.length)h=vi.pop(),w[h+h]=bi(w[h],2);for(w.DDDD=bi(w.DDD,3),tt(ki.prototype,{set:function(n){var t;for(var i in n)t=n[i],typeof t=="function"?this[i]=t:this["_"+i]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(n){return this._months[n.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(n){return this._monthsShort[n.month()]},monthsParse:function(n){var t,i,r;for(this._monthsParse||(this._monthsParse=[]),t=0;t<12;t++)if(this._monthsParse[t]||(i=e.utc([2e3,t]),r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[t]=new RegExp(r.replace(".",""),"i")),this._monthsParse[t].test(n))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(n){return this._weekdays[n.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(n){return this._weekdaysShort[n.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(n){return this._weekdaysMin[n.day()]},weekdaysParse:function(n){var t,i,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;t<7;t++)if(this._weekdaysParse[t]||(i=e([2e3,1]).day(t),r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(n))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(n){var t=this._longDateFormat[n];return!t&&this._longDateFormat[n.toUpperCase()]&&(t=this._longDateFormat[n.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(n){return n.slice(1)}),this._longDateFormat[n]=t),t},isPM:function(n){return(n+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(n,t,i){return n>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(n,t){var i=this._calendar[n];return typeof i=="function"?i.apply(t):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(n,t,i,r){var u=this._relativeTime[i];return typeof u=="function"?u(n,t,i,r):u.replace(/%d/i,n)},pastFuture:function(n,t){var i=this._relativeTime[n>0?"future":"past"];return typeof i=="function"?i(t):i.replace(/%s/i,t)},ordinal:function(n){return this._ordinal.replace("%d",n)},_ordinal:"%d",preparse:function(n){return n},postformat:function(n){return n},week:function(n){return it(n,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),e=function(n,t,i,r){var u;return typeof i=="boolean"&&(r=i,i=f),u={},u._isAMomentObject=!0,u._i=n,u._f=t,u._l=i,u._strict=r,u._isUTC=!1,u._pf=bt(),yr(u)},e.suppressDeprecationWarnings=!1,e.createFromInputFallback=l("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(n){n._d=new Date(n._i)}),e.min=function(){var n=[].slice.call(arguments,0);return pr("isBefore",n)},e.max=function(){var n=[].slice.call(arguments,0);return pr("isAfter",n)},e.utc=function(n,t,i,r){var u;return typeof i=="boolean"&&(r=i,i=f),u={},u._isAMomentObject=!0,u._useUTC=!0,u._isUTC=!0,u._l=i,u._i=n,u._f=t,u._strict=r,u._pf=bt(),yr(u).utc()},e.unix=function(n){return e(n*1e3)},e.duration=function(n,t){var r=n,i=null,u,s,f,h;return e.isDuration(n)?r={ms:n._milliseconds,d:n._days,M:n._months}:typeof n=="number"?(r={},t?r[t]=n:r.milliseconds=n):(i=tu.exec(n))?(u=i[1]==="-"?-1:1,r={y:0,d:o(i[c])*u,h:o(i[p])*u,m:o(i[ut])*u,s:o(i[ft])*u,ms:o(i[et])*u}):(i=iu.exec(n))?(u=i[1]==="-"?-1:1,f=function(n){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*u},r={y:f(i[2]),M:f(i[3]),d:f(i[4]),h:f(i[5]),m:f(i[6]),s:f(i[7]),w:f(i[8])}):typeof r=="object"&&("from"in r||"to"in r)&&(h=gu(e(r.from),e(r.to)),r={},r.ms=h.milliseconds,r.M=h.months),s=new kt(r),e.isDuration(n)&&n.hasOwnProperty("_locale")&&(s._locale=n._locale),s},e.version="2.8.1",e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.ISO_8601=function(){},e.momentProperties=st,e.updateOffset=function(){},e.relativeTimeThreshold=function(n,t){return d[n]===f?!1:t===f?d[n]:(d[n]=t,!0)},e.lang=l("moment.lang is deprecated. Use moment.locale instead.",function(n,t){return e.locale(n,t)}),e.locale=function(n,t){var i;return n&&(i=typeof t!="undefined"?e.defineLocale(n,t):e.localeData(n),i&&(e.duration._locale=e._locale=i)),e._locale._abbr},e.defineLocale=function(n,t){return t!==null?(t.abbr=n,nt[n]||(nt[n]=new ki),nt[n].set(t),e.locale(n),nt[n]):(delete nt[n],null)},e.langData=l("moment.langData is deprecated. Use moment.localeData instead.",function(n){return e.localeData(n)}),e.localeData=function(n){var t;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return e._locale;if(!lt(n)){if(t=cr(n),t)return t;n=[n]}return rf(n)},e.isMoment=function(n){return n instanceof ct||n!=null&&n.hasOwnProperty("_isAMomentObject")},e.isDuration=function(n){return n instanceof kt},h=pi.length-1;h>=0;--h)tf(pi[h]);e.normalizeUnits=function(n){return b(n)};e.invalid=function(n){var t=e.utc(NaN);return n!=null?tt(t._pf,n):t._pf.userInvalidated=!0,t};e.parseZone=function(){return e.apply(null,arguments).parseZone()};e.parseTwoDigitYear=function(n){return o(n)+(o(n)>68?1900:2e3)};tt(e.fn=ct.prototype,{clone:function(){return e(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var n=e(this).utc();return 0<n.year()&&n.year()<=9999?gt(n,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):gt(n,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var n=this;return[n.year(),n.month(),n.date(),n.hours(),n.minutes(),n.seconds(),n.milliseconds()]},isValid:function(){return sr(this)},isDSTShifted:function(){return this._a?this.isValid()&&ir(this._a,(this._isUTC?e.utc(this._a):e(this._a)).toArray())>0:!1},parsingFlags:function(){return tt({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(n){return this.zone(0,n)},local:function(n){return this._isUTC&&(this.zone(0,n),this._isUTC=!1,n&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(n){var t=gt(this,n||e.defaultFormat);return this.localeData().postformat(t)},add:nr(1,"add"),subtract:nr(-1,"subtract"),diff:function(n,t,i){var u=at(n,this),o=(this.zone()-u.zone())*6e4,r,f;return t=b(t),t==="year"||t==="month"?(r=(this.daysInMonth()+u.daysInMonth())*432e5,f=(this.year()-u.year())*12+(this.month()-u.month()),f+=(this-e(this).startOf("month")-(u-e(u).startOf("month")))/r,f-=(this.zone()-e(this).startOf("month").zone()-(u.zone()-e(u).startOf("month").zone()))*6e4/r,t==="year"&&(f=f/12)):(r=this-u,f=t==="second"?r/1e3:t==="minute"?r/6e4:t==="hour"?r/36e5:t==="day"?(r-o)/864e5:t==="week"?(r-o)/6048e5:r),i?f:a(f)},from:function(n,t){return e.duration({to:this,from:n}).locale(this.locale()).humanize(!t)},fromNow:function(n){return this.from(e(),n)},calendar:function(n){var i=n||e(),r=at(i,this).startOf("day"),t=this.diff(r,"days",!0),u=t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(u,this))},isLeapYear:function(){return er(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(n){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return n!=null?(n=bf(n,this.localeData()),this.add(n-t,"d")):t},month:k("Month",!0),startOf:function(n){n=b(n);switch(n){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return n==="week"?this.weekday(0):n==="isoWeek"&&this.isoWeekday(1),n==="quarter"&&this.month(Math.floor(this.month()/3)*3),this},endOf:function(n){return n=b(n),this.startOf(n).add(1,n==="isoWeek"?"week":n).subtract(1,"ms")},isAfter:function(n,t){return t=typeof t!="undefined"?t:"millisecond",+this.clone().startOf(t)>+e(n).startOf(t)},isBefore:function(n,t){return t=typeof t!="undefined"?t:"millisecond",+this.clone().startOf(t)<+e(n).startOf(t)},isSame:function(n,t){return t=t||"ms",+this.clone().startOf(t)==+at(n,this).startOf(t)},min:l("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(n){return n=e.apply(null,arguments),n<this?this:n}),max:l("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(n){return n=e.apply(null,arguments),n>this?this:n}),zone:function(n,t){var i=this._offset||0,r;if(n!=null)typeof n=="string"&&(n=ar(n)),Math.abs(n)<16&&(n=n*60),!this._isUTC&&t&&(r=this._d.getTimezoneOffset()),this._offset=n,this._isUTC=!0,r!=null&&this.subtract(r,"m"),i!==n&&(!t||this._changeInProgress?tr(this,e.duration(i-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null));else return this._isUTC?i:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):typeof this._i=="string"&&this.zone(this._i),this},hasAlignedHourOffset:function(n){return n=n?e(n).zone():0,(this.zone()-n)%60==0},daysInMonth:function(){return dt(this.year(),this.month())},dayOfYear:function(n){var t=g((e(this).startOf("day")-e(this).startOf("year"))/864e5)+1;return n==null?t:this.add(n-t,"d")},quarter:function(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)},weekYear:function(n){var t=it(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return n==null?t:this.add(n-t,"y")},isoWeekYear:function(n){var t=it(this,1,4).year;return n==null?t:this.add(n-t,"y")},week:function(n){var t=this.localeData().week(this);return n==null?t:this.add((n-t)*7,"d")},isoWeek:function(n){var t=it(this,1,4).week;return n==null?t:this.add((n-t)*7,"d")},weekday:function(n){var t=(this.day()+7-this.localeData()._week.dow)%7;return n==null?t:this.add(n-t,"d")},isoWeekday:function(n){return n==null?this.day()||7:this.day(this.day()%7?n:n-7)},isoWeeksInYear:function(){return ur(this.year(),1,4)},weeksInYear:function(){var n=this.localeData()._week;return ur(this.year(),n.dow,n.doy)},get:function(n){return n=b(n),this[n]()},set:function(n,t){return n=b(n),typeof this[n]=="function"&&this[n](t),this},locale:function(n){return n===f?this._locale._abbr:(this._locale=e.localeData(n),this)},lang:l("moment().lang() is deprecated. Use moment().localeData() instead.",function(n){return n===f?this.localeData():(this._locale=e.localeData(n),this)}),localeData:function(){return this._locale}});e.fn.millisecond=e.fn.milliseconds=k("Milliseconds",!1);e.fn.second=e.fn.seconds=k("Seconds",!1);e.fn.minute=e.fn.minutes=k("Minutes",!1);e.fn.hour=e.fn.hours=k("Hours",!0);e.fn.date=k("Date",!0);e.fn.dates=l("dates accessor is deprecated. Use date instead.",k("Date",!0));e.fn.year=k("FullYear",!0);e.fn.years=l("years accessor is deprecated. Use year instead.",k("FullYear",!0));e.fn.days=e.fn.day;e.fn.months=e.fn.month;e.fn.weeks=e.fn.week;e.fn.isoWeeks=e.fn.isoWeek;e.fn.quarters=e.fn.quarter;e.fn.toJSON=e.fn.toISOString;tt(e.duration.fn=kt.prototype,{_bubble:function(){var o=this._milliseconds,t=this._days,i=this._months,n=this._data,u,f,e,r=0;n.milliseconds=o%1e3;u=a(o/1e3);n.seconds=u%60;f=a(u/60);n.minutes=f%60;e=a(f/60);n.hours=e%24;t+=a(e/24);r=a(kr(t));t-=a(dr(r));i+=a(t/30);t%=30;r+=a(i/12);i%=12;n.days=t;n.months=i;n.years=r},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+o(this._months/12)*31536e6},humanize:function(n){var t=df(this,!n,this.localeData());return n&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(n,t){var i=e.duration(n,t);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(n,t){var i=e.duration(n,t);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(n){return n=b(n),this[n.toLowerCase()+"s"]()},as:function(n){var t,i;if(n=b(n),t=this._days+this._milliseconds/864e5,n==="month"||n==="year")return i=this._months+kr(t)*12,n==="month"?i:i/12;t+=dr(this._months/12);switch(n){case"week":return t/7;case"day":return t;case"hour":return t*24;case"minute":return t*1440;case"second":return t*86400;case"millisecond":return t*864e5;default:throw new Error("Unknown unit "+n);}},lang:e.fn.lang,locale:e.fn.locale,toIsoString:l("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var r=Math.abs(this.years()),u=Math.abs(this.months()),f=Math.abs(this.days()),n=Math.abs(this.hours()),t=Math.abs(this.minutes()),i=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(r?r+"Y":"")+(u?u+"M":"")+(f?f+"D":"")+(n||t||i?"T":"")+(n?n+"H":"")+(t?t+"M":"")+(i?i+"S":""):"P0D"},localeData:function(){return this._locale}});for(h in li)li.hasOwnProperty(h)&&ne(h.toLowerCase());e.duration.fn.asMilliseconds=function(){return this.as("ms")};e.duration.fn.asSeconds=function(){return this.as("s")};e.duration.fn.asMinutes=function(){return this.as("m")};e.duration.fn.asHours=function(){return this.as("h")};e.duration.fn.asDays=function(){return this.as("d")};e.duration.fn.asWeeks=function(){return this.as("weeks")};e.duration.fn.asMonths=function(){return this.as("M")};e.duration.fn.asYears=function(){return this.as("y")};e.locale("en",{ordinal:function(n){var t=n%10,i=o(n%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return n+i}});fi?u.exports=e:(!(r=function(n,t,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(ot.moment=ui),e}.call(t,i,t,u),r!==f&&(u.exports=r)),gr(!0))}).call(this)}).call(t,function(){return this}(),i(58)(n))},function(n,t,i){var r;
/*! Hammer.JS - v1.1.3 - 2014-05-20
   * http://eightmedia.github.io/hammer.js
   *
   * Copyright (c) 2014 Jorik Tangelder <j.tangelder@gmail.com>;
   * Licensed under the MIT license */
(function(u,f){"use strict";function rt(){if(!e.READY){v.determineEventTypes();o.each(e.gestures,function(n){s.register(n)});v.onTouch(e.DOCUMENT,l,s.detect);v.onTouch(e.DOCUMENT,h,s.detect);e.READY=!0}}var e=function e(n,t){return new e.Instance(n,t||{})};e.VERSION="1.1.3";e.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};e.DOCUMENT=document;e.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;e.HAS_TOUCHEVENTS="ontouchstart"in u;e.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent);e.NO_MOUSEEVENTS=e.HAS_TOUCHEVENTS&&e.IS_MOBILE||e.HAS_POINTEREVENTS;e.CALCULATE_INTERVAL=25;var p={},g=e.DIRECTION_DOWN="down",tt=e.DIRECTION_LEFT="left",nt=e.DIRECTION_UP="up",it=e.DIRECTION_RIGHT="right",w=e.POINTER_MOUSE="mouse",k=e.POINTER_TOUCH="touch",d=e.POINTER_PEN="pen",c=e.EVENT_START="start",l=e.EVENT_MOVE="move",h=e.EVENT_END="end",a=e.EVENT_RELEASE="release",b=e.EVENT_TOUCH="touch";e.READY=!1;e.plugins=e.plugins||{};e.gestures=e.gestures||{};var o=e.utils={extend:function(n,t,i){for(var r in t)t.hasOwnProperty(r)&&(n[r]===f||!i)&&(n[r]=t[r]);return n},on:function(n,t,i){n.addEventListener(t,i,!1)},off:function(n,t,i){n.removeEventListener(t,i,!1)},each:function(n,t,i){var r,u;if("forEach"in n)n.forEach(t,i);else if(n.length!==f){for(r=0,u=n.length;r<u;r++)if(t.call(i,n[r],r,n)===!1)return}else for(r in n)if(n.hasOwnProperty(r)&&t.call(i,n[r],r,n)===!1)return},inStr:function(n,t){return n.indexOf(t)>-1},inArray:function(n,t){var r,i,u;if(n.indexOf)return r=n.indexOf(t),r===-1?!1:r;for(i=0,u=n.length;i<u;i++)if(n[i]===t)return i;return!1},toArray:function(n){return Array.prototype.slice.call(n,0)},hasParent:function(n,t){while(n){if(n==t)return!0;n=n.parentNode}return!1},getCenter:function(n){var r=[],u=[],f=[],e=[],t=Math.min,i=Math.max;return n.length===1?{pageX:n[0].pageX,pageY:n[0].pageY,clientX:n[0].clientX,clientY:n[0].clientY}:(o.each(n,function(n){r.push(n.pageX);u.push(n.pageY);f.push(n.clientX);e.push(n.clientY)}),{pageX:(t.apply(Math,r)+i.apply(Math,r))/2,pageY:(t.apply(Math,u)+i.apply(Math,u))/2,clientX:(t.apply(Math,f)+i.apply(Math,f))/2,clientY:(t.apply(Math,e)+i.apply(Math,e))/2})},getVelocity:function(n,t,i){return{x:Math.abs(t/n)||0,y:Math.abs(i/n)||0}},getAngle:function(n,t){var i=t.clientX-n.clientX,r=t.clientY-n.clientY;return Math.atan2(r,i)*180/Math.PI},getDirection:function(n,t){var i=Math.abs(n.clientX-t.clientX),r=Math.abs(n.clientY-t.clientY);return i>=r?n.clientX-t.clientX>0?tt:it:n.clientY-t.clientY>0?nt:g},getDistance:function(n,t){var i=t.clientX-n.clientX,r=t.clientY-n.clientY;return Math.sqrt(i*i+r*r)},getScale:function(n,t){return n.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(n[0],n[1]):1},getRotation:function(n,t){return n.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(n[1],n[0]):0},isVertical:function(n){return n==nt||n==g},setPrefixedCss:function(n,t,i,r){var e=["","Webkit","Moz","O","ms"],f,u;for(t=o.toCamelCase(t),f=0;f<e.length;f++)if(u=t,e[f]&&(u=e[f]+u.slice(0,1).toUpperCase()+u.slice(1)),u in n.style){n.style[u]=(r==null||r)&&i||"";break}},toggleBehavior:function(n,t,i){if(t&&n&&n.style){o.each(t,function(t,r){o.setPrefixedCss(n,r,t,i)});var r=i&&function(){return!1};t.userSelect=="none"&&(n.onselectstart=r);t.userDrag=="none"&&(n.ondragstart=r)}},toCamelCase:function(n){return n.replace(/[_-]([a-z])/g,function(n){return n[1].toUpperCase()})}},v=e.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(n,t,i,r){var u=t.split(" ");o.each(u,function(t){o.on(n,t,i);r&&r(t)})},off:function(n,t,i,r){var u=t.split(" ");o.each(u,function(t){o.off(n,t,i);r&&r(t)})},onTouch:function(n,t,i){var r=this,u=function(u){var a=u.type.toLowerCase(),f=e.HAS_POINTEREVENTS,s=o.inStr(a,"mouse"),l;s&&r.preventMouseEvents||(s&&t==c&&u.button===0?(r.preventMouseEvents=!1,r.shouldDetect=!0):f&&t==c?r.shouldDetect=u.buttons===1||y.matchType(k,u):s||t!=c||(r.preventMouseEvents=!0,r.shouldDetect=!0),f&&t!=h&&y.updatePointer(t,u),r.shouldDetect&&(l=r.doDetect.call(r,u,t,n,i)),l==h&&(r.preventMouseEvents=!1,r.shouldDetect=!1,y.reset()),f&&t==h&&y.updatePointer(t,u))};this.on(n,p[t],u);return u},doDetect:function(n,t,i,r){var e=this.getTouchList(n,t),y=e.length,f=t,o=e.trigger,v=y,u;return t==c?o=b:t==h&&(o=a,v=e.length-(n.changedTouches?n.changedTouches.length:1)),v>0&&this.started&&(f=l),this.started=!0,u=this.collectEventData(i,f,e,n),t!=h&&r.call(s,u),o&&(u.changedLength=v,u.eventType=o,r.call(s,u),u.eventType=f,delete u.changedLength),f==h&&(r.call(s,u),this.started=!1),f},determineEventTypes:function(){var n;return n=e.HAS_POINTEREVENTS?u.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:e.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],p[c]=n[0],p[l]=n[1],p[h]=n[2],p},getTouchList:function(n,t){if(e.HAS_POINTEREVENTS)return y.getTouchList();if(n.touches){if(t==l)return n.touches;var i=[],u=[].concat(o.toArray(n.touches),o.toArray(n.changedTouches)),r=[];return o.each(u,function(n){o.inArray(i,n.identifier)===!1&&r.push(n);i.push(n.identifier)}),r}return n.identifier=1,[n]},collectEventData:function(n,t,i,r){var u=k;return o.inStr(r.type,"mouse")||y.matchType(w,r)?u=w:y.matchType(d,r)&&(u=d),{center:o.getCenter(i),timeStamp:Date.now(),target:r.target,touches:i,eventType:t,pointerType:u,srcEvent:r,preventDefault:function(){var n=this.srcEvent;n.preventManipulation&&n.preventManipulation();n.preventDefault&&n.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return s.stopDetect()}}}},y=e.PointerEvent={pointers:{},getTouchList:function(){var n=[];return o.each(this.pointers,function(t){n.push(t)}),n},updatePointer:function(n,t){n==h||n!=h&&t.buttons!==1?delete this.pointers[t.pointerId]:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t)},matchType:function(n,t){if(!t.pointerType)return!1;var r=t.pointerType,i={};return i[w]=r===(t.MSPOINTER_TYPE_MOUSE||w),i[k]=r===(t.MSPOINTER_TYPE_TOUCH||k),i[d]=r===(t.MSPOINTER_TYPE_PEN||d),i[n]},reset:function(){this.pointers={}}},s=e.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(n,t){this.current||(this.stopped=!1,this.current={inst:n,startEvent:o.extend({},t),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(t))},detect:function(n){if(this.current&&!this.stopped){n=this.extendEventData(n);var t=this.current.inst,i=t.options;return o.each(this.gestures,function(r){!this.stopped&&t.enabled&&i[r.name]&&r.handler.call(r,n,t)},this),this.current&&(this.current.lastEvent=n),n.eventType==h&&this.stopDetect(),n}},stopDetect:function(){this.previous=o.extend({},this.current);this.current=null;this.stopped=!0},getCalculatedData:function(n,t,i,r,u){var f=this.current,c=!1,h=f.lastCalcEvent,s=f.lastCalcData;h&&n.timeStamp-h.timeStamp>e.CALCULATE_INTERVAL&&(t=h.center,i=n.timeStamp-h.timeStamp,r=n.center.clientX-h.center.clientX,u=n.center.clientY-h.center.clientY,c=!0);(n.eventType==b||n.eventType==a)&&(f.futureCalcEvent=n);(!f.lastCalcEvent||c)&&(s.velocity=o.getVelocity(i,r,u),s.angle=o.getAngle(t,n.center),s.direction=o.getDirection(t,n.center),f.lastCalcEvent=f.futureCalcEvent||n,f.futureCalcEvent=n);n.velocityX=s.velocity.x;n.velocityY=s.velocity.y;n.interimAngle=s.angle;n.interimDirection=s.direction},extendEventData:function(n){var i=this.current,t=i.startEvent,e=i.lastEvent||t;(n.eventType==b||n.eventType==a)&&(t.touches=[],o.each(n.touches,function(n){t.touches.push({clientX:n.clientX,clientY:n.clientY})}));var r=n.timeStamp-t.timeStamp,u=n.center.clientX-t.center.clientX,f=n.center.clientY-t.center.clientY;return this.getCalculatedData(n,e.center,r,u,f),o.extend(n,{startEvent:t,deltaTime:r,deltaX:u,deltaY:f,distance:o.getDistance(t.center,n.center),angle:o.getAngle(t.center,n.center),direction:o.getDirection(t.center,n.center),scale:o.getScale(t.touches,n.touches),rotation:o.getRotation(t.touches,n.touches)}),n},register:function(n){var t=n.defaults||{};return t[n.name]===f&&(t[n.name]=!0),o.extend(e.defaults,t,!0),n.index=n.index||1e3,this.gestures.push(n),this.gestures.sort(function(n,t){return n.index<t.index?-1:n.index>t.index?1:0}),this.gestures}};e.Instance=function(n,t){var i=this;rt();this.element=n;this.enabled=!0;o.each(t,function(n,i){delete t[i];t[o.toCamelCase(i)]=n});this.options=o.extend(o.extend({},e.defaults),t||{});this.options.behavior&&o.toggleBehavior(this.element,this.options.behavior,!0);this.eventStartHandler=v.onTouch(n,c,function(n){i.enabled&&n.eventType==c?s.startDetect(i,n):n.eventType==b&&s.detect(n)});this.eventHandlers=[]};e.Instance.prototype={on:function(n,t){var i=this;v.on(i.element,n,t,function(n){i.eventHandlers.push({gesture:n,handler:t})});return i},off:function(n,t){var i=this;return v.off(i.element,n,t,function(n){var r=o.inArray({gesture:n,handler:t});r!==!1&&i.eventHandlers.splice(r,1)}),i},trigger:function(n,t){var i,r;return t||(t={}),i=e.DOCUMENT.createEvent("Event"),i.initEvent(n,!0,!0),i.gesture=t,r=this.element,o.hasParent(t.target,r)&&(r=t.target),r.dispatchEvent(i),this},enable:function(n){return this.enabled=n,this},dispose:function(){var t,n;for(o.toggleBehavior(this.element,this.options.behavior,!1),t=-1;n=this.eventHandlers[++t];)o.off(this.element,n.gesture,n.handler);return this.eventHandlers=[],v.off(this.element,p[c],this.eventStartHandler),null}},function(n){function i(i,r){var u=s.current,f,e,v,y;if(!(r.options.dragMaxTouches>0)||!(i.touches.length>r.options.dragMaxTouches))switch(i.eventType){case c:t=!1;break;case l:if(i.distance<r.options.dragMinDistance&&u.name!=n)return;f=u.startEvent.center;u.name!=n&&(u.name=n,r.options.dragDistanceCorrection&&i.distance>0&&(e=Math.abs(r.options.dragMinDistance/i.distance),f.pageX+=i.deltaX*e,f.pageY+=i.deltaY*e,f.clientX+=i.deltaX*e,f.clientY+=i.deltaY*e,i=s.extendEventData(i)));(u.lastEvent.dragLockToAxis||r.options.dragLockToAxis&&r.options.dragLockMinDistance<=i.distance)&&(i.dragLockToAxis=!0);v=u.lastEvent.direction;i.dragLockToAxis&&v!==i.direction&&(i.direction=o.isVertical(v)?i.deltaY<0?nt:g:i.deltaX<0?tt:it);t||(r.trigger(n+"start",i),t=!0);r.trigger(n,i);r.trigger(n+i.direction,i);y=o.isVertical(i.direction);(r.options.dragBlockVertical&&y||r.options.dragBlockHorizontal&&!y)&&i.preventDefault();break;case a:t&&i.changedLength<=r.options.dragMaxTouches&&(r.trigger(n+"end",i),t=!1);break;case h:t=!1}}var t=!1;e.gestures.Drag={name:n,index:50,handler:i,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag");e.gestures.Gesture={name:"gesture",index:1337,handler:function(n,t){t.trigger(this.name,n)}},function(n){function i(i,r){var f=r.options,u=s.current;switch(i.eventType){case c:clearTimeout(t);u.name=n;t=setTimeout(function(){u&&u.name==n&&r.trigger(n,i)},f.holdTimeout);break;case l:i.distance>f.holdThreshold&&clearTimeout(t);break;case a:clearTimeout(t)}}var t;e.gestures.Hold={name:n,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:i}}("hold");e.gestures.Release={name:"release",index:Infinity,handler:function(n,t){n.eventType==a&&t.trigger(this.name,n)}};e.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(n,t){if(n.eventType==a){var r=n.touches.length,i=t.options;if(r<i.swipeMinTouches||r>i.swipeMaxTouches)return;(n.velocityX>i.swipeVelocityX||n.velocityY>i.swipeVelocityY)&&(t.trigger(this.name,n),t.trigger(this.name+n.direction,n))}}},function(n){function i(i,r){var u=r.options,v=s.current,f=s.previous,e,a;switch(i.eventType){case c:t=!1;break;case l:t=t||i.distance>u.tapMaxDistance;break;case h:!o.inStr(i.srcEvent.type,"cancel")&&i.deltaTime<u.tapMaxTime&&!t&&(e=f&&f.lastEvent&&i.timeStamp-f.lastEvent.timeStamp,a=!1,f&&f.name==n&&e&&e<u.doubleTapInterval&&i.distance<u.doubleTapDistance&&(r.trigger("doubletap",i),a=!0),(!a||u.tapAlways)&&(v.name=n,r.trigger(v.name,i)))}}var t=!1;e.gestures.Tap={name:n,index:100,handler:i,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap");e.gestures.Touch={name:"touch",index:-Infinity,defaults:{preventDefault:!1,preventMouse:!1},handler:function(n,t){if(t.options.preventMouse&&n.pointerType==w){n.stopDetect();return}t.options.preventDefault&&n.preventDefault();n.eventType==b&&t.trigger("touch",n)}},function(n){function i(i,r){switch(i.eventType){case c:t=!1;break;case l:if(i.touches.length<2)return;var u=Math.abs(1-i.scale),f=Math.abs(i.rotation);if(u<r.options.transformMinScale&&f<r.options.transformMinRotation)return;s.current.name=n;t||(r.trigger(n+"start",i),t=!0);r.trigger(n,i);f>r.options.transformMinRotation&&r.trigger("rotate",i);u>r.options.transformMinScale&&(r.trigger("pinch",i),r.trigger("pinch"+(i.scale<1?"in":"out"),i));break;case a:t&&i.changedLength<2&&(r.trigger(n+"end",i),t=!1)}}var t=!1;e.gestures.Transform={name:n,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:i}}("transform");!(r=function(){return e}.call(t,i,t,n),r!==f&&(n.exports=r))})(window)},function(n,t){t.startWithClustering=function(){this.clusterToFit(this.constants.clustering.initialMaxNodes,!0);this.updateLabels();this.stabilize&&this._stabilize();this.start()};t.clusterToFit=function(n,t){for(var r=this.nodeIndices.length,i=0;r>n&&i<50;)i%3==0?(this.forceAggregateHubs(!0),this.normalizeClusterLevels()):this.increaseClusterLevel(),r=this.nodeIndices.length,i+=1;i>0&&t==!0&&this.repositionNodes();this._updateCalculationNodes()};t.openCluster=function(n){var i=this.moving,t;if(n.clusterSize>this.constants.clustering.sectorThreshold&&this._nodeInActiveArea(n)&&!(this._sector()=="default"&&this.nodeIndices.length==1))for(this._addSector(n),t=0;this.nodeIndices.length<this.constants.clustering.initialMaxNodes&&t<10;)this.decreaseClusterLevel(),t+=1;else this._expandClusterNode(n,!1,!0),this._updateNodeIndexList(),this._updateDynamicEdges(),this._updateCalculationNodes(),this.updateLabels();this.moving!=i&&this.start()};t.updateClustersDefault=function(){this.constants.clustering.enabled==!0&&this.updateClusters(0,!1,!1)};t.increaseClusterLevel=function(){this.updateClusters(-1,!1,!0)};t.decreaseClusterLevel=function(){this.updateClusters(1,!1,!0)};t.updateClusters=function(n,t,i,r){var f=this.moving,u=this.nodeIndices.length;this.previousScale>this.scale&&n==0&&this._collapseSector();this.previousScale>this.scale||n==-1?this._formClusters(i):(this.previousScale<this.scale||n==1)&&(i==!0?this._openClusters(t,i):this._openClustersBySize());this._updateNodeIndexList();this.nodeIndices.length==u&&(this.previousScale>this.scale||n==-1)&&(this._aggregateHubs(i),this._updateNodeIndexList());(this.previousScale>this.scale||n==-1)&&(this.handleChains(),this._updateNodeIndexList());this.previousScale=this.scale;this._updateDynamicEdges();this.updateLabels();this.nodeIndices.length<u&&(this.clusterSession+=1,this.normalizeClusterLevels());(r==!1||r===undefined)&&this.moving!=f&&this.start();this._updateCalculationNodes()};t.handleChains=function(){var n=this._getChainFraction();n>this.constants.clustering.chainThreshold&&this._reduceAmountOfChains(1-this.constants.clustering.chainThreshold/n)};t._aggregateHubs=function(n){this._getHubSize();this._formClustersByHub(n,!1)};t.forceAggregateHubs=function(n){var t=this.moving,i=this.nodeIndices.length;this._aggregateHubs(!0);this._updateNodeIndexList();this._updateDynamicEdges();this.updateLabels();this.nodeIndices.length!=i&&(this.clusterSession+=1);(n==!1||n===undefined)&&this.moving!=t&&this.start()};t._openClustersBySize=function(){var t,n;for(t in this.nodes)this.nodes.hasOwnProperty(t)&&(n=this.nodes[t],n.inView()==!0&&(n.width*this.scale>this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientWidth||n.height*this.scale>this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientHeight)&&this.openCluster(n))};t._openClusters=function(n,t){for(var r,i=0;i<this.nodeIndices.length;i++)r=this.nodes[this.nodeIndices[i]],this._expandClusterNode(r,n,t),this._updateCalculationNodes()};t._expandClusterNode=function(n,t,i,r){var u,f;if(n.clusterSize>1&&(n.clusterSize<this.constants.clustering.sectorThreshold&&(r=!0),t=r?!0:t,n.formationScale<this.scale||i==!0))for(u in n.containedNodes)n.containedNodes.hasOwnProperty(u)&&(f=n.containedNodes[u],i==!0?(f.clusterSession==n.clusterSessions[n.clusterSessions.length-1]||r)&&this._expelChildFromParent(n,u,t,i,r):this._nodeInActiveArea(n)&&this._expelChildFromParent(n,u,t,i,r))};t._expelChildFromParent=function(n,t,i,r,u){var f=n.containedNodes[t],e,o;if(f.formationScale<this.scale||r==!0){this._unselectAll();this.nodes[t]=f;this._releaseContainedEdges(n,f);this._connectEdgeBackToChild(n,f);this._validateEdges(n);n.options.mass-=f.options.mass;n.clusterSize-=f.clusterSize;n.options.fontSize=Math.min(this.constants.clustering.maxFontSize,this.constants.nodes.fontSize+this.constants.clustering.fontSizeMultiplier*n.clusterSize);n.dynamicEdgesLength=n.dynamicEdges.length;f.x=n.x+n.growthIndicator*(.5-Math.random());f.y=n.y+n.growthIndicator*(.5-Math.random());delete n.containedNodes[t];e=!1;for(o in n.containedNodes)if(n.containedNodes.hasOwnProperty(o)&&n.containedNodes[o].clusterSession==f.clusterSession){e=!0;break}e==!1&&n.clusterSessions.pop();this._repositionBezierNodes(f);f.clusterSession=0;n.clearSizeCache();this.moving=!0}i==!0&&this._expandClusterNode(f,i,r,u)};t._repositionBezierNodes=function(n){for(var t=0;t<n.dynamicEdges.length;t++)n.dynamicEdges[t].positionBezierNode()};t._formClusters=function(n){n==!1?this._formClustersByZoom():this._forceClustersByZoom()};t._formClustersByZoom=function(){var r,u,e,o=this.constants.clustering.clusterEdgeThreshold/this.scale,f,n,t,i;for(f in this.edges)this.edges.hasOwnProperty(f)&&(n=this.edges[f],n.connected&&n.toId!=n.fromId&&(r=n.to.x-n.from.x,u=n.to.y-n.from.y,e=Math.sqrt(r*r+u*u),e<o&&(t=n.from,i=n.to,n.to.options.mass>n.from.options.mass&&(t=n.to,i=n.from),i.dynamicEdgesLength==1?this._addToCluster(t,i,!1):t.dynamicEdgesLength==1&&this._addToCluster(i,t,!1))))};t._forceClustersByZoom=function(){var r,n,i,t;for(r in this.nodes)this.nodes.hasOwnProperty(r)&&(n=this.nodes[r],n.dynamicEdgesLength==1&&n.dynamicEdges.length!=0&&(i=n.dynamicEdges[0],t=i.toId==n.id?this.nodes[i.fromId]:this.nodes[i.toId],n.id!=t.id&&(t.options.mass>n.options.mass?this._addToCluster(t,n,!0):this._addToCluster(n,t,!0))))};t._clusterToSmallestNeighbour=function(n){for(var t,r=-1,u=null,i=0;i<n.dynamicEdges.length;i++)n.dynamicEdges[i]!==undefined&&(t=null,n.dynamicEdges[i].fromId!=n.id?t=n.dynamicEdges[i].from:n.dynamicEdges[i].toId!=n.id&&(t=n.dynamicEdges[i].to),t!=null&&r>t.clusterSessions.length&&(r=t.clusterSessions.length,u=t));t!=null&&this.nodes[t.id]!==undefined&&this._addToCluster(t,n,!0)};t._formClustersByHub=function(n,t){for(var i in this.nodes)this.nodes.hasOwnProperty(i)&&this._formClusterFromHub(this.nodes[i],n,t)};t._formClusterFromHub=function(n,t,i,r){var f,u,e;if(r===undefined&&(r=0),n.dynamicEdgesLength>=this.hubThreshold&&i==!1||n.dynamicEdgesLength==this.hubThreshold&&i==!0){var o,s,a,v=this.constants.clustering.clusterEdgeThreshold/this.scale,h=!1,c=[],l=n.dynamicEdges.length;for(f=0;f<l;f++)c.push(n.dynamicEdges[f].id);if(t==!1)for(h=!1,f=0;f<l;f++)if(u=this.edges[c[f]],u!==undefined&&u.connected&&u.toId!=u.fromId&&(o=u.to.x-u.from.x,s=u.to.y-u.from.y,a=Math.sqrt(o*o+s*s),a<v)){h=!0;break}if(!t&&h||t)for(f=0;f<l;f++)u=this.edges[c[f]],u!==undefined&&(e=this.nodes[u.fromId==n.id?u.toId:u.fromId],e.dynamicEdges.length<=this.hubThreshold+r&&e.id!=n.id&&this._addToCluster(n,e,t))}};t._addToCluster=function(n,t,i){var u,r,f;for(n.containedNodes[t.id]=t,u=0;u<t.dynamicEdges.length;u++)r=t.dynamicEdges[u],r.toId==n.id||r.fromId==n.id?this._addToContainedEdges(n,t,r):this._connectEdgeToCluster(n,t,r);t.dynamicEdges=[];this._containCircularEdgesFromNode(n,t);delete this.nodes[t.id];f=n.options.mass;t.clusterSession=this.clusterSession;n.options.mass+=t.options.mass;n.clusterSize+=t.clusterSize;n.options.fontSize=Math.min(this.constants.clustering.maxFontSize,this.constants.nodes.fontSize+this.constants.clustering.fontSizeMultiplier*n.clusterSize);n.clusterSessions[n.clusterSessions.length-1]!=this.clusterSession&&n.clusterSessions.push(this.clusterSession);n.formationScale=i==!0?0:this.scale;n.clearSizeCache();n.containedNodes[t.id].formationScale=n.formationScale;t.clearVelocity();n.updateVelocity(f);this.moving=!0};t._updateDynamicEdges=function(){for(var n,u,i,f,e,t,r=0;r<this.nodeIndices.length;r++){if(n=this.nodes[this.nodeIndices[r]],n.dynamicEdgesLength=n.dynamicEdges.length,u=0,n.dynamicEdgesLength>1)for(i=0;i<n.dynamicEdgesLength-1;i++)for(f=n.dynamicEdges[i].toId,e=n.dynamicEdges[i].fromId,t=i+1;t<n.dynamicEdgesLength;t++)(n.dynamicEdges[t].toId==f&&n.dynamicEdges[t].fromId==e||n.dynamicEdges[t].fromId==f&&n.dynamicEdges[t].toId==e)&&(u+=1);n.dynamicEdgesLength-=u}};t._addToContainedEdges=function(n,t,i){n.containedEdges.hasOwnProperty(t.id)||(n.containedEdges[t.id]=[]);n.containedEdges[t.id].push(i);delete this.edges[i.id];for(var r=0;r<n.dynamicEdges.length;r++)if(n.dynamicEdges[r].id==i.id){n.dynamicEdges.splice(r,1);break}};t._connectEdgeToCluster=function(n,t,i){i.toId==i.fromId?this._addToContainedEdges(n,t,i):(i.toId==t.id?(i.originalToId.push(t.id),i.to=n,i.toId=n.id):(i.originalFromId.push(t.id),i.from=n,i.fromId=n.id),this._addToReroutedEdges(n,t,i))};t._containCircularEdgesFromNode=function(n,t){for(var r,i=0;i<n.dynamicEdges.length;i++)r=n.dynamicEdges[i],r.toId==r.fromId&&this._addToContainedEdges(n,t,r)};t._addToReroutedEdges=function(n,t,i){n.reroutedEdges.hasOwnProperty(t.id)||(n.reroutedEdges[t.id]=[]);n.reroutedEdges[t.id].push(i);n.dynamicEdges.push(i)};t._connectEdgeBackToChild=function(n,t){var u,i,r;if(n.reroutedEdges.hasOwnProperty(t.id)){for(u=0;u<n.reroutedEdges[t.id].length;u++)for(i=n.reroutedEdges[t.id][u],i.originalFromId[i.originalFromId.length-1]==t.id?(i.originalFromId.pop(),i.fromId=t.id,i.from=t):(i.originalToId.pop(),i.toId=t.id,i.to=t),t.dynamicEdges.push(i),r=0;r<n.dynamicEdges.length;r++)if(n.dynamicEdges[r].id==i.id){n.dynamicEdges.splice(r,1);break}delete n.reroutedEdges[t.id]}};t._validateEdges=function(n){for(var i,t=0;t<n.dynamicEdges.length;t++)i=n.dynamicEdges[t],n.id!=i.toId&&n.id!=i.fromId&&n.dynamicEdges.splice(t,1)};t._releaseContainedEdges=function(n,t){for(var i,r=0;r<n.containedEdges[t.id].length;r++)i=n.containedEdges[t.id][r],this.edges[i.id]=i,t.dynamicEdges.push(i),n.dynamicEdges.push(i);delete n.containedEdges[t.id]};t.updateLabels=function(){var t,n;for(t in this.nodes)this.nodes.hasOwnProperty(t)&&(n=this.nodes[t],n.clusterSize>1&&(n.label="[".concat(String(n.clusterSize),"]")));for(t in this.nodes)this.nodes.hasOwnProperty(t)&&(n=this.nodes[t],n.clusterSize==1&&(n.label=n.originalLabel!==undefined?n.originalLabel:String(n.id)))};t.normalizeClusterLevels=function(){var i=0,r=1e9,t=0,n,u,f;for(n in this.nodes)this.nodes.hasOwnProperty(n)&&(t=this.nodes[n].clusterSessions.length,i<t&&(i=t),r>t&&(r=t));if(i-r>this.constants.clustering.clusterLevelDifference){u=this.nodeIndices.length;f=i-this.constants.clustering.clusterLevelDifference;for(n in this.nodes)this.nodes.hasOwnProperty(n)&&this.nodes[n].clusterSessions.length<f&&this._clusterToSmallestNeighbour(this.nodes[n]);this._updateNodeIndexList();this._updateDynamicEdges();this.nodeIndices.length!=u&&(this.clusterSession+=1)}};t._nodeInActiveArea=function(n){return Math.abs(n.x-this.areaCenter.x)<=this.constants.clustering.activeAreaBoxSize/this.scale&&Math.abs(n.y-this.areaCenter.y)<=this.constants.clustering.activeAreaBoxSize/this.scale};t.repositionNodes=function(){for(var n,i,r,t=0;t<this.nodeIndices.length;t++)n=this.nodes[this.nodeIndices[t]],(n.xFixed==!1||n.yFixed==!1)&&(i=10*.1*this.nodeIndices.length*Math.min(100,n.options.mass),r=2*Math.PI*Math.random(),n.xFixed==!1&&(n.x=i*Math.cos(r)),n.yFixed==!1&&(n.y=i*Math.sin(r)),this._repositionBezierNodes(n))};t._getHubSize=function(){for(var t,e,o,n=0,i=0,u=0,r=0,f=0;f<this.nodeIndices.length;f++)t=this.nodes[this.nodeIndices[f]],t.dynamicEdgesLength>r&&(r=t.dynamicEdgesLength),n+=t.dynamicEdgesLength,i+=Math.pow(t.dynamicEdgesLength,2),u+=1;n=n/u;i=i/u;e=i-Math.pow(n,2);o=Math.sqrt(e);this.hubThreshold=Math.floor(n+2*o);this.hubThreshold>r&&(this.hubThreshold=r)};t._reduceAmountOfChains=function(n){var i,t;this.hubThreshold=2;i=Math.floor(this.nodeIndices.length*n);for(t in this.nodes)this.nodes.hasOwnProperty(t)&&this.nodes[t].dynamicEdgesLength==2&&this.nodes[t].dynamicEdges.length>=2&&i>0&&(this._formClusterFromHub(this.nodes[t],!0,!0,1),i-=1)};t._getChainFraction=function(){var t=0,i=0;for(var n in this.nodes)this.nodes.hasOwnProperty(n)&&(this.nodes[n].dynamicEdgesLength==2&&this.nodes[n].dynamicEdges.length>=2&&(t+=1),i+=1);return t/i}},function(n,t,i){var r=i(1);t._putDataInSector=function(){this.sectors.active[this._sector()].nodes=this.nodes;this.sectors.active[this._sector()].edges=this.edges;this.sectors.active[this._sector()].nodeIndices=this.nodeIndices};t._switchToSector=function(n,t){t===undefined||t=="active"?this._switchToActiveSector(n):this._switchToFrozenSector(n)};t._switchToActiveSector=function(n){this.nodeIndices=this.sectors.active[n].nodeIndices;this.nodes=this.sectors.active[n].nodes;this.edges=this.sectors.active[n].edges};t._switchToSupportSector=function(){this.nodeIndices=this.sectors.support.nodeIndices;this.nodes=this.sectors.support.nodes;this.edges=this.sectors.support.edges};t._switchToFrozenSector=function(n){this.nodeIndices=this.sectors.frozen[n].nodeIndices;this.nodes=this.sectors.frozen[n].nodes;this.edges=this.sectors.frozen[n].edges};t._loadLatestSector=function(){this._switchToSector(this._sector())};t._sector=function(){return this.activeSector[this.activeSector.length-1]};t._previousSector=function(){if(this.activeSector.length>1)return this.activeSector[this.activeSector.length-2];throw new TypeError("there are not enough sectors in the this.activeSector array.");};t._setActiveSector=function(n){this.activeSector.push(n)};t._forgetLastSector=function(){this.activeSector.pop()};t._createNewSector=function(n){this.sectors.active[n]={nodes:{},edges:{},nodeIndices:[],formationScale:this.scale,drawingNode:undefined};this.sectors.active[n].drawingNode=new Node({id:n,color:{background:"#eaefef",border:"495c5e"}},{},{},this.constants);this.sectors.active[n].drawingNode.clusterSize=2};t._deleteActiveSector=function(n){delete this.sectors.active[n]};t._deleteFrozenSector=function(n){delete this.sectors.frozen[n]};t._freezeSector=function(n){this.sectors.frozen[n]=this.sectors.active[n];this._deleteActiveSector(n)};t._activateSector=function(n){this.sectors.active[n]=this.sectors.frozen[n];this._deleteFrozenSector(n)};t._mergeThisWithFrozen=function(n){var t,i,r;for(t in this.nodes)this.nodes.hasOwnProperty(t)&&(this.sectors.frozen[n].nodes[t]=this.nodes[t]);for(i in this.edges)this.edges.hasOwnProperty(i)&&(this.sectors.frozen[n].edges[i]=this.edges[i]);for(r=0;r<this.nodeIndices.length;r++)this.sectors.frozen[n].nodeIndices.push(this.nodeIndices[r])};t._collapseThisToSingleCluster=function(){this.clusterToFit(1,!1)};t._addSector=function(n){var i=this._sector(),t;delete this.nodes[n.id];t=r.randomUUID();this._freezeSector(i);this._createNewSector(t);this._setActiveSector(t);this._switchToSector(this._sector());this.nodes[n.id]=n};t._collapseSector=function(){var n=this._sector(),t;n!="default"&&(this.nodeIndices.length==1||this.sectors.active[n].drawingNode.width*this.scale<this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientWidth||this.sectors.active[n].drawingNode.height*this.scale<this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientHeight)&&(t=this._previousSector(),this._collapseThisToSingleCluster(),this._mergeThisWithFrozen(t),this._deleteActiveSector(n),this._activateSector(t),this._switchToSector(t),this._forgetLastSector(),this._updateNodeIndexList(),this._updateCalculationNodes())};t._doInAllActiveSectors=function(n,t){var i,r;if(t===undefined)for(i in this.sectors.active)this.sectors.active.hasOwnProperty(i)&&(this._switchToActiveSector(i),this[n]());else for(i in this.sectors.active)this.sectors.active.hasOwnProperty(i)&&(this._switchToActiveSector(i),r=Array.prototype.splice.call(arguments,1),r.length>1?this[n](r[0],r[1]):this[n](t));this._loadLatestSector()};t._doInSupportSector=function(n,t){if(t===undefined)this._switchToSupportSector(),this[n]();else{this._switchToSupportSector();var i=Array.prototype.splice.call(arguments,1);i.length>1?this[n](i[0],i[1]):this[n](t)}this._loadLatestSector()};t._doInAllFrozenSectors=function(n,t){var i,r;if(t===undefined)for(i in this.sectors.frozen)this.sectors.frozen.hasOwnProperty(i)&&(this._switchToFrozenSector(i),this[n]());else for(i in this.sectors.frozen)this.sectors.frozen.hasOwnProperty(i)&&(this._switchToFrozenSector(i),r=Array.prototype.splice.call(arguments,1),r.length>1?this[n](r[0],r[1]):this[n](t));this._loadLatestSector()};t._doInAllSectors=function(n,t){var i=Array.prototype.splice.call(arguments,1);t===undefined?(this._doInAllActiveSectors(n),this._doInAllFrozenSectors(n)):i.length>1?(this._doInAllActiveSectors(n,i[0],i[1]),this._doInAllFrozenSectors(n,i[0],i[1])):(this._doInAllActiveSectors(n,t),this._doInAllFrozenSectors(n,t))};t._clearNodeIndexList=function(){var n=this._sector();this.sectors.active[n].nodeIndices=[];this.nodeIndices=this.sectors.active[n].nodeIndices};t._drawSectorNodes=function(n,t){var r=1e9,e=-1e9,u=1e9,o=-1e9,i,f,s;for(f in this.sectors[t])if(this.sectors[t].hasOwnProperty(f)&&this.sectors[t][f].drawingNode!==undefined){this._switchToSector(f,t);r=1e9;e=-1e9;u=1e9;o=-1e9;for(s in this.nodes)this.nodes.hasOwnProperty(s)&&(i=this.nodes[s],i.resize(n),u>i.x-.5*i.width&&(u=i.x-.5*i.width),o<i.x+.5*i.width&&(o=i.x+.5*i.width),r>i.y-.5*i.height&&(r=i.y-.5*i.height),e<i.y+.5*i.height&&(e=i.y+.5*i.height));i=this.sectors[t][f].drawingNode;i.x=.5*(o+u);i.y=.5*(e+r);i.width=2*(i.x-u);i.height=2*(i.y-r);i.radius=Math.sqrt(Math.pow(.5*i.width,2)+Math.pow(.5*i.height,2));i.setScale(this.scale);i._drawCircle(n)}};t._drawAllSectorNodes=function(n){this._drawSectorNodes(n,"frozen");this._drawSectorNodes(n,"active");this._loadLatestSector()}},function(n,t,i){var r=i(36);t._getNodesOverlappingWith=function(n,t){var i=this.nodes;for(var r in i)i.hasOwnProperty(r)&&i[r].isOverlappingWith(n)&&t.push(r)};t._getAllNodesOverlappingWith=function(n){var t=[];return this._doInAllActiveSectors("_getNodesOverlappingWith",n,t),t};t._pointerToPositionObject=function(n){var t=this._XconvertDOMtoCanvas(n.x),i=this._YconvertDOMtoCanvas(n.y);return{left:t,top:i,right:t,bottom:i}};t._getNodeAt=function(n){var i=this._pointerToPositionObject(n),t=this._getAllNodesOverlappingWith(i);return t.length>0?this.nodes[t[t.length-1]]:null};t._getEdgesOverlappingWith=function(n,t){var i=this.edges;for(var r in i)i.hasOwnProperty(r)&&i[r].isOverlappingWith(n)&&t.push(r)};t._getAllEdgesOverlappingWith=function(n){var t=[];return this._doInAllActiveSectors("_getEdgesOverlappingWith",n,t),t};t._getEdgeAt=function(n){var i=this._pointerToPositionObject(n),t=this._getAllEdgesOverlappingWith(i);return t.length>0?this.edges[t[t.length-1]]:null};t._addToSelection=function(n){n instanceof r?this.selectionObj.nodes[n.id]=n:this.selectionObj.edges[n.id]=n};t._addToHover=function(n){n instanceof r?this.hoverObj.nodes[n.id]=n:this.hoverObj.edges[n.id]=n};t._removeFromSelection=function(n){n instanceof r?delete this.selectionObj.nodes[n.id]:delete this.selectionObj.edges[n.id]};t._unselectAll=function(n){var t,i;n===undefined&&(n=!1);for(t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].unselect();for(i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&this.selectionObj.edges[i].unselect();this.selectionObj={nodes:{},edges:{}};n==!1&&this.emit("select",this.getSelection())};t._unselectClusters=function(n){n===undefined&&(n=!1);for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].clusterSize>1&&(this.selectionObj.nodes[t].unselect(),this._removeFromSelection(this.selectionObj.nodes[t]));n==!1&&this.emit("select",this.getSelection())};t._getSelectedNodeCount=function(){var n=0;for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(n+=1);return n};t._getSelectedNode=function(){for(var n in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(n))return this.selectionObj.nodes[n];return null};t._getSelectedEdge=function(){for(var n in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(n))return this.selectionObj.edges[n];return null};t._getSelectedEdgeCount=function(){var n=0;for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&(n+=1);return n};t._getSelectedObjectCount=function(){var n=0,t,i;for(t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(n+=1);for(i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&(n+=1);return n};t._selectionIsEmpty=function(){var n,t;for(n in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(n))return!1;for(t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return!1;return!0};t._clusterInSelection=function(){for(var n in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(n)&&this.selectionObj.nodes[n].clusterSize>1)return!0;return!1};t._selectConnectedEdges=function(n){for(var i,t=0;t<n.dynamicEdges.length;t++)i=n.dynamicEdges[t],i.select(),this._addToSelection(i)};t._hoverConnectedEdges=function(n){for(var i,t=0;t<n.dynamicEdges.length;t++)i=n.dynamicEdges[t],i.hover=!0,this._addToHover(i)};t._unselectConnectedEdges=function(n){for(var i,t=0;t<n.dynamicEdges.length;t++)i=n.dynamicEdges[t],i.unselect(),this._removeFromSelection(i)};t._selectObject=function(n,t,i,u){i===undefined&&(i=!1);u===undefined&&(u=!0);this._selectionIsEmpty()==!1&&t==!1&&this.forceAppendSelection==!1&&this._unselectAll(!0);n.selected==!1?(n.select(),this._addToSelection(n),n instanceof r&&this.blockConnectingEdgeSelection==!1&&u==!0&&this._selectConnectedEdges(n)):(n.unselect(),this._removeFromSelection(n));i==!1&&this.emit("select",this.getSelection())};t._blurObject=function(n){n.hover==!0&&(n.hover=!1,this.emit("blurNode",{node:n.id}))};t._hoverObject=function(n){n.hover==!1&&(n.hover=!0,this._addToHover(n),n instanceof r&&this.emit("hoverNode",{node:n.id}));n instanceof r&&this._hoverConnectedEdges(n)};t._handleTouch=function(){};t._handleTap=function(n){var i=this._getNodeAt(n),t;i!=null?this._selectObject(i,!1):(t=this._getEdgeAt(n),t!=null?this._selectObject(t,!1):this._unselectAll());this.emit("click",this.getSelection());this._redraw()};t._handleDoubleTap=function(n){var t=this._getNodeAt(n);t!=null&&t!==undefined&&(this.areaCenter={x:this._XconvertDOMtoCanvas(n.x),y:this._YconvertDOMtoCanvas(n.y)},this.openCluster(t));this.emit("doubleClick",this.getSelection())};t._handleOnHold=function(n){var i=this._getNodeAt(n),t;i!=null?this._selectObject(i,!0):(t=this._getEdgeAt(n),t!=null&&this._selectObject(t,!0));this._redraw()};t._handleOnRelease=function(){};t.getSelection=function(){var n=this.getSelectedNodes(),t=this.getSelectedEdges();return{nodes:n,edges:t}};t.getSelectedNodes=function(){var n=[];for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&n.push(t);return n};t.getSelectedEdges=function(){var n=[];for(var t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&n.push(t);return n};t.setSelection=function(n){var t,u,i,r;if(!n||n.length==undefined)throw"Selection must be an array with ids";for(this._unselectAll(!0),t=0,u=n.length;t<u;t++){if(i=n[t],r=this.nodes[i],!r)throw new RangeError('Node with id "'+i+'" not found');this._selectObject(r,!0,!0)}console.log("setSelection is deprecated. Please use selectNodes instead.");this.redraw()};t.selectNodes=function(n,t){var i,f,r,u;if(!n||n.length==undefined)throw"Selection must be an array with ids";for(this._unselectAll(!0),i=0,f=n.length;i<f;i++){if(r=n[i],u=this.nodes[r],!u)throw new RangeError('Node with id "'+r+'" not found');this._selectObject(u,!0,!0,t)}this.redraw()};t.selectEdges=function(n){var t,u,i,r;if(!n||n.length==undefined)throw"Selection must be an array with ids";for(this._unselectAll(!0),t=0,u=n.length;t<u;t++){if(i=n[t],r=this.edges[i],!r)throw new RangeError('Edge with id "'+i+'" not found');this._selectObject(r,!0,!0,highlightEdges)}this.redraw()};t._updateSelection=function(){var n,t;for(n in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(n)&&(this.nodes.hasOwnProperty(n)||delete this.selectionObj.nodes[n]);for(t in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(t)&&(this.edges.hasOwnProperty(t)||delete this.selectionObj.edges[t])}},function(n,t,i){var u=i(1),r=i(36),f=i(33);t._clearManipulatorBar=function(){while(this.manipulationDiv.hasChildNodes())this.manipulationDiv.removeChild(this.manipulationDiv.firstChild)};t._restoreOverloadedFunctions=function(){for(var n in this.cachedFunctions)this.cachedFunctions.hasOwnProperty(n)&&(this[n]=this.cachedFunctions[n])};t._toggleEditMode=function(){this.editMode=!this.editMode;var t=document.getElementById("network-manipulationDiv"),n=document.getElementById("network-manipulation-closeDiv"),i=document.getElementById("network-manipulation-editMode");this.editMode==!0?(t.style.display="block",n.style.display="block",i.style.display="none",n.onclick=this._toggleEditMode.bind(this)):(t.style.display="none",n.style.display="none",i.style.display="block",n.onclick=null);this._createManipulatorBar()};t._createManipulatorBar=function(){var t,i,n,r,u,f;if(this.boundFunction&&this.off("select",this.boundFunction),this.edgeBeingEdited!==undefined&&(this.edgeBeingEdited._disableControlNodes(),this.edgeBeingEdited=undefined,this.selectedControlNode=null,this.controlNodesActive=!1),this._restoreOverloadedFunctions(),this.freezeSimulation=!1,this.blockConnectingEdgeSelection=!1,this.forceAppendSelection=!1,this.editMode==!0){while(this.manipulationDiv.hasChildNodes())this.manipulationDiv.removeChild(this.manipulationDiv.firstChild);this.manipulationDiv.innerHTML="<span class='network-manipulationUI add' id='network-manipulate-addNode'><span class='network-manipulationLabel'>"+this.constants.labels.add+"<\/span><\/span><div class='network-seperatorLine'><\/div><span class='network-manipulationUI connect' id='network-manipulate-connectNode'><span class='network-manipulationLabel'>"+this.constants.labels.link+"<\/span><\/span>";this._getSelectedNodeCount()==1&&this.triggerFunctions.edit?this.manipulationDiv.innerHTML+="<div class='network-seperatorLine'><\/div><span class='network-manipulationUI edit' id='network-manipulate-editNode'><span class='network-manipulationLabel'>"+this.constants.labels.editNode+"<\/span><\/span>":this._getSelectedEdgeCount()==1&&this._getSelectedNodeCount()==0&&(this.manipulationDiv.innerHTML+="<div class='network-seperatorLine'><\/div><span class='network-manipulationUI edit' id='network-manipulate-editEdge'><span class='network-manipulationLabel'>"+this.constants.labels.editEdge+"<\/span><\/span>");this._selectionIsEmpty()==!1&&(this.manipulationDiv.innerHTML+="<div class='network-seperatorLine'><\/div><span class='network-manipulationUI delete' id='network-manipulate-delete'><span class='network-manipulationLabel'>"+this.constants.labels.del+"<\/span><\/span>");t=document.getElementById("network-manipulate-addNode");t.onclick=this._createAddNodeToolbar.bind(this);i=document.getElementById("network-manipulate-connectNode");i.onclick=this._createAddEdgeToolbar.bind(this);this._getSelectedNodeCount()==1&&this.triggerFunctions.edit?(n=document.getElementById("network-manipulate-editNode"),n.onclick=this._editNode.bind(this)):this._getSelectedEdgeCount()==1&&this._getSelectedNodeCount()==0&&(n=document.getElementById("network-manipulate-editEdge"),n.onclick=this._createEditEdgeToolbar.bind(this));this._selectionIsEmpty()==!1&&(r=document.getElementById("network-manipulate-delete"),r.onclick=this._deleteSelected.bind(this));u=document.getElementById("network-manipulation-closeDiv");u.onclick=this._toggleEditMode.bind(this);this.boundFunction=this._createManipulatorBar.bind(this);this.on("select",this.boundFunction)}else this.editModeDiv.innerHTML="<span class='network-manipulationUI edit editmode' id='network-manipulate-editModeButton'><span class='network-manipulationLabel'>"+this.constants.labels.edit+"<\/span><\/span>",f=document.getElementById("network-manipulate-editModeButton"),f.onclick=this._toggleEditMode.bind(this)};t._createAddNodeToolbar=function(){this._clearManipulatorBar();this.boundFunction&&this.off("select",this.boundFunction);this.manipulationDiv.innerHTML="<span class='network-manipulationUI back' id='network-manipulate-back'><span class='network-manipulationLabel'>"+this.constants.labels.back+" <\/span><\/span><div class='network-seperatorLine'><\/div><span class='network-manipulationUI none' id='network-manipulate-back'><span id='network-manipulatorLabel' class='network-manipulationLabel'>"+this.constants.labels.addDescription+"<\/span><\/span>";var n=document.getElementById("network-manipulate-back");n.onclick=this._createManipulatorBar.bind(this);this.boundFunction=this._addNode.bind(this);this.on("select",this.boundFunction)};t._createAddEdgeToolbar=function(){this._clearManipulatorBar();this._unselectAll(!0);this.freezeSimulation=!0;this.boundFunction&&this.off("select",this.boundFunction);this._unselectAll();this.forceAppendSelection=!1;this.blockConnectingEdgeSelection=!0;this.manipulationDiv.innerHTML="<span class='network-manipulationUI back' id='network-manipulate-back'><span class='network-manipulationLabel'>"+this.constants.labels.back+" <\/span><\/span><div class='network-seperatorLine'><\/div><span class='network-manipulationUI none' id='network-manipulate-back'><span id='network-manipulatorLabel' class='network-manipulationLabel'>"+this.constants.labels.linkDescription+"<\/span><\/span>";var n=document.getElementById("network-manipulate-back");n.onclick=this._createManipulatorBar.bind(this);this.boundFunction=this._handleConnect.bind(this);this.on("select",this.boundFunction);this.cachedFunctions._handleTouch=this._handleTouch;this.cachedFunctions._handleOnRelease=this._handleOnRelease;this._handleTouch=this._handleConnect;this._handleOnRelease=this._finishConnect;this._redraw()};t._createEditEdgeToolbar=function(){this._clearManipulatorBar();this.controlNodesActive=!0;this.boundFunction&&this.off("select",this.boundFunction);this.edgeBeingEdited=this._getSelectedEdge();this.edgeBeingEdited._enableControlNodes();this.manipulationDiv.innerHTML="<span class='network-manipulationUI back' id='network-manipulate-back'><span class='network-manipulationLabel'>"+this.constants.labels.back+" <\/span><\/span><div class='network-seperatorLine'><\/div><span class='network-manipulationUI none' id='network-manipulate-back'><span id='network-manipulatorLabel' class='network-manipulationLabel'>"+this.constants.labels.editEdgeDescription+"<\/span><\/span>";var n=document.getElementById("network-manipulate-back");n.onclick=this._createManipulatorBar.bind(this);this.cachedFunctions._handleTouch=this._handleTouch;this.cachedFunctions._handleOnRelease=this._handleOnRelease;this.cachedFunctions._handleTap=this._handleTap;this.cachedFunctions._handleDragStart=this._handleDragStart;this.cachedFunctions._handleOnDrag=this._handleOnDrag;this._handleTouch=this._selectControlNode;this._handleTap=function(){};this._handleOnDrag=this._controlNodeDrag;this._handleDragStart=function(){};this._handleOnRelease=this._releaseControlNode;this._redraw()};t._selectControlNode=function(n){this.edgeBeingEdited.controlNodes.from.unselect();this.edgeBeingEdited.controlNodes.to.unselect();this.selectedControlNode=this.edgeBeingEdited._getSelectedControlNode(this._XconvertDOMtoCanvas(n.x),this._YconvertDOMtoCanvas(n.y));this.selectedControlNode!==null&&(this.selectedControlNode.select(),this.freezeSimulation=!0);this._redraw()};t._controlNodeDrag=function(n){var t=this._getPointer(n.gesture.center);this.selectedControlNode!==null&&this.selectedControlNode!==undefined&&(this.selectedControlNode.x=this._XconvertDOMtoCanvas(t.x),this.selectedControlNode.y=this._YconvertDOMtoCanvas(t.y));this._redraw()};t._releaseControlNode=function(n){var t=this._getNodeAt(n);t!=null?(this.edgeBeingEdited.controlNodes.from.selected==!0&&(this._editEdge(t.id,this.edgeBeingEdited.to.id),this.edgeBeingEdited.controlNodes.from.unselect()),this.edgeBeingEdited.controlNodes.to.selected==!0&&(this._editEdge(this.edgeBeingEdited.from.id,t.id),this.edgeBeingEdited.controlNodes.to.unselect())):this.edgeBeingEdited._restoreControlNodes();this.freezeSimulation=!1;this._redraw()};t._handleConnect=function(n){if(this._getSelectedNodeCount()==0){var t=this._getNodeAt(n);t!=null&&(t.clusterSize>1?alert("Cannot create edges to a cluster."):(this._selectObject(t,!1),this.sectors.support.nodes.targetNode=new r({id:"targetNode"},{},{},this.constants),this.sectors.support.nodes.targetNode.x=t.x,this.sectors.support.nodes.targetNode.y=t.y,this.sectors.support.nodes.targetViaNode=new r({id:"targetViaNode"},{},{},this.constants),this.sectors.support.nodes.targetViaNode.x=t.x,this.sectors.support.nodes.targetViaNode.y=t.y,this.sectors.support.nodes.targetViaNode.parentEdgeId="connectionEdge",this.edges.connectionEdge=new f({id:"connectionEdge",from:t.id,to:this.sectors.support.nodes.targetNode.id},this,this.constants),this.edges.connectionEdge.from=t,this.edges.connectionEdge.connected=!0,this.edges.connectionEdge.smooth=!0,this.edges.connectionEdge.selected=!0,this.edges.connectionEdge.to=this.sectors.support.nodes.targetNode,this.edges.connectionEdge.via=this.sectors.support.nodes.targetViaNode,this.cachedFunctions._handleOnDrag=this._handleOnDrag,this._handleOnDrag=function(n){var t=this._getPointer(n.gesture.center);this.sectors.support.nodes.targetNode.x=this._XconvertDOMtoCanvas(t.x);this.sectors.support.nodes.targetNode.y=this._YconvertDOMtoCanvas(t.y);this.sectors.support.nodes.targetViaNode.x=.5*(this._XconvertDOMtoCanvas(t.x)+this.edges.connectionEdge.from.x);this.sectors.support.nodes.targetViaNode.y=this._YconvertDOMtoCanvas(t.y)},this.moving=!0,this.start()))}};t._finishConnect=function(n){var i,t;this._getSelectedNodeCount()==1&&(this._handleOnDrag=this.cachedFunctions._handleOnDrag,delete this.cachedFunctions._handleOnDrag,i=this.edges.connectionEdge.fromId,delete this.edges.connectionEdge,delete this.sectors.support.nodes.targetNode,delete this.sectors.support.nodes.targetViaNode,t=this._getNodeAt(n),t!=null&&(t.clusterSize>1?alert("Cannot create edges to a cluster."):(this._createEdge(i,t.id),this._createManipulatorBar())),this._unselectAll())};t._addNode=function(){var t,i,n;this._selectionIsEmpty()&&this.editMode==!0&&(t=this._pointerToPositionObject(this.pointerPosition),i={id:u.randomUUID(),x:t.left,y:t.top,label:"new",allowedToMoveX:!0,allowedToMoveY:!0},this.triggerFunctions.add?this.triggerFunctions.add.length==2?(n=this,this.triggerFunctions.add(i,function(t){n.nodesData.add(t);n._createManipulatorBar();n.moving=!0;n.start()})):(alert(this.constants.labels.addError),this._createManipulatorBar(),this.moving=!0,this.start()):(this.nodesData.add(i),this._createManipulatorBar(),this.moving=!0,this.start()))};t._createEdge=function(n,t){var r,i;this.editMode==!0&&(r={from:n,to:t},this.triggerFunctions.connect?this.triggerFunctions.connect.length==2?(i=this,this.triggerFunctions.connect(r,function(n){i.edgesData.add(n);i.moving=!0;i.start()})):(alert(this.constants.labels.linkError),this.moving=!0,this.start()):(this.edgesData.add(r),this.moving=!0,this.start()))};t._editEdge=function(n,t){var r,i;this.editMode==!0&&(r={id:this.edgeBeingEdited.id,from:n,to:t},this.triggerFunctions.editEdge?this.triggerFunctions.editEdge.length==2?(i=this,this.triggerFunctions.editEdge(r,function(n){i.edgesData.update(n);i.moving=!0;i.start()})):(alert(this.constants.labels.linkError),this.moving=!0,this.start()):(this.edgesData.update(r),this.moving=!0,this.start()))};t._editNode=function(){var n,i,t;this.triggerFunctions.edit&&this.editMode==!0?(n=this._getSelectedNode(),i={id:n.id,label:n.label,group:n.options.group,shape:n.options.shape,color:{background:n.options.color.background,border:n.options.color.border,highlight:{background:n.options.color.highlight.background,border:n.options.color.highlight.border}}},this.triggerFunctions.edit.length==2?(t=this,this.triggerFunctions.edit(i,function(n){t.nodesData.update(n);t._createManipulatorBar();t.moving=!0;t.start()})):alert(this.constants.labels.editError)):alert(this.constants.labels.editBoundError)};t._deleteSelected=function(){var t,i,n,r;this._selectionIsEmpty()||this.editMode!=!0||(this._clusterInSelection()?alert(this.constants.labels.deleteClusterError):(t=this.getSelectedNodes(),i=this.getSelectedEdges(),this.triggerFunctions.del?(n=this,r={nodes:t,edges:i},(this.triggerFunctions.del.length=2)?this.triggerFunctions.del(r,function(t){n.edgesData.remove(t.edges);n.nodesData.remove(t.nodes);n._unselectAll();n.moving=!0;n.start()}):alert(this.constants.labels.deleteError)):(this.edgesData.remove(i),this.nodesData.remove(t),this._unselectAll(),this.moving=!0,this.start())))}},function(n,t,i){var u=i(1),r=i(41);t._cleanNavigation=function(){var n=document.getElementById("network-navigation_wrapper");n!=null&&this.containerElement.removeChild(n);document.onmouseup=null};t._loadNavigationElements=function(){var t,f,i,n,u;for(this._cleanNavigation(),this.navigationDivs={},t=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],f=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","zoomExtent"],this.navigationDivs.wrapper=document.createElement("div"),this.navigationDivs.wrapper.id="network-navigation_wrapper",this.navigationDivs.wrapper.style.position="absolute",this.navigationDivs.wrapper.style.width=this.frame.canvas.clientWidth+"px",this.navigationDivs.wrapper.style.height=this.frame.canvas.clientHeight+"px",this.containerElement.insertBefore(this.navigationDivs.wrapper,this.frame),i=this,n=0;n<t.length;n++){this.navigationDivs[t[n]]=document.createElement("div");this.navigationDivs[t[n]].id="network-navigation_"+t[n];this.navigationDivs[t[n]].className="network-navigation "+t[n];this.navigationDivs.wrapper.appendChild(this.navigationDivs[t[n]]);u=r(this.navigationDivs[t[n]],{prevent_default:!0});u.on("touch",i[f[n]].bind(i))}u=r(document,{prevent_default:!1});u.on("release",i._stopMovement.bind(i))};t._stopMovement=function(){this._xStopMoving();this._yStopMoving();this._stopZoom()};t._moveUp=function(){this.yIncrement=this.constants.keyboard.speed.y;this.start()};t._moveDown=function(){this.yIncrement=-this.constants.keyboard.speed.y;this.start()};t._moveLeft=function(){this.xIncrement=this.constants.keyboard.speed.x;this.start()};t._moveRight=function(){this.xIncrement=-this.constants.keyboard.speed.y;this.start()};t._zoomIn=function(){this.zoomIncrement=this.constants.keyboard.speed.zoom;this.start()};t._zoomOut=function(){this.zoomIncrement=-this.constants.keyboard.speed.zoom;this.start();u.preventDefault(event)};t._stopZoom=function(){this.zoomIncrement=0};t._yStopMoving=function(){this.yIncrement=0};t._xStopMoving=function(){this.xIncrement=0}},function(n,t){t._resetLevels=function(){var n,t;for(n in this.nodes)this.nodes.hasOwnProperty(n)&&(t=this.nodes[n],t.preassignedLevel==!1&&(t.level=-1))};t._setupHierarchicalLayout=function(){var f;if(this.constants.hierarchicalLayout.enabled==!0&&this.nodeIndices.length>0){this.constants.hierarchicalLayout.direction=="RL"||this.constants.hierarchicalLayout.direction=="DU"?this.constants.hierarchicalLayout.levelSeparation*=-1:this.constants.hierarchicalLayout.levelSeparation=Math.abs(this.constants.hierarchicalLayout.levelSeparation);this.constants.hierarchicalLayout.direction=="RL"||this.constants.hierarchicalLayout.direction=="LR"?this.constants.smoothCurves.enabled==!0&&(this.constants.smoothCurves.type="vertical"):this.constants.smoothCurves.enabled==!0&&(this.constants.smoothCurves.type="horizontal");var t=0,n,i,u=!1,r=!1;for(i in this.nodes)this.nodes.hasOwnProperty(i)&&(n=this.nodes[i],n.level!=-1?u=!0:r=!0,t<n.edges.length&&(t=n.edges.length));r==!0&&u==!0?(alert("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes."),this.zoomExtent(!0,this.constants.clustering.enabled),this.constants.clustering.enabled||this.start()):(this._changeConstants(),r==!0&&this._determineLevels(t),f=this._getDistribution(),this._placeNodesByHierarchy(f),this.start())}};t._placeNodesByHierarchy=function(n){var r,t;for(var i in n)if(n.hasOwnProperty(i))for(r in n[i].nodes)n[i].nodes.hasOwnProperty(r)&&(t=n[i].nodes[r],this.constants.hierarchicalLayout.direction=="UD"||this.constants.hierarchicalLayout.direction=="DU"?t.xFixed&&(t.x=n[i].minPos,t.xFixed=!1,n[i].minPos+=n[i].nodeSpacing):t.yFixed&&(t.y=n[i].minPos,t.yFixed=!1,n[i].minPos+=n[i].nodeSpacing),this._placeBranchNodes(t.edges,t.id,n,t.level));this._stabilize()};t._getDistribution=function(){var n={},r,i,t,u;for(r in this.nodes)this.nodes.hasOwnProperty(r)&&(i=this.nodes[r],i.xFixed=!0,i.yFixed=!0,this.constants.hierarchicalLayout.direction=="UD"||this.constants.hierarchicalLayout.direction=="DU"?i.y=this.constants.hierarchicalLayout.levelSeparation*i.level:i.x=this.constants.hierarchicalLayout.levelSeparation*i.level,n[i.level]===undefined&&(n[i.level]={amount:0,nodes:{},minPos:0,nodeSpacing:0}),n[i.level].amount+=1,n[i.level].nodes[r]=i);u=0;for(t in n)n.hasOwnProperty(t)&&u<n[t].amount&&(u=n[t].amount);for(t in n)n.hasOwnProperty(t)&&(n[t].nodeSpacing=(u+1)*this.constants.hierarchicalLayout.nodeSpacing,n[t].nodeSpacing/=n[t].amount+1,n[t].minPos=n[t].nodeSpacing-.5*(n[t].amount+1)*n[t].nodeSpacing);return n};t._determineLevels=function(n){var i,t;for(i in this.nodes)this.nodes.hasOwnProperty(i)&&(t=this.nodes[i],t.edges.length==n&&(t.level=0));for(i in this.nodes)this.nodes.hasOwnProperty(i)&&(t=this.nodes[i],t.level==0&&this._setLevel(1,t.edges,t.id))};t._changeConstants=function(){this.constants.clustering.enabled=!1;this.constants.physics.barnesHut.enabled=!1;this.constants.physics.hierarchicalRepulsion.enabled=!0;this._loadSelectedForceSolver();this.constants.smoothCurves.enabled==!0&&(this.constants.smoothCurves.dynamic=!1);this._configureSmoothCurves()};t._placeBranchNodes=function(n,t,i,r){for(var u,e,f=0;f<n.length;f++)u=null,u=n[f].toId==t?n[f].from:n[f].to,e=!1,this.constants.hierarchicalLayout.direction=="UD"||this.constants.hierarchicalLayout.direction=="DU"?u.xFixed&&u.level>r&&(u.xFixed=!1,u.x=i[u.level].minPos,e=!0):u.yFixed&&u.level>r&&(u.yFixed=!1,u.y=i[u.level].minPos,e=!0),e==!0&&(i[u.level].minPos+=i[u.level].nodeSpacing,u.edges.length>1&&this._placeBranchNodes(u.edges,u.id,i,u.level))};t._setLevel=function(n,t,i){for(var r,u=0;u<t.length;u++)r=null,r=t[u].toId==i?t[u].from:t[u].to,(r.level==-1||r.level>n)&&(r.level=n,t.length>1&&this._setLevel(n+1,r.edges,r.id))};t._restoreNodes=function(){for(var n in this.nodes)this.nodes.hasOwnProperty(n)&&(this.nodes[n].xFixed=!1,this.nodes[n].yFixed=!1)}},function(n,t,i){function h(){this.constants.smoothCurves.enabled=!this.constants.smoothCurves.enabled;var n=document.getElementById("graph_toggleSmooth");n.style.background=this.constants.smoothCurves.enabled==!0?"#A4FF56":"#FF8532";this._configureSmoothCurves(!1)}function c(){for(var n in this.calculationNodes)this.calculationNodes.hasOwnProperty(n)&&(this.calculationNodes[n].vx=0,this.calculationNodes[n].vy=0,this.calculationNodes[n].fx=0,this.calculationNodes[n].fy=0);this.constants.hierarchicalLayout.enabled==!0?(this._setupHierarchicalLayout(),r.call(this,"graph_H_nd",1,"physics_hierarchicalRepulsion_nodeDistance"),r.call(this,"graph_H_cg",1,"physics_centralGravity"),r.call(this,"graph_H_sc",1,"physics_springConstant"),r.call(this,"graph_H_sl",1,"physics_springLength"),r.call(this,"graph_H_damp",1,"physics_damping")):this.repositionNodes();this.moving=!0;this.start()}function l(){var t="No options are required, default values used.",n=[],r=document.getElementById("graph_physicsMethod1"),u=document.getElementById("graph_physicsMethod2"),i;if(r.checked==!0){if(this.constants.physics.barnesHut.gravitationalConstant!=this.backupConstants.physics.barnesHut.gravitationalConstant&&n.push("gravitationalConstant: "+this.constants.physics.barnesHut.gravitationalConstant),this.constants.physics.centralGravity!=this.backupConstants.physics.barnesHut.centralGravity&&n.push("centralGravity: "+this.constants.physics.centralGravity),this.constants.physics.springLength!=this.backupConstants.physics.barnesHut.springLength&&n.push("springLength: "+this.constants.physics.springLength),this.constants.physics.springConstant!=this.backupConstants.physics.barnesHut.springConstant&&n.push("springConstant: "+this.constants.physics.springConstant),this.constants.physics.damping!=this.backupConstants.physics.barnesHut.damping&&n.push("damping: "+this.constants.physics.damping),n.length!=0){for(t="var options = {",t+="physics: {barnesHut: {",i=0;i<n.length;i++)t+=n[i],i<n.length-1&&(t+=", ");t+="}}"}this.constants.smoothCurves.enabled!=this.backupConstants.smoothCurves.enabled&&(n.length==0?t="var options = {":t+=", ",t+="smoothCurves: "+this.constants.smoothCurves.enabled);t!="No options are required, default values used."&&(t+="};")}else if(u.checked==!0){if(t="var options = {",t+="physics: {barnesHut: {enabled: false}",this.constants.physics.repulsion.nodeDistance!=this.backupConstants.physics.repulsion.nodeDistance&&n.push("nodeDistance: "+this.constants.physics.repulsion.nodeDistance),this.constants.physics.centralGravity!=this.backupConstants.physics.repulsion.centralGravity&&n.push("centralGravity: "+this.constants.physics.centralGravity),this.constants.physics.springLength!=this.backupConstants.physics.repulsion.springLength&&n.push("springLength: "+this.constants.physics.springLength),this.constants.physics.springConstant!=this.backupConstants.physics.repulsion.springConstant&&n.push("springConstant: "+this.constants.physics.springConstant),this.constants.physics.damping!=this.backupConstants.physics.repulsion.damping&&n.push("damping: "+this.constants.physics.damping),n.length!=0){for(t+=", repulsion: {",i=0;i<n.length;i++)t+=n[i],i<n.length-1&&(t+=", ");t+="}}"}n.length==0&&(t+="}");this.constants.smoothCurves!=this.backupConstants.smoothCurves&&(t+=", smoothCurves: "+this.constants.smoothCurves);t+="};"}else{if(t="var options = {",this.constants.physics.hierarchicalRepulsion.nodeDistance!=this.backupConstants.physics.hierarchicalRepulsion.nodeDistance&&n.push("nodeDistance: "+this.constants.physics.hierarchicalRepulsion.nodeDistance),this.constants.physics.centralGravity!=this.backupConstants.physics.hierarchicalRepulsion.centralGravity&&n.push("centralGravity: "+this.constants.physics.centralGravity),this.constants.physics.springLength!=this.backupConstants.physics.hierarchicalRepulsion.springLength&&n.push("springLength: "+this.constants.physics.springLength),this.constants.physics.springConstant!=this.backupConstants.physics.hierarchicalRepulsion.springConstant&&n.push("springConstant: "+this.constants.physics.springConstant),this.constants.physics.damping!=this.backupConstants.physics.hierarchicalRepulsion.damping&&n.push("damping: "+this.constants.physics.damping),n.length!=0){for(t+="physics: {hierarchicalRepulsion: {",i=0;i<n.length;i++)t+=n[i],i<n.length-1&&(t+=", ");t+="}},"}if(t+="hierarchicalLayout: {",n=[],this.constants.hierarchicalLayout.direction!=this.backupConstants.hierarchicalLayout.direction&&n.push("direction: "+this.constants.hierarchicalLayout.direction),Math.abs(this.constants.hierarchicalLayout.levelSeparation)!=this.backupConstants.hierarchicalLayout.levelSeparation&&n.push("levelSeparation: "+this.constants.hierarchicalLayout.levelSeparation),this.constants.hierarchicalLayout.nodeSpacing!=this.backupConstants.hierarchicalLayout.nodeSpacing&&n.push("nodeSpacing: "+this.constants.hierarchicalLayout.nodeSpacing),n.length!=0){for(i=0;i<n.length;i++)t+=n[i],i<n.length-1&&(t+=", ");t+="}"}else t+="enabled:true}";t+="};"}this.optionsDiv.innerHTML=t}function u(){var t=["graph_BH_table","graph_R_table","graph_H_table"],i=document.querySelector('input[name="graph_physicsMethod"]:checked').value,u="graph_"+i+"_table",r=document.getElementById(u),n,f;for(r.style.display="block",n=0;n<t.length;n++)t[n]!=u&&(r=document.getElementById(t[n]),r.style.display="none");this._restoreNodes();i=="R"?(this.constants.hierarchicalLayout.enabled=!1,this.constants.physics.hierarchicalRepulsion.enabled=!1,this.constants.physics.barnesHut.enabled=!1):i=="H"?this.constants.hierarchicalLayout.enabled==!1&&(this.constants.hierarchicalLayout.enabled=!0,this.constants.physics.hierarchicalRepulsion.enabled=!0,this.constants.physics.barnesHut.enabled=!1,this.constants.smoothCurves.enabled=!1,this._setupHierarchicalLayout()):(this.constants.hierarchicalLayout.enabled=!1,this.constants.physics.hierarchicalRepulsion.enabled=!1,this.constants.physics.barnesHut.enabled=!0);this._loadSelectedForceSolver();f=document.getElementById("graph_toggleSmooth");f.style.background=this.constants.smoothCurves.enabled==!0?"#A4FF56":"#FF8532";this.moving=!0;this.start()}function r(n,t,i){var u=n+"_value",r=document.getElementById(n).value;t instanceof Array?(document.getElementById(u).value=t[parseInt(r)],this._overWriteGraphConstants(i,t[parseInt(r)])):(document.getElementById(u).value=parseInt(t)*parseFloat(r),this._overWriteGraphConstants(i,parseInt(t)*parseFloat(r)));(i=="hierarchicalLayout_direction"||i=="hierarchicalLayout_levelSeparation"||i=="hierarchicalLayout_nodeSpacing")&&this._setupHierarchicalLayout();this.moving=!0;this.start()}var s=i(1),f=i(59),e=i(60),o=i(61);t._toggleBarnesHut=function(){this.constants.physics.barnesHut.enabled=!this.constants.physics.barnesHut.enabled;this._loadSelectedForceSolver();this.moving=!0;this.start()};t._loadSelectedForceSolver=function(){this.constants.physics.barnesHut.enabled==!0?(this._clearMixin(f),this._clearMixin(e),this.constants.physics.centralGravity=this.constants.physics.barnesHut.centralGravity,this.constants.physics.springLength=this.constants.physics.barnesHut.springLength,this.constants.physics.springConstant=this.constants.physics.barnesHut.springConstant,this.constants.physics.damping=this.constants.physics.barnesHut.damping,this._loadMixin(o)):this.constants.physics.hierarchicalRepulsion.enabled==!0?(this._clearMixin(o),this._clearMixin(f),this.constants.physics.centralGravity=this.constants.physics.hierarchicalRepulsion.centralGravity,this.constants.physics.springLength=this.constants.physics.hierarchicalRepulsion.springLength,this.constants.physics.springConstant=this.constants.physics.hierarchicalRepulsion.springConstant,this.constants.physics.damping=this.constants.physics.hierarchicalRepulsion.damping,this._loadMixin(e)):(this._clearMixin(o),this._clearMixin(e),this.barnesHutTree=undefined,this.constants.physics.centralGravity=this.constants.physics.repulsion.centralGravity,this.constants.physics.springLength=this.constants.physics.repulsion.springLength,this.constants.physics.springConstant=this.constants.physics.repulsion.springConstant,this.constants.physics.damping=this.constants.physics.repulsion.damping,this._loadMixin(f))};t._initializeForceCalculation=function(){this.nodeIndices.length==1?this.nodes[this.nodeIndices[0]]._setForce(0,0):(this.nodeIndices.length>this.constants.clustering.clusterThreshold&&this.constants.clustering.enabled==!0&&this.clusterToFit(this.constants.clustering.reduceToNodes,!1),this._calculateForces())};t._calculateForces=function(){this._calculateGravitationalForces();this._calculateNodeForces();this.constants.physics.springConstant>0&&(this.constants.smoothCurves.enabled==!0&&this.constants.smoothCurves.dynamic==!0?this._calculateSpringForcesWithSupport():this.constants.physics.hierarchicalRepulsion.enabled==!0?this._calculateHierarchicalSpringForces():this._calculateSpringForces())};t._updateCalculationNodes=function(){var i,n,t,r;if(this.constants.smoothCurves.enabled==!0&&this.constants.smoothCurves.dynamic==!0){this.calculationNodes={};this.calculationNodeIndices=[];for(i in this.nodes)this.nodes.hasOwnProperty(i)&&(this.calculationNodes[i]=this.nodes[i]);n=this.sectors.support.nodes;for(t in n)n.hasOwnProperty(t)&&(this.edges.hasOwnProperty(n[t].parentEdgeId)?this.calculationNodes[t]=n[t]:n[t]._setForce(0,0));for(r in this.calculationNodes)this.calculationNodes.hasOwnProperty(r)&&this.calculationNodeIndices.push(r)}else this.calculationNodes=this.nodes,this.calculationNodeIndices=this.nodeIndices};t._calculateGravitationalForces=function(){for(var t,i,u,n,o=this.calculationNodes,e=this.constants.physics.centralGravity,f=0,r=0;r<this.calculationNodeIndices.length;r++)n=o[this.calculationNodeIndices[r]],n.damping=this.constants.physics.damping,this._sector()=="default"&&e!=0?(t=-n.x,i=-n.y,u=Math.sqrt(t*t+i*i),f=u==0?0:e/u,n.fx=t*f,n.fy=i*f):(n.fx=0,n.fy=0)};t._calculateSpringForces=function(){var u,n,f,i,r,e,o,s,t,h=this.edges;for(f in h)h.hasOwnProperty(f)&&(n=h[f],n.connected&&this.nodes.hasOwnProperty(n.toId)&&this.nodes.hasOwnProperty(n.fromId)&&(u=n.physics.springLength,u+=(n.to.clusterSize+n.from.clusterSize-2)*this.constants.clustering.edgeGrowth,i=n.from.x-n.to.x,r=n.from.y-n.to.y,t=Math.sqrt(i*i+r*r),t==0&&(t=.01),s=this.constants.physics.springConstant*(u-t)/t,e=i*s,o=r*s,n.from.fx+=e,n.from.fy+=o,n.to.fx-=e,n.to.fy-=o))};t._calculateSpringForcesWithSupport=function(){var t,n,i,u,r=this.edges;for(i in r)if(r.hasOwnProperty(i)&&(n=r[i],n.connected&&this.nodes.hasOwnProperty(n.toId)&&this.nodes.hasOwnProperty(n.fromId)&&n.via!=null)){var f=n.to,e=n.via,o=n.from;t=n.physics.springLength;u=f.clusterSize+o.clusterSize-2;t+=u*this.constants.clustering.edgeGrowth;this._calculateSpringForce(f,e,.5*t);this._calculateSpringForce(e,o,.5*t)}};t._calculateSpringForce=function(n,t,i){var u,f,e,o,s,r;u=n.x-t.x;f=n.y-t.y;r=Math.sqrt(u*u+f*f);r==0&&(r=.01);s=this.constants.physics.springConstant*(i-r)/r;e=u*s;o=f*s;n.fx+=e;n.fy+=o;t.fx-=e;t.fy-=o};t._loadPhysicsConfiguration=function(){var t,n;if(this.physicsConfiguration===undefined){this.backupConstants={};s.deepExtend(this.backupConstants,this.constants);t=["LR","RL","UD","DU"];this.physicsConfiguration=document.createElement("div");this.physicsConfiguration.className="PhysicsConfiguration";this.physicsConfiguration.innerHTML='<table><tr><td><b>Simulation Mode:<\/b><\/td><\/tr><tr><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod1" value="BH" checked="checked">Barnes Hut<\/td><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod2" value="R">Repulsion<\/td><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod3" value="H">Hierarchical<\/td><\/tr><\/table><table id="graph_BH_table" style="display:none"><tr><td><b>Barnes Hut<\/b><\/td><\/tr><tr><td width="150px">gravitationalConstant<\/td><td>0<\/td><td><input type="range" min="0" max="20000" value="'+-1*this.constants.physics.barnesHut.gravitationalConstant+'" step="25" style="width:300px" id="graph_BH_gc"><\/td><td  width="50px">-20000<\/td><td><input value="'+-1*this.constants.physics.barnesHut.gravitationalConstant+'" id="graph_BH_gc_value" style="width:60px"><\/td><\/tr><tr><td width="150px">centralGravity<\/td><td>0<\/td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.barnesHut.centralGravity+'" step="0.05"  style="width:300px" id="graph_BH_cg"><\/td><td>3<\/td><td><input value="'+this.constants.physics.barnesHut.centralGravity+'" id="graph_BH_cg_value" style="width:60px"><\/td><\/tr><tr><td width="150px">springLength<\/td><td>0<\/td><td><input type="range" min="0" max="500" value="'+this.constants.physics.barnesHut.springLength+'" step="1" style="width:300px" id="graph_BH_sl"><\/td><td>500<\/td><td><input value="'+this.constants.physics.barnesHut.springLength+'" id="graph_BH_sl_value" style="width:60px"><\/td><\/tr><tr><td width="150px">springConstant<\/td><td>0<\/td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.barnesHut.springConstant+'" step="0.001" style="width:300px" id="graph_BH_sc"><\/td><td>0.5<\/td><td><input value="'+this.constants.physics.barnesHut.springConstant+'" id="graph_BH_sc_value" style="width:60px"><\/td><\/tr><tr><td width="150px">damping<\/td><td>0<\/td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.barnesHut.damping+'" step="0.005" style="width:300px" id="graph_BH_damp"><\/td><td>0.3<\/td><td><input value="'+this.constants.physics.barnesHut.damping+'" id="graph_BH_damp_value" style="width:60px"><\/td><\/tr><\/table><table id="graph_R_table" style="display:none"><tr><td><b>Repulsion<\/b><\/td><\/tr><tr><td width="150px">nodeDistance<\/td><td>0<\/td><td><input type="range" min="0" max="300" value="'+this.constants.physics.repulsion.nodeDistance+'" step="1" style="width:300px" id="graph_R_nd"><\/td><td width="50px">300<\/td><td><input value="'+this.constants.physics.repulsion.nodeDistance+'" id="graph_R_nd_value" style="width:60px"><\/td><\/tr><tr><td width="150px">centralGravity<\/td><td>0<\/td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.repulsion.centralGravity+'" step="0.05"  style="width:300px" id="graph_R_cg"><\/td><td>3<\/td><td><input value="'+this.constants.physics.repulsion.centralGravity+'" id="graph_R_cg_value" style="width:60px"><\/td><\/tr><tr><td width="150px">springLength<\/td><td>0<\/td><td><input type="range" min="0" max="500" value="'+this.constants.physics.repulsion.springLength+'" step="1" style="width:300px" id="graph_R_sl"><\/td><td>500<\/td><td><input value="'+this.constants.physics.repulsion.springLength+'" id="graph_R_sl_value" style="width:60px"><\/td><\/tr><tr><td width="150px">springConstant<\/td><td>0<\/td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.repulsion.springConstant+'" step="0.001" style="width:300px" id="graph_R_sc"><\/td><td>0.5<\/td><td><input value="'+this.constants.physics.repulsion.springConstant+'" id="graph_R_sc_value" style="width:60px"><\/td><\/tr><tr><td width="150px">damping<\/td><td>0<\/td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.repulsion.damping+'" step="0.005" style="width:300px" id="graph_R_damp"><\/td><td>0.3<\/td><td><input value="'+this.constants.physics.repulsion.damping+'" id="graph_R_damp_value" style="width:60px"><\/td><\/tr><\/table><table id="graph_H_table" style="display:none"><tr><td width="150"><b>Hierarchical<\/b><\/td><\/tr><tr><td width="150px">nodeDistance<\/td><td>0<\/td><td><input type="range" min="0" max="300" value="'+this.constants.physics.hierarchicalRepulsion.nodeDistance+'" step="1" style="width:300px" id="graph_H_nd"><\/td><td width="50px">300<\/td><td><input value="'+this.constants.physics.hierarchicalRepulsion.nodeDistance+'" id="graph_H_nd_value" style="width:60px"><\/td><\/tr><tr><td width="150px">centralGravity<\/td><td>0<\/td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.hierarchicalRepulsion.centralGravity+'" step="0.05"  style="width:300px" id="graph_H_cg"><\/td><td>3<\/td><td><input value="'+this.constants.physics.hierarchicalRepulsion.centralGravity+'" id="graph_H_cg_value" style="width:60px"><\/td><\/tr><tr><td width="150px">springLength<\/td><td>0<\/td><td><input type="range" min="0" max="500" value="'+this.constants.physics.hierarchicalRepulsion.springLength+'" step="1" style="width:300px" id="graph_H_sl"><\/td><td>500<\/td><td><input value="'+this.constants.physics.hierarchicalRepulsion.springLength+'" id="graph_H_sl_value" style="width:60px"><\/td><\/tr><tr><td width="150px">springConstant<\/td><td>0<\/td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.hierarchicalRepulsion.springConstant+'" step="0.001" style="width:300px" id="graph_H_sc"><\/td><td>0.5<\/td><td><input value="'+this.constants.physics.hierarchicalRepulsion.springConstant+'" id="graph_H_sc_value" style="width:60px"><\/td><\/tr><tr><td width="150px">damping<\/td><td>0<\/td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.hierarchicalRepulsion.damping+'" step="0.005" style="width:300px" id="graph_H_damp"><\/td><td>0.3<\/td><td><input value="'+this.constants.physics.hierarchicalRepulsion.damping+'" id="graph_H_damp_value" style="width:60px"><\/td><\/tr><tr><td width="150px">direction<\/td><td>1<\/td><td><input type="range" min="0" max="3" value="'+t.indexOf(this.constants.hierarchicalLayout.direction)+'" step="1" style="width:300px" id="graph_H_direction"><\/td><td>4<\/td><td><input value="'+this.constants.hierarchicalLayout.direction+'" id="graph_H_direction_value" style="width:60px"><\/td><\/tr><tr><td width="150px">levelSeparation<\/td><td>1<\/td><td><input type="range" min="0" max="500" value="'+this.constants.hierarchicalLayout.levelSeparation+'" step="1" style="width:300px" id="graph_H_levsep"><\/td><td>500<\/td><td><input value="'+this.constants.hierarchicalLayout.levelSeparation+'" id="graph_H_levsep_value" style="width:60px"><\/td><\/tr><tr><td width="150px">nodeSpacing<\/td><td>1<\/td><td><input type="range" min="0" max="500" value="'+this.constants.hierarchicalLayout.nodeSpacing+'" step="1" style="width:300px" id="graph_H_nspac"><\/td><td>500<\/td><td><input value="'+this.constants.hierarchicalLayout.nodeSpacing+'" id="graph_H_nspac_value" style="width:60px"><\/td><\/tr><\/table><table><tr><td><b>Options:<\/b><\/td><\/tr><tr><td width="180px"><input type="button" id="graph_toggleSmooth" value="Toggle smoothCurves" style="width:150px"><\/td><td width="180px"><input type="button" id="graph_repositionNodes" value="Reinitialize" style="width:150px"><\/td><td width="180px"><input type="button" id="graph_generateOptions" value="Generate Options" style="width:150px"><\/td><\/tr><\/table>';this.containerElement.parentElement.insertBefore(this.physicsConfiguration,this.containerElement);this.optionsDiv=document.createElement("div");this.optionsDiv.style.fontSize="14px";this.optionsDiv.style.fontFamily="verdana";this.containerElement.parentElement.insertBefore(this.optionsDiv,this.containerElement);n=document.getElementById("graph_BH_gc");n.onchange=r.bind(this,"graph_BH_gc",-1,"physics_barnesHut_gravitationalConstant");n=document.getElementById("graph_BH_cg");n.onchange=r.bind(this,"graph_BH_cg",1,"physics_centralGravity");n=document.getElementById("graph_BH_sc");n.onchange=r.bind(this,"graph_BH_sc",1,"physics_springConstant");n=document.getElementById("graph_BH_sl");n.onchange=r.bind(this,"graph_BH_sl",1,"physics_springLength");n=document.getElementById("graph_BH_damp");n.onchange=r.bind(this,"graph_BH_damp",1,"physics_damping");n=document.getElementById("graph_R_nd");n.onchange=r.bind(this,"graph_R_nd",1,"physics_repulsion_nodeDistance");n=document.getElementById("graph_R_cg");n.onchange=r.bind(this,"graph_R_cg",1,"physics_centralGravity");n=document.getElementById("graph_R_sc");n.onchange=r.bind(this,"graph_R_sc",1,"physics_springConstant");n=document.getElementById("graph_R_sl");n.onchange=r.bind(this,"graph_R_sl",1,"physics_springLength");n=document.getElementById("graph_R_damp");n.onchange=r.bind(this,"graph_R_damp",1,"physics_damping");n=document.getElementById("graph_H_nd");n.onchange=r.bind(this,"graph_H_nd",1,"physics_hierarchicalRepulsion_nodeDistance");n=document.getElementById("graph_H_cg");n.onchange=r.bind(this,"graph_H_cg",1,"physics_centralGravity");n=document.getElementById("graph_H_sc");n.onchange=r.bind(this,"graph_H_sc",1,"physics_springConstant");n=document.getElementById("graph_H_sl");n.onchange=r.bind(this,"graph_H_sl",1,"physics_springLength");n=document.getElementById("graph_H_damp");n.onchange=r.bind(this,"graph_H_damp",1,"physics_damping");n=document.getElementById("graph_H_direction");n.onchange=r.bind(this,"graph_H_direction",t,"hierarchicalLayout_direction");n=document.getElementById("graph_H_levsep");n.onchange=r.bind(this,"graph_H_levsep",1,"hierarchicalLayout_levelSeparation");n=document.getElementById("graph_H_nspac");n.onchange=r.bind(this,"graph_H_nspac",1,"hierarchicalLayout_nodeSpacing");var i=document.getElementById("graph_physicsMethod1"),f=document.getElementById("graph_physicsMethod2"),e=document.getElementById("graph_physicsMethod3");f.checked=!0;this.constants.physics.barnesHut.enabled&&(i.checked=!0);this.constants.hierarchicalLayout.enabled&&(e.checked=!0);var o=document.getElementById("graph_toggleSmooth"),a=document.getElementById("graph_repositionNodes"),v=document.getElementById("graph_generateOptions");o.onclick=h.bind(this);a.onclick=c.bind(this);v.onclick=l.bind(this);o.style.background=this.constants.smoothCurves==!0&&this.constants.dynamicSmoothCurves==!1?"#A4FF56":"#FF8532";u.apply(this);i.onchange=u.bind(this);f.onchange=u.bind(this);e.onchange=u.bind(this)}};t._overWriteGraphConstants=function(n,t){var i=n.split("_");i.length==1?this.constants[i[0]]=t:i.length==2?this.constants[i[0]][i[1]]=t:i.length==3&&(this.constants[i[0]][i[1]][i[2]]=t)}},function(n){function t(n){throw new Error("Cannot find module '"+n+"'.");}t.resolve=t;t.keys=function(){return[]};n.exports=t},function(n){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children=[],n.webpackPolyfill=1),n}},function(n,t){t._calculateNodeForces=function(){for(var e,o,r,l,a,u,n,t,i,s,y=this.calculationNodes,h=this.calculationNodeIndices,v=this.constants.physics.repulsion.nodeDistance,c=v,p,f=0;f<h.length-1;f++)for(t=y[h[f]],s=f+1;s<h.length;s++)i=y[h[s]],u=t.clusterSize+i.clusterSize-2,e=i.x-t.x,o=i.y-t.y,r=Math.sqrt(e*e+o*o),c=u==0?v:v*(1+u*this.constants.clustering.distanceAmplification),p=-2/3/c,r<2*c&&(n=r<.5*c?1:p*r+4/3,n*=u==0?1:1+u*this.constants.clustering.forceAmplification,n=n/r,l=e*n,a=o*n,t.fx-=l,t.fy-=a,i.fx+=l,i.fy+=a)}},function(n,t){t._calculateNodeForces=function(){for(var f,e,n,h,c,r,t,i,o,a=this.calculationNodes,s=this.calculationNodeIndices,v=this.constants.physics.hierarchicalRepulsion.nodeDistance,l,u=0;u<s.length-1;u++)for(t=a[s[u]],o=u+1;o<s.length;o++)i=a[s[o]],t.level==i.level&&(f=i.x-t.x,e=i.y-t.y,n=Math.sqrt(f*f+e*e),l=.05,r=n<v?-Math.pow(l*n,2)+Math.pow(l*v,2):0,n==0?n=.01:r=r/n,h=f*r,c=e*r,t.fx-=h,t.fy-=c,i.fx+=h,i.fy+=c)};t._calculateHierarchicalSpringForces=function(){for(var p,s,u,k,d,w,b,g,nt,i,a,n,v,h,c,f,e,o,y=this.edges,l=this.calculationNodes,r=this.calculationNodeIndices,t=0;t<r.length;t++)p=l[r[t]],p.springFx=0,p.springFy=0;for(v in y)y.hasOwnProperty(v)&&(n=y[v],n.connected&&this.nodes.hasOwnProperty(n.toId)&&this.nodes.hasOwnProperty(n.fromId)&&(a=n.physics.springLength,a+=(n.to.clusterSize+n.from.clusterSize-2)*this.constants.clustering.edgeGrowth,h=n.from.x-n.to.x,c=n.from.y-n.to.y,o=Math.sqrt(h*h+c*c),o==0&&(o=.01),u=this.constants.physics.springConstant*(a-o)/o,f=h*u,e=c*u,n.to.level!=n.from.level?(n.to.springFx-=f,n.to.springFy-=e,n.from.springFx+=f,n.from.springFy+=e):(s=.5,n.to.fx-=s*f,n.to.fy-=s*e,n.from.fx+=s*f,n.from.fy+=s*e)));for(u=1,t=0;t<r.length;t++)i=l[r[t]],k=Math.min(u,Math.max(-u,i.springFx)),d=Math.min(u,Math.max(-u,i.springFy)),i.fx+=k,i.fy+=d;for(w=0,b=0,t=0;t<r.length;t++)i=l[r[t]],w+=i.fx,b+=i.fy;for(g=w/r.length,nt=b/r.length,t=0;t<r.length;t++)i=l[r[t]],i.fx-=g,i.fy-=nt}},function(n,t){t._calculateNodeForces=function(){var t,i;if(this.constants.physics.barnesHut.gravitationalConstant!=0){var n,u=this.calculationNodes,r=this.calculationNodeIndices,f=r.length;for(this._formBarnesHutTree(u,r),t=this.barnesHutTree,i=0;i<f;i++)n=u[r[i]],n.options.mass>0&&(this._getForceContribution(t.root.children.NW,n),this._getForceContribution(t.root.children.NE,n),this._getForceContribution(t.root.children.SW,n),this._getForceContribution(t.root.children.SE,n))}};t._getForceContribution=function(n,t){var r,u,i;if(n.childrenCount>0)if(r=n.centerOfMass.x-t.x,u=n.centerOfMass.y-t.y,i=Math.sqrt(r*r+u*u),i*n.calcSize>this.constants.physics.barnesHut.theta){i==0&&(i=.1*Math.random(),r=i);var f=this.constants.physics.barnesHut.gravitationalConstant*n.mass*t.options.mass/(i*i*i),e=r*f,o=u*f;t.fx+=e;t.fy+=o}else if(n.childrenCount==4)this._getForceContribution(n.children.NW,t),this._getForceContribution(n.children.NE,t),this._getForceContribution(n.children.SW,t),this._getForceContribution(n.children.SE,t);else if(n.children.data.id!=t.id){i==0&&(i=.5*Math.random(),r=i);var f=this.constants.physics.barnesHut.gravitationalConstant*n.mass*t.options.mass/(i*i*i),e=r*f,o=u*f;t.fx+=e;t.fy+=o}};t._formBarnesHutTree=function(n,t){for(var s,h,f,l,y=t.length,r=Number.MAX_VALUE,e=Number.MAX_VALUE,u=-Number.MAX_VALUE,o=-Number.MAX_VALUE,i=0;i<y;i++)s=n[t[i]].x,h=n[t[i]].y,n[t[i]].options.mass>0&&(s<r&&(r=s),s>u&&(u=s),h<e&&(e=h),h>o&&(o=h));f=Math.abs(u-r)-Math.abs(o-e);f>0?(e-=.5*f,o+=.5*f):(r+=.5*f,u-=.5*f);var a=Math.max(1e-5,Math.abs(u-r)),c=.5*a,p=.5*(r+u),w=.5*(e+o),v={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:p-c,maxX:p+c,minY:w-c,maxY:w+c},size:a,calcSize:1/a,children:{data:null},maxWidth:0,level:0,childrenCount:4}};for(this._splitBranch(v.root),i=0;i<y;i++)l=n[t[i]],l.options.mass>0&&this._placeInTree(v.root,l);this.barnesHutTree=v};t._updateBranchMass=function(n,t){var r=n.mass+t.options.mass,u=1/r,i;n.centerOfMass.x=n.centerOfMass.x*n.mass+t.x*t.options.mass;n.centerOfMass.x*=u;n.centerOfMass.y=n.centerOfMass.y*n.mass+t.y*t.options.mass;n.centerOfMass.y*=u;n.mass=r;i=Math.max(Math.max(t.height,t.radius),t.width);n.maxWidth=n.maxWidth<i?i:n.maxWidth};t._placeInTree=function(n,t,i){(i!=!0||i===undefined)&&this._updateBranchMass(n,t);n.children.NW.range.maxX>t.x?n.children.NW.range.maxY>t.y?this._placeInRegion(n,t,"NW"):this._placeInRegion(n,t,"SW"):n.children.NW.range.maxY>t.y?this._placeInRegion(n,t,"NE"):this._placeInRegion(n,t,"SE")};t._placeInRegion=function(n,t,i){switch(n.children[i].childrenCount){case 0:n.children[i].children.data=t;n.children[i].childrenCount=1;this._updateBranchMass(n.children[i],t);break;case 1:n.children[i].children.data.x==t.x&&n.children[i].children.data.y==t.y?(t.x+=Math.random(),t.y+=Math.random()):(this._splitBranch(n.children[i]),this._placeInTree(n.children[i],t));break;case 4:this._placeInTree(n.children[i],t)}};t._splitBranch=function(n){var t=null;n.childrenCount==1&&(t=n.children.data,n.mass=0,n.centerOfMass.x=0,n.centerOfMass.y=0);n.childrenCount=4;n.children.data=null;this._insertRegion(n,"NW");this._insertRegion(n,"NE");this._insertRegion(n,"SW");this._insertRegion(n,"SE");t!=null&&this._placeInTree(n,t)};t._insertRegion=function(n,t){var r,u,f,e,i=.5*n.size;switch(t){case"NW":r=n.range.minX;u=n.range.minX+i;f=n.range.minY;e=n.range.minY+i;break;case"NE":r=n.range.minX+i;u=n.range.maxX;f=n.range.minY;e=n.range.minY+i;break;case"SW":r=n.range.minX;u=n.range.minX+i;f=n.range.minY+i;e=n.range.maxY;break;case"SE":r=n.range.minX+i;u=n.range.maxX;f=n.range.minY+i;e=n.range.maxY}n.children[t]={centerOfMass:{x:0,y:0},mass:0,range:{minX:r,maxX:u,minY:f,maxY:e},size:.5*n.size,calcSize:2*n.calcSize,children:{data:null},maxWidth:0,level:n.level+1,childrenCount:0}};t._drawTree=function(n,t){this.barnesHutTree!==undefined&&(n.lineWidth=1,this._drawBranch(this.barnesHutTree.root,n,t))};t._drawBranch=function(n,t,i){i===undefined&&(i="#FF0000");n.childrenCount==4&&(this._drawBranch(n.children.NW,t),this._drawBranch(n.children.NE,t),this._drawBranch(n.children.SE,t),this._drawBranch(n.children.SW,t));t.strokeStyle=i;t.beginPath();t.moveTo(n.range.minX,n.range.minY);t.lineTo(n.range.maxX,n.range.minY);t.stroke();t.beginPath();t.moveTo(n.range.maxX,n.range.minY);t.lineTo(n.range.maxX,n.range.maxY);t.stroke();t.beginPath();t.moveTo(n.range.maxX,n.range.maxY);t.lineTo(n.range.minX,n.range.maxY);t.stroke();t.beginPath();t.moveTo(n.range.minX,n.range.maxY);t.lineTo(n.range.minX,n.range.minY);t.stroke()}}])});
/*
//# sourceMappingURL=vis.min.js.map
*/