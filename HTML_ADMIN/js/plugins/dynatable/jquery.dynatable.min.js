(function(n){function c(n,t,i,r){for(var f="",u=0,e=i.length;u<e;u++)f+=r(i[u],t);return"<tr>"+f+"<\/tr>"}function l(n,t){var r=n.attributeWriter(t),i="<td";return(n.hidden||n.textAlign)&&(i+=' style="',n.hidden&&(i+="display: none;"),n.textAlign&&(i+="text-align: "+n.textAlign+";"),i+='"'),i+">"+r+"<\/td>"}function a(n){return n[this.id]}function v(t){return n(t).html()}function y(i,r){var u=this;this.update=function(){var f="",e=r.table.columns,a=r.writers._rowWriter,v=r.writers._cellWriter,c,l,u,o,s;for(i.$element.trigger("dynatable:beforeUpdate",f),u=0,o=r.dataset.records.length;u<o;u++)c=r.dataset.records[u],l=a(u,c,e,v),f+=l;if(r.features.recordCount&&n("#dynatable-record-count-"+i.element.id).replaceWith(i.recordsCount.create()),r.features.paginate&&(n("#dynatable-pagination-links-"+i.element.id).replaceWith(i.paginationLinks.create()),r.features.perPageSelect&&n("#dynatable-per-page-"+i.element.id).val(parseInt(r.dataset.perPage))),r.features.sort&&e)for(i.sortsHeaders.removeAllArrows(),u=0,o=e.length;u<o;u++){var h=e[u],y=t.allMatch(r.dataset.sorts,h.sorts,function(n,t){return t in n}),p=r.dataset.sorts[h.sorts[0]];y&&i.$element.find('[data-dynatable-column="'+h.id+'"]').find(".dynatable-sort-header").each(function(){p==1?i.sortsHeaders.appendArrowUp(n(this)):i.sortsHeaders.appendArrowDown(n(this))})}(r.inputs.queries||r.features.search)&&(s=r.inputs.queries||n(),r.features.search&&(s=s.add("#dynatable-query-search-"+i.element.id)),s.each(function(){var t=n(this),i=r.dataset.queries[t.data("dynatable-query")];t.val(i||"")}));i.$element.find(r.table.bodyRowSelector).remove();i.$element.append(f);i.$element.trigger("dynatable:afterUpdate",f)}}function p(r,u){var f=this;this.initOnLoad=function(){return r.$element.is("table")};this.init=function(){u.table.columns=[];this.getFromTable()};this.getFromTable=function(){var t=r.$element.find(u.table.headRowSelector).children("th,td");if(t.length)t.each(function(t){f.add(n(this),t,!0)});else return n.error("Couldn't find any columns headers in '"+u.table.headRowSelector+" th,td'. If your header row is different, specify the selector in the table: headRowSelector option.")};this.add=function(f,e,o,s){var l=u.table.columns,v=f.text(),h=f.data("dynatable-column")||t.normalizeText(v,u.table.defaultColumnIdStyle),y=f.data("dynatable-sorts"),k=y?n.map(y.split(","),function(t){return n.trim(t)}):[h],c,b;if(h||(this.generate(f),h=f.data("dynatable-column")),l.splice(e,0,{index:e,label:v,id:h,attributeWriter:u.writers[h]||u.writers._attributeWriter,attributeReader:u.readers[h]||u.readers._attributeReader,sorts:k,hidden:f.css("display")==="none",textAlign:f.css("text-align")}),f.attr("data-dynatable-column",h).addClass("dynatable-head"),u.table.headRowClass&&f.addClass(u.table.headRowClass),!o){var p=e+1,w=r.$element.find(u.table.headRowSelector).children("th:nth-child("+p+"),td:nth-child("+p+")").first(),a=l.slice(e+1,l.length);if(w.length?w.before(f):r.$element.find(u.table.headRowSelector).append(f),r.sortsHeaders.attachOne(f.get()),a.length)for(c=0,b=a.length;c<b;c++)a[c].index+=1;s||r.dom.update()}return i};this.remove=function(n){var i=u.table.columns,e=i.length,t,f;if(typeof n=="number")f=i[n],this.removeFromTable(f.id),this.removeFromArray(n);else for(t=i.length-1;t>=0;t--)f=i[t],f.id===n&&(this.removeFromTable(n),this.removeFromArray(t));r.dom.update()};this.removeFromTable=function(n){r.$element.find(u.table.headRowSelector).children('[data-dynatable-column="'+n+'"]').first().remove()};this.removeFromArray=function(n){var i=u.table.columns,r,t,f;for(i.splice(n,1),r=i.slice(n,i.length),t=0,f=r.length;t<f;t++)r[t].index-=1};this.generate=function(t){var i=t===undefined?n("<th><\/th>"):t;return this.attachGeneratedAttributes(i)};this.attachGeneratedAttributes=function(n){var t=r.$element.find(u.table.headRowSelector).children("th[data-dynatable-generated]").length;return n.attr("data-dynatable-column","dynatable-generated-"+t).attr("data-dynatable-no-sort","true").attr("data-dynatable-generated",t)}}function w(t,i){var r=this;this.initOnLoad=function(){return!i.dataset.ajax};this.init=function(){i.dataset.records===null&&(i.dataset.records=this.getFromTable(),i.dataset.queryRecordCount||(i.dataset.queryRecordCount=this.count()),i.dataset.totalRecordCount||(i.dataset.totalRecordCount=i.dataset.queryRecordCount));i.dataset.originalRecords=n.extend(!0,[],i.dataset.records)};this.updateFromJson=function(n){var t,u,r;if(i.params.records==="_root"?t=n:i.params.records in n&&(t=n[i.params.records]),i.params.record)for(u=t.length-1,r=0;r<u;r++)t[r]=t[r][i.params.record];i.params.queryRecordCount in n&&(i.dataset.queryRecordCount=n[i.params.queryRecordCount]);i.params.totalRecordCount in n&&(i.dataset.totalRecordCount=n[i.params.totalRecordCount]);i.dataset.records=t};this.sort=function(){var f=[].sort,r=i.dataset.sorts,u=i.dataset.sortsKeys,e=i.dataset.sortTypes,o=function(i,f){var o,s,c;if(n.isEmptyObject(r))o=t.sorts.functions.originalPlacement(i,f);else for(s=0,c=u.length;s<c;s++){var h=u[s],l=r[h],a=e[h]||t.sorts.guessType(i,f,h);if(o=t.sorts.functions[a](i,f,h,l),o!==0)break}return o};return f.call(i.dataset.records,o)};this.paginate=function(){var n=this.pageBounds(),t=n[0],r=n[1];i.dataset.records=i.dataset.records.slice(t,r)};this.resetOriginal=function(){i.dataset.records=i.dataset.originalRecords||[]};this.pageBounds=function(){var t=i.dataset.page||1,n=(t-1)*i.dataset.perPage,r=Math.min(n+i.dataset.perPage,i.dataset.queryRecordCount);return[n,r]};this.getFromTable=function(){var u=[],r=i.table.columns,f=t.$element.find(i.table.bodyRowSelector);return f.each(function(f){var e={};e["dynatable-original-index"]=f;n(this).find("th,td").each(function(i){r[i]===undefined&&t.domColumns.add(t.domColumns.generate(),r.length,!1,!0);var u=r[i].attributeReader(this,e),f=r[i].id;typeof u=="string"&&u.match(/\s*\<.+\>/)&&(e["dynatable-sortable-text"]||(e["dynatable-sortable-text"]={}),e["dynatable-sortable-text"][f]=n.trim(n("<div><\/div>").html(u).text()));e[f]=u});typeof i.readers._rowReader=="function"&&i.readers._rowReader(f,this,e);u.push(e)}),u};this.count=function(){return i.dataset.records.length}}function b(t,i){this.initOnLoad=function(){return i.features.recordCount};this.init=function(){this.attach()};this.create=function(){var f=t.records.count(),u=i.dataset.queryRecordCount,o=i.dataset.totalRecordCount,r=i.inputs.recordCountText,s=i.params.records,e;return f<u&&i.features.paginate?(e=t.records.pageBounds(),r+="<span class='dynatable-record-bounds'>"+(e[0]+1)+" to "+e[1]+"<\/span> of "):f===u&&i.features.paginate&&(r+=f+" of "),r+=u+" "+s,u<o&&(r+=" (filtered from "+o+" total records)"),n("<span><\/span>",{id:"dynatable-record-count-"+t.element.id,"class":"dynatable-record-count",html:r})};this.attach=function(){var r=i.inputs.recordCountTarget?n(i.inputs.recordCountTarget):t.$element;r[i.inputs.recordCountPlacement](this.create())}}function k(t,i){this.init=function(){this.attach()};this.create=function(){return n("<div><\/div>",{html:"<span>"+i.inputs.processingText+"<\/span>",id:"dynatable-processing-"+t.element.id,"class":"dynatable-processing",style:"position: absolute; display: none;"})};this.position=function(){var r=n("#dynatable-processing-"+t.element.id),u=r.children("span"),s=u.outerHeight(),h=u.outerWidth(),f=t.$element,i=f.offset(),e=f.outerHeight(),o=f.outerWidth();return r.offset({left:i.left,top:i.top}).width(o).height(e),u.offset({left:i.left+(o-h)/2,top:i.top+(e-s)/2}),r};this.attach=function(){t.$element.before(this.create())};this.show=function(){n("#dynatable-processing-"+t.element.id).show();this.position()};this.hide=function(){n("#dynatable-processing-"+t.element.id).hide()}}function d(i,r){this.initOnLoad=function(){return r.features.pushState&&history.pushState};this.init=function(){window.onpopstate=function(n){n.state&&n.state.dynatable&&i.state.pop(n)}};this.push=function(u){var o=window.location.search,a,s,e,h,v,f,c=!(window.history.state&&window.history.state.dynatable),l=c?"replaceState":"pushState";o&&/^\?/.test(o)&&(o=o.substring(1));n.extend(a,u);e=t.refreshQueryString(o,u,r);e&&(e="?"+e);h=window.location.hash;s=window.location.pathname;i.$element.trigger("dynatable:push",u);f={dynatable:{dataset:r.dataset}};c||(f.dynatable.scrollTop=n(window).scrollTop());v=JSON.stringify(f);f.dynatable.dataset.perPageOptions=n.makeArray(f.dynatable.dataset.perPageOptions);try{window.history[l](f,"Dynatable state",s+e+h)}catch(y){f.dynatable.dataset.records=null;window.history[l](f,"Dynatable state",s+e+h)}};this.pop=function(t){var u=t.state.dynatable;r.dataset=u.dataset;u.scrollTop&&n(window).scrollTop(u.scrollTop);u.dataset.records?i.dom.update():i.process(!0)}}function g(r,u){this.initOnLoad=function(){return u.features.sort};this.init=function(){var n=window.location.search.match(new RegExp(u.params.sorts+"[^&=]*=[^&]*","g"));u.dataset.sorts=n?t.deserialize(n)[u.params.sorts]:{};u.dataset.sortsKeys=n?t.keysFromObject(u.dataset.sorts):[]};this.add=function(t,r){var f=u.dataset.sortsKeys,e=n.inArray(t,f);return u.dataset.sorts[t]=r,e===-1&&f.push(t),i};this.remove=function(t){var r=u.dataset.sortsKeys,f=n.inArray(t,r);return delete u.dataset.sorts[t],f!==-1&&r.splice(f,1),i};this.clear=function(){u.dataset.sorts={};u.dataset.sortsKeys.length=0};this.guessType=function(n,t,i){var r=n[i]?typeof n[i]:typeof t[i];return{string:"string",number:"number",boolean:"number",object:"number"}[r]||"number"};this.functions={number:function(n,t,i,r){return n[i]===t[i]?0:r>0?n[i]-t[i]:t[i]-n[i]},string:function(n,t,i,r){var u=n["dynatable-sortable-text"]&&n["dynatable-sortable-text"][i]?n["dynatable-sortable-text"][i]:n[i],f=t["dynatable-sortable-text"]&&t["dynatable-sortable-text"][i]?t["dynatable-sortable-text"][i]:t[i],e;return u=u.toLowerCase(),f=f.toLowerCase(),e=u===f?0:r>0?u>f:f>u,e===!1?-1:+e},originalPlacement:function(n,t){return n["dynatable-original-index"]-t["dynatable-original-index"]}}}function nt(i,r){var u=this;this.initOnLoad=function(){return r.features.sort};this.init=function(){this.attach()};this.create=function(f){var s=n(f),e=n("<a><\/a>",{"class":"dynatable-sort-header",href:"#",html:s.html()}),h=s.data("dynatable-column"),o=t.findObjectInArray(r.table.columns,{id:h});return e.bind("click",function(n){u.toggleSort(n,e,o);i.process();n.preventDefault()}),this.sortedByColumn(e,o)&&(this.sortedByColumnValue(o)==1?this.appendArrowUp(e):this.appendArrowDown(e)),e};this.removeAll=function(){i.$element.find(r.table.headRowSelector).children("th,td").each(function(){u.removeAllArrows();u.removeOne(this)})};this.removeOne=function(t){var i=n(t),r=i.find(".dynatable-sort-header"),u;r.length&&(u=r.html(),r.remove(),i.html(i.html()+u))};this.attach=function(){i.$element.find(r.table.headRowSelector).children("th,td").each(function(){u.attachOne(this)})};this.attachOne=function(t){var i=n(t);i.data("dynatable-no-sort")||i.html(this.create(t))};this.appendArrowUp=function(n){this.removeArrow(n);n.append("<span class='dynatable-arrow'> &#9650;<\/span>")};this.appendArrowDown=function(n){this.removeArrow(n);n.append("<span class='dynatable-arrow'> &#9660;<\/span>")};this.removeArrow=function(n){n.find(".dynatable-arrow").remove()};this.removeAllArrows=function(){i.$element.find(".dynatable-arrow").remove()};this.toggleSort=function(n,u,f){var s=this.sortedByColumn(u,f),h=this.sortedByColumnValue(f),e,o;if(r.inputs.multisort&&t.anyMatch(n,r.inputs.multisort,function(t,i){return n[i]})||(this.removeAllArrows(),i.sorts.clear()),s)if(h==1){for(e=0,o=f.sorts.length;e<o;e++)i.sorts.add(f.sorts[e],-1);this.appendArrowDown(u)}else{for(e=0,o=f.sorts.length;e<o;e++)i.sorts.remove(f.sorts[e]);this.removeArrow(u)}else{for(e=0,o=f.sorts.length;e<o;e++)i.sorts.add(f.sorts[e],1);this.appendArrowUp(u)}};this.sortedByColumn=function(n,i){return t.allMatch(r.dataset.sorts,i.sorts,function(n,t){return t in n})};this.sortedByColumnValue=function(n){return r.dataset.sorts[n.sorts[0]]}}function tt(r,u){var f=this;this.initOnLoad=function(){return u.inputs.queries||u.features.search};this.init=function(){var n=window.location.search.match(new RegExp(u.params.queries+"[^&=]*=[^&]*","g"));u.dataset.queries=n?t.deserialize(n)[u.params.queries]:{};u.dataset.queries===""&&(u.dataset.queries={});u.inputs.queries&&this.setupInputs()};this.add=function(n,t){return u.features.paginate&&(u.dataset.page=1),u.dataset.queries[n]=t,i};this.remove=function(n){return delete u.dataset.queries[n],i};this.run=function(){var i,e;for(query in u.dataset.queries)if(u.dataset.queries.hasOwnProperty(query)){if(i=u.dataset.queries[query],f.functions[query]===undefined)if(e=t.findObjectInArray(u.table.columns,{id:query}),e)f.functions[query]=function(n,t){return n[query]==t};else{n.error("Query named '"+query+"' called, but not defined in queries.functions");continue}u.dataset.records=n.map(u.dataset.records,function(n){return f.functions[query](n,i)?n:null})}u.dataset.queryRecordCount=r.records.count()};this.runSearch=function(i){var f=n.extend({},u.dataset.queries);i?this.add("search",i):this.remove("search");t.objectsEqual(u.dataset.queries,f)||r.process()};this.setupInputs=function(){u.inputs.queries.each(function(){var i=n(this),o=i.data("dynatable-query-event")||u.inputs.queryEvent,t=i.data("dynatable-query")||i.attr("name")||this.id,e=function(i){var e=n(this).val();if(e===""&&(e=undefined),e===u.dataset.queries[t])return!1;e?f.add(t,e):f.remove(t);r.process();i.preventDefault()};i.attr("data-dynatable-query",t).bind(o,e).bind("keypress",function(n){n.which==13&&e.call(this,n)});u.dataset.queries[t]&&i.val(decodeURIComponent(u.dataset.queries[t]))})};this.functions={search:function(n,t){var r=!1,i;for(attr in n)if(n.hasOwnProperty(attr))if(i=n[attr],typeof i=="string"&&i.toLowerCase().indexOf(t.toLowerCase())!==-1){r=!0;break}else continue;return r}}}function it(t,i){var r=this;this.initOnLoad=function(){return i.features.search};this.init=function(){this.attach()};this.create=function(){var r=n("<input />",{type:"search",id:"dynatable-query-search-"+t.element.id,"data-dynatable-query":"search",value:i.dataset.queries.search}),u=n("<span><\/span>",{id:"dynatable-search-"+t.element.id,"class":"dynatable-search",text:"Search: "}).append(r);return r.bind(i.inputs.queryEvent,function(){t.queries.runSearch(n(this).val())}).bind("keypress",function(i){i.which==13&&(t.queries.runSearch(n(this).val()),i.preventDefault())}),u};this.attach=function(){var r=i.inputs.searchTarget?n(i.inputs.searchTarget):t.$element;r[i.inputs.searchPlacement](this.create())}}function rt(n,t){this.initOnLoad=function(){return t.features.paginate};this.init=function(){var n=window.location.search.match(new RegExp(t.params.page+"=([^&]*)"));n&&t.features.pushState?this.set(n[1]):this.set(1)};this.set=function(n){t.dataset.page=parseInt(n,10)}}function ut(t,i){var r=this;this.initOnLoad=function(){return i.features.paginate};this.init=function(){var n=window.location.search.match(new RegExp(i.params.perPage+"=([^&]*)"));n&&i.features.pushState?this.set(n[1],!0):this.set(i.dataset.perPageDefault,!0);i.features.perPageSelect&&this.attach()};this.create=function(){for(var u,o,f=n("<select>",{id:"dynatable-per-page-"+t.element.id,"class":"dynatable-per-page-select"}),e=0,s=i.dataset.perPageOptions.length;e<s;e++)u=i.dataset.perPageOptions[e],o=i.dataset.perPage==u?'selected="selected"':"",f.append('<option value="'+u+'" '+o+">"+u+"<\/option>");return f.bind("change",function(){r.set(n(this).val());t.process()}),n("<span />",{"class":"dynatable-per-page"}).append("<span class='dynatable-per-page-label'>"+i.inputs.perPageText+"<\/span>").append(f)};this.attach=function(){var r=i.inputs.perPageTarget?n(i.inputs.perPageTarget):t.$element;r[i.inputs.perPagePlacement](this.create())};this.set=function(n,r){r||t.paginationPage.set(1);i.dataset.perPage=parseInt(n)}}function ft(t,i){var r=this;this.initOnLoad=function(){return i.features.paginate};this.init=function(){this.attach()};this.create=function(){var s='<ul id="dynatable-pagination-links-'+t.element.id+'" class="'+i.inputs.paginationClass+'">',h=i.inputs.paginationLinkClass,e=i.inputs.paginationActiveClass,a=i.inputs.paginationDisabledClass,c=Math.ceil(i.dataset.queryRecordCount/i.dataset.perPage),o=i.dataset.page,f=[i.inputs.paginationGap[0],i.dataset.page-i.inputs.paginationGap[1],i.dataset.page+i.inputs.paginationGap[2],c+1-i.inputs.paginationGap[3]],r,u,l,v,y,w,b,p;for(s+="<li><span>Pages: <\/span><\/li>",r=1;r<=c;r++)if(r>f[0]&&r<f[1]||r>f[2]&&r<f[3])continue;else u=t.paginationLinks.buildLink(r,r,h,o==r,e),l=n.inArray(r,f),v=f[l+1],l>0&&r!==1&&v&&v>r+1&&(y='<li><span class="dynatable-page-break">&hellip;<\/span><\/li>',u=l<2?y+u:u+y),i.inputs.paginationPrev&&r===1&&(w=t.paginationLinks.buildLink(o-1,i.inputs.paginationPrev,h+" "+i.inputs.paginationPrevClass,o===1,a),u=w+u),i.inputs.paginationNext&&r===c&&(b=t.paginationLinks.buildLink(o+1,i.inputs.paginationNext,h+" "+i.inputs.paginationNextClass,o===c,a),u+=b),s+=u;return s+="<\/ul>",p="#dynatable-pagination-links-"+t.element.id+" a."+h+":not(."+e+",."+a+")",n(document).undelegate(p,"click.dynatable"),n(document).delegate(p,"click.dynatable",function(r){$this=n(this);$this.closest(i.inputs.paginationClass).find("."+e).removeClass(e);$this.addClass(e);t.paginationPage.set($this.data("dynatable-page"));t.process();r.preventDefault()}),s};this.buildLink=function(n,t,i,r,u){var f="<a data-dynatable-page="+n+' class="'+i,e="<li";return r&&(f+=" "+u,e+=' class="'+u+'"'),f+='">'+t+"<\/a>",e+(">"+f+"<\/li>")};this.attach=function(){var r=i.inputs.paginationLinkTarget?n(i.inputs.paginationLinkTarget):t.$element;r[i.inputs.paginationLinkPlacement](t.paginationLinks.create())}}var u,f,i,e,r={dom:y,domColumns:p,records:w,recordsCount:b,processingIndicator:k,state:d,sorts:g,sortsHeaders:nt,queries:tt,inputsSearch:it,paginationPage:rt,paginationPerPage:ut,paginationLinks:ft},t,o,s,c,l,a,v,h;u={features:{paginate:!0,sort:!0,pushState:!0,search:!0,recordCount:!0,perPageSelect:!0},table:{defaultColumnIdStyle:"camelCase",columns:null,headRowSelector:"thead tr",bodyRowSelector:"tbody tr",headRowClass:null},inputs:{queries:null,sorts:null,multisort:["ctrlKey","shiftKey","metaKey"],page:null,queryEvent:"blur change",recordCountTarget:null,recordCountPlacement:"after",paginationLinkTarget:null,paginationLinkPlacement:"after",paginationClass:"dynatable-pagination-links",paginationLinkClass:"dynatable-page-link",paginationPrevClass:"dynatable-page-prev",paginationNextClass:"dynatable-page-next",paginationActiveClass:"dynatable-active-page",paginationDisabledClass:"dynatable-disabled-page",paginationPrev:"Previous",paginationNext:"Next",paginationGap:[1,2,2,1],searchTarget:null,searchPlacement:"before",perPageTarget:null,perPagePlacement:"before",perPageText:"Show: ",recordCountText:"Showing ",processingText:"Processing..."},dataset:{ajax:!1,ajaxUrl:null,ajaxCache:null,ajaxOnLoad:!1,ajaxMethod:"GET",ajaxDataType:"json",totalRecordCount:null,queries:{},queryRecordCount:null,page:null,perPageDefault:10,perPageOptions:[10,20,50,100],sorts:{},sortsKeys:null,sortTypes:{},records:null},writers:{_rowWriter:c,_cellWriter:l,_attributeWriter:a},readers:{_rowReader:null,_attributeReader:v},params:{dynatable:"dynatable",queries:"queries",sorts:"sorts",page:"page",perPage:"perPage",offset:"offset",records:"records",record:null,queryRecordCount:"queryRecordCount",totalRecordCount:"totalRecordCount"}};i={init:function(t,i){return this.settings=f(i),this.element=t,this.$element=n(t),o.call(this),this},process:function(n){s.call(this,n)}};f=function(t){var i=n.extend(!0,{},u,t);return t&&(t.inputs&&(t.inputs.multisort&&(i.inputs.multisort=t.inputs.multisort),t.inputs.paginationGap&&(i.inputs.paginationGap=t.inputs.paginationGap)),t.dataset&&t.dataset.perPageOptions&&(i.dataset.perPageOptions=t.dataset.perPageOptions)),i};o=function(){this.$element.trigger("dynatable:preinit",this);for(model in r)if(r.hasOwnProperty(model)){var n=this[model]=new r[model](this,this.settings);n.initOnLoad()&&n.init()}this.$element.trigger("dynatable:init",this);(!this.settings.dataset.ajax||this.settings.dataset.ajax&&this.settings.dataset.ajaxOnLoad||this.settings.features.paginate)&&this.process()};s=function(i){var r={},e,o,u,f;this.$element.trigger("dynatable:beforeProcess",r);n.isEmptyObject(this.settings.dataset.queries)||(r[this.settings.params.queries]=this.settings.dataset.queries);this.processingIndicator.show();this.settings.features.sort&&!n.isEmptyObject(this.settings.dataset.sorts)&&(r[this.settings.params.sorts]=this.settings.dataset.sorts);this.settings.features.paginate&&this.settings.dataset.page&&(e=this.settings.dataset.page,o=this.settings.dataset.perPage,r[this.settings.params.page]=e,r[this.settings.params.perPage]=o,r[this.settings.params.offset]=(e-1)*o);this.settings.dataset.ajaxData&&n.extend(r,this.settings.dataset.ajaxData);this.settings.dataset.ajax?(u=this,f={type:u.settings.dataset.ajaxMethod,dataType:u.settings.dataset.ajaxDataType,data:r,error:function(){},success:function(n){u.$element.trigger("dynatable:ajax:success",n);u.records.updateFromJson(n);u.dom.update();!i&&u.state.initOnLoad()&&u.state.push(r)},complete:function(){u.processingIndicator.hide()}},f.url=this.settings.dataset.ajaxUrl?this.settings.dataset.ajaxUrl:t.refreshQueryString(window.location.href,{},this.settings),this.settings.dataset.ajaxCache!==null&&(f.cache=this.settings.dataset.ajaxCache),n.ajax(f)):(this.records.resetOriginal(),this.queries.run(),this.settings.features.sort&&this.records.sort(),this.settings.features.paginate&&this.records.paginate(),this.dom.update(),this.processingIndicator.hide(),!i&&this.state.initOnLoad()&&this.state.push(r));this.$element.trigger("dynatable:afterProcess",r)};e={initOnLoad:function(){return!0},init:function(){}};for(model in r)r.hasOwnProperty(model)&&(h=r[model],h.prototype=e);t=i.utility={normalizeText:function(n,t){return this.textTransform[t](n)},textTransform:{trimDash:function(n){return n.replace(/^\s+|\s+$/g,"").replace(/\s+/g,"-")},camelCase:function(n){return n=this.trimDash(n),n.replace(/(\-[a-zA-Z])/g,function(n){return n.toUpperCase().replace("-","")}).replace(/([A-Z])([A-Z]+)/g,function(n,t,i){return t+i.toLowerCase()}).replace(/^[A-Z]/,function(n){return n.toLowerCase()})},dashed:function(n){return n=this.trimDash(n),this.lowercase(n)},underscore:function(n){return n=this.trimDash(n),this.lowercase(n.replace(/(-)/g,"_"))},lowercase:function(n){return n.replace(/([A-Z])/g,function(n){return n.toLowerCase()})}},deserialize:function(t){var r,s,e,o,i,u,f,h;if(!t)return{};for(typeof t=="object"&&(t=t.join("&")),r={},s=t.split("&"),e=0;e<s.length;e++)if(o=s[e].split("="),i=decodeURIComponent(o[0]),o[1]){for(u=decodeURIComponent(o[1].replace(/\+/g," "));f=i.match(/([^&=]+)\[([^&=]+)\]$/);)h=u,i=f[1],u={},f[2].substr(f[2].length-2)=="]["?u[f[2].substr(0,f[2].length-2)]=[h]:u[f[2]]=h;typeof r[i]=="undefined"?r[i]=i.substr(i.length-2)!="[]"?u:[u]:typeof r[i]=="string"?r[i]=u:typeof r[i]=="object"?r[i]=n.extend({},r[i],u):r[i].push(u)}return r},refreshQueryString:function(t,i,r){var l=this,a=t.split("?"),v=a.shift(),e,u,h,o,s,c,f;e=this.deserialize(t);for(f in r.params)if(r.params.hasOwnProperty(f)){if(u=r.params[f],!r.features.sort&&f=="sorts"||!r.features.paginate&&l.anyMatch(f,["page","perPage","offset"],function(n,t){return n==t}))continue;if((f==="page"||f==="offset")&&i.page===1){e[u]&&delete e[u];continue}if(f==="perPage"&&i[u]==r.dataset.perPageDefault){e[u]&&delete e[u];continue}if(f=="queries"&&i[u]){for(h=r.inputs.queries||[],o=n.makeArray(h.map(function(){return n(this).attr("name")})),r.features.search&&o.push("search"),s=0,c=o.length;s<c;s++)f=o[s],i[u][f]?(typeof e[u]=="undefined"&&(e[u]={}),e[u][f]=i[u][f]):delete e[u][f];continue}i[u]?e[u]=i[u]:delete e[u]}return decodeURI(n.param(e))},keysFromObject:function(n){var t=[];for(var i in n)t.push(i);return t},findObjectInArray:function(n,t){for(var r,f=this,u,i=0,e=n.length;i<e;i++)if(r=n[i],f.allMatch(r,t,function(n,t,i){return n[t]==i})){u=r;break}return u},allMatch:function(t,i,r){var u=!0,f=n.isArray(i);return n.each(i,function(n,i){var e=f?r(t,i):r(t,n,i);if(!e)return u=!1}),u},anyMatch:function(t,i,r){var u=!1,f=n.isArray(i);return n.each(i,function(n,i){var e=f?r(t,i):r(t,n,i);if(e)return u=!0,!1}),u},objectsEqual:function(n,t){for(attr in n)if(n.hasOwnProperty(attr)&&(!t.hasOwnProperty(attr)||n[attr]!==t[attr]))return!1;for(attr in t)if(t.hasOwnProperty(attr)&&!n.hasOwnProperty(attr))return!1;return!0},randomHash:function(){return((1+Math.random())*65536|0).toString(16).substring(1)}};typeof Object.create!="function"&&(Object.create=function(n){function t(){}return t.prototype=n,new t});n.dynatableSetup=function(n){u=f(n)};n.dynatable=function(t){n.fn.dynatable=function(i){return this.each(function(){n.data(this,"dynatable")||n.data(this,"dynatable",Object.create(t).init(this,i))})}};n.dynatable(i)})(jQuery);
/*
//# sourceMappingURL=jquery.dynatable.min.js.map
*/